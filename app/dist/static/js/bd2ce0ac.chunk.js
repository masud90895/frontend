"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["FormEditor"],{8941:function(e,t,r){r.r(t),r.d(t,{default:function(){return rK}});var n,l,a,i,o,s,c,u,d,m,h,p,g,f,_,b,v,E,w,x,y,C,k,S,A,M,N,O,z,R,L,T,D=r(25304),P=r(32367),F=r(99221),W=r(12599),H=r(28606),$=r(94215),B=r(63478),I=r(79765),j=r(98002),J=r.n(j),V=r(30758),X=r(58797),K={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{checklist:"editor-list-checklist",nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough",code:"editor-text-code"},table:"table",tableAddColumns:"tableAddColumns",tableAddRows:"tableAddRows",tableCell:"tableCell",tableCellActionButton:"tableCellActionButton",tableCellActionButtonContainer:"tableCellActionButtonContainer",tableCellEditing:"tableCellEditing",tableCellHeader:"tableCellHeader",tableCellPrimarySelected:"tableCellPrimarySelected",tableCellResizer:"tableCellResizer",tableCellSelected:"tableCellSelected",tableCellSortedIndicator:"tableCellSortedIndicator",tableResizeRuler:"tableCellResizeRuler",tableSelected:"tableSelected",tableSelection:"tableSelection",code:"editor-code",codeHighlight:{atrule:"editor-tokenAttr",attr:"editor-tokenAttr",boolean:"editor-tokenProperty",builtin:"editor-tokenSelector",cdata:"editor-tokenComment",char:"editor-tokenSelector",class:"editor-tokenFunction","class-name":"editor-tokenFunction",comment:"editor-tokenComment",constant:"editor-tokenProperty",deleted:"editor-tokenProperty",doctype:"editor-tokenComment",entity:"editor-tokenOperator",function:"editor-tokenFunction",important:"editor-tokenVariable",inserted:"editor-tokenSelector",keyword:"editor-tokenAttr",namespace:"editor-tokenVariable",number:"editor-tokenProperty",operator:"editor-tokenOperator",prolog:"editor-tokenComment",property:"editor-tokenProperty",punctuation:"editor-tokenPunctuation",regex:"editor-tokenVariable",selector:"editor-tokenSelector",string:"editor-tokenSelector",symbol:"editor-tokenProperty",tag:"editor-tokenProperty",url:"editor-tokenOperator",variable:"editor-tokenVariable"}},Z=r(13107),Y=r(51343),U=r(88916),q=r(44425),G=r(16299),Q=r(90893),ee=r(98745),et=r(75148),er=r(89016),en=r(90141),el=r(95356),ea=r(89876),ei=r(74323),eo=r(88218),es=r(49512),ec=r(21059),eu=r(13612),ed=r(31965),em=r(42733),eh=r(14509),ep=r(49993);function eg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ef(e){let{className:t,format:r,nodeKey:n,videoID:l,width:a,height:i}=e;return V.createElement(ep.j,{className:t,format:r,nodeKey:n},V.createElement("iframe",{width:a,height:i,src:`https://www.youtube-nocookie.com/embed/${l}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"}))}function e_(e){let t=e.getAttribute("data-lexical-youtube"),r=e.getAttribute("width"),n=e.getAttribute("height"),l=e.parentElement,a="";if(l&&"DIV"===l.tagName){let e=l.style.textAlign;e&&(a=e)}return t?{node:new eb({id:t,width:r,height:n,format:a})}:null}class eb extends ea.d{static getType(){return"youtube"}static clone(e){return new eb({id:e.__id,width:e.__width,height:e.__height},e.__format,e.__key)}static importDOM(){return{iframe:e=>e.getAttribute("data-lexical-youtube")?{conversion:e_,priority:1}:null}}exportDOM(){let e=document.createElement("div");e.style.textAlign=this.__format;let t=document.createElement("iframe");return t.setAttribute("data-lexical-youtube",this.__id),t.setAttribute("width",this.__width),t.setAttribute("height",this.__height),t.setAttribute("src",`https://www.youtube-nocookie.com/embed/${this.__id}`),t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","true"),t.setAttribute("title","YouTube video"),e.appendChild(t),{element:e}}updateDOM(){return!1}getId(){return this.__id}getTextContent(e,t){return`https://www.youtube.com/watch?v=${this.__id}`}decorate(e,t){let r=t.theme.embedBlock||{},n={base:r.base||"",focus:r.focus||""};return V.createElement(ef,{className:n,format:this.__format,nodeKey:this.getKey(),videoID:this.__id,width:this.__width,height:this.__height})}constructor(e,t,r){var n;super(t,r),eg(this,"__id",void 0),eg(this,"__width",void 0),eg(this,"__height",void 0),this.__id=null==e?void 0:e.id,this.__width=null==e?void 0:e.width,this.__height=null==e?void 0:e.height,this.__format=null!=(n=null==e?void 0:e.format)?n:t}}let ev=(0,eu.gu)("INSERT_YOUTUBE_COMMAND");function eE(){let[e]=(0,el.DF)();return(0,V.useEffect)(()=>{if(!e.hasNodes([eb]))throw Error("YouTubePlugin: YouTubeNode not registered on editor");return e.registerCommand(ev,e=>{let t=new eb(e);return(0,ec.Pe)(t),!0},eu.jZ)},[e]),null}function ew(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ex(e){let{className:t,format:r,nodeKey:n,url:l,width:a,height:i}=e;return V.createElement(ep.j,{className:t,format:r,nodeKey:n},V.createElement("iframe",{src:l,width:a,height:i,frameBorder:"0",scrolling:"no",allowFullScreen:!0,title:"iframe embed"}))}function ey(e){let t=e.getAttribute("data-lexical-iframe"),r=e.getAttribute("width"),n=e.getAttribute("height"),l=e.parentElement,a="";if(l&&"DIV"===l.tagName){let e=l.style.textAlign;e&&(a=e)}return t?{node:new eC({url:t,width:r,height:n,format:a})}:null}class eC extends ea.d{static getType(){return"iframe"}static clone(e){return new eC({url:e.__url,width:e.__width,height:e.__height},e.__format,e.__key)}static importJSON(e){let t=new eC(e.url);return t.setFormat(e.format),t}exportJSON(){return{...super.exportJSON(),type:"iframe",version:1,url:this.__url}}exportDOM(){let e=document.createElement("div");e.style.textAlign=this.__format;let t=document.createElement("iframe");return t.setAttribute("data-lexical-iframe",this.__url),t.setAttribute("width",this.__width),t.setAttribute("height",this.__height),t.setAttribute("src",this.__url),t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","true"),t.setAttribute("title",""),e.appendChild(t),{element:e}}static importDOM(){return{iframe:e=>e.hasAttribute("data-lexical-iframe")?{conversion:ey,priority:1}:null}}updateDOM(){return!1}getId(){return this.__url}getTextContent(e,t){return this.__url}decorate(e,t){let r=t.theme.embedBlock||{},n={base:r.base||"",focus:r.focus||""};return V.createElement(ex,{className:n,format:this.__format,nodeKey:this.getKey(),url:this.__url,width:this.__width,height:this.__height})}constructor(e,t,r){var n;super(t,r),ew(this,"__url",void 0),ew(this,"__width",void 0),ew(this,"__height",void 0),this.__url=null==e?void 0:e.url,this.__width=null==e?void 0:e.width,this.__height=null==e?void 0:e.height,this.__format=null!=(n=null==e?void 0:e.format)?n:t}}let ek=(0,eu.gu)("INSERT_IFRAME_COMMAND");function eS(){let[e]=(0,el.DF)();return(0,V.useEffect)(()=>{if(!e.hasNodes([eC]))throw Error("IframePlugin: iframeNode not registered on editor");return e.registerCommand(ek,e=>{let t=new eC(e);return(0,ec.Pe)(t),!0},eu.jZ)},[e]),null}var eA=r(98982),eM=r(43961);function eN({onSubmit:e,description:t}){let{i18n:r}=(0,eM.PCX)(),n={component:"Form",elements:{src:{name:"src",component:"Text",label:r.formatMessage({id:"embed_link"}),fullWidth:!0,placeholder:r.formatMessage({id:"embed_link"}),variant:"outlined",size:"small",description:t},size:{name:"size",component:"Container",variant:"horizontal",elements:{width:{name:"width",component:"Text",margin:"normal",label:r.formatMessage({id:"rich_text_editor_width"}),fullWidth:!1,sx:{maxWith:200},placeholder:r.formatMessage({id:"rich_text_editor_width"}),variant:"outlined",size:"small"},height:{name:"height",component:"Text",margin:"normal",label:r.formatMessage({id:"rich_text_editor_height"}),fullWidth:!1,sx:{maxWith:200},placeholder:r.formatMessage({id:"rich_text_editor_height"}),variant:"outlined",size:"small"}}},hint:{component:"Typo",plainText:r.formatMessage({id:"rich_text_size_hint"}),color:"text.hint",variant:"body2",sx:{}},footer:{name:"_footer",component:"FormFooter",elements:{submit:{name:"_submit",component:"Submit",label:r.formatMessage({id:"ok"}),variant:"contained",color:"primary"}}}}};return V.createElement(eA.ok,{formSchema:n,onSubmit:e,initialValues:{src:"",width:"auto",height:"auto"}})}function eO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ez({className:e,format:t,nodeKey:r,videoID:n,width:l,height:a,h:i}){return V.createElement(ep.j,{className:e,format:t,nodeKey:r},V.createElement("iframe",{width:l,height:a,src:`https://player.vimeo.com/video/${n}${i?`?h=${i}`:""}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Vimeo video"}))}function eR(e){let t=e.getAttribute("data-lexical-vimeo"),r=e.getAttribute("width"),n=e.getAttribute("height");return t?{node:new eL({id:t,width:r,height:n})}:null}class eL extends ea.d{static getType(){return"vimeo"}static clone(e){return new eL({id:e.__id,width:e.__width,height:e.__height,h:e.__h},e.__format,e.__key)}static importJSON(e){let t=new eL(e.videoID);return t.setFormat(e.format),t}exportJSON(){return{...super.exportJSON(),type:"vimeo",version:1,videoID:this.__id,h:this.__h}}exportDOM(){let e=document.createElement("iframe");return e.setAttribute("data-lexical-vimeo",this.__id),e.setAttribute("width",this.__width),e.setAttribute("height",this.__height),e.setAttribute("src",`https://player.vimeo.com/video/${this.__id}${this.__h?`?h=${this.__h}`:""}`),e.setAttribute("frameborder","0"),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.setAttribute("allowfullscreen","true"),e.setAttribute("title","Vimeo video"),{element:e}}static importDOM(){return{iframe:e=>e.hasAttribute("data-lexical-vimeo")?{conversion:eR,priority:1}:null}}updateDOM(){return!1}getId(){return this.__id}getTextContent(e,t){return`https://player.vimeo.com/video/${this.__id}${this.__h?`?h=${this.__h}`:""}`}decorate(e,t){let r=t.theme.embedBlock||{},n={base:r.base||"",focus:r.focus||""};return V.createElement(ez,{className:n,format:this.__format,nodeKey:this.getKey(),videoID:this.__id,h:this.__h,width:this.__width,height:this.__height})}constructor(e,t,r){super(t,r),eO(this,"__id",void 0),eO(this,"__width",void 0),eO(this,"__height",void 0),eO(this,"__h",void 0),this.__id=null==e?void 0:e.id,this.__width=null==e?void 0:e.width,this.__height=null==e?void 0:e.height,this.__h=null==e?void 0:e.h}}let eT=(0,eu.gu)("INSERT_VIMEO_COMMAND");function eD(){let[e]=(0,el.DF)();return(0,V.useEffect)(()=>{if(!e.hasNodes([eL]))throw Error("VimeoPlugin: VimeoNode not registered on editor");return e.registerCommand(eT,e=>{let t=new eL(e);return(0,ec.Pe)(t),!0},eu.jZ)},[e]),null}let eP={contentName:"rich_text_editor_youtube_video",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:V.createElement(D.s4,{icon:"ico-youtube"}),insertNode:(e,t)=>{e.dispatchCommand(ev,t)},keywords:["youtube","video"],parseUrl:async e=>{let t=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/.exec(e),r=t&&(null==t?void 0:t[2].length)===11?t[2]:null;return null!=r?{id:r,url:e}:null},type:"youtube-video"};D.s4;let eF=[eP,{contentName:"rich_text_editor_embed_iframe",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:V.createElement(D.s4,{icon:"ico-file-code-o"}),insertNode:(e,t)=>{e.dispatchCommand(ek,t)},keywords:["iframe","video"],parseUrl:async e=>({url:e}),type:"iframe"}];function eW({embedConfig:e,onClose:t}){let[r]=(0,el.DF)(),{dialogBackend:n,i18n:l}=(0,eM.PCX)(),a=async a=>{let{src:i}=a,o=en.R1.exec(i);if(null!=e&&null!=i&&null!=o){let n=await e.parseUrl(i);if(n){var s;s={...a,...n},e.insertNode(r,s),t();return}}n.alert({message:l.formatMessage({id:"the_url_is_invalid"})}),t()};return V.createElement(eN,{onSubmit:a})}function eH(){let[e,t]=(0,ed.A)(),{i18n:r}=(0,eM.PCX)();return V.createElement(V.Fragment,null,e,V.createElement(en.Cf,{embedConfigs:eF,onOpenEmbedModalForConfig:e=>{t(r.formatMessage({id:e.contentName}),t=>V.createElement(eW,{embedConfig:e,onClose:t}))},menuRenderFn:()=>null,getMenuOptions:()=>null}))}var e$=r(41349),eB=r(24225),eI=r(56332);function ej({onSubmit:e}){let{i18n:t}=(0,eM.PCX)(),r={component:"Form",elements:{src:{name:"src",required:!0,component:"DirectUploadFile",label:t.formatMessage({id:"image_url"}),fullWidth:!0,placeholder:t.formatMessage({id:"image_url"}),variant:"outlined",size:"small"},size:{name:"size",component:"Container",variant:"horizontal",elements:{width:{name:"width",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_width"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_width"}),variant:"outlined",size:"small"},height:{name:"height",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_height"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_height"}),variant:"outlined",size:"small"}}},hint:{component:"Typo",plainText:t.formatMessage({id:"rich_text_size_hint"}),color:"text.hint",variant:"body2",sx:{}},footer:{name:"_footer",component:"FormFooter",elements:{submit:{name:"_submit",component:"Submit",label:t.formatMessage({id:"ok"}),variant:"contained",color:"primary"}}}}};return V.createElement(eA.ok,{formSchema:r,onSubmit:e,initialValues:{src:"",width:"auto",height:"auto"}})}function eJ({onSubmit:e}){let{i18n:t}=(0,eM.PCX)(),r={component:"Form",elements:{src:{name:"src",component:"Text",label:t.formatMessage({id:"image_url"}),fullWidth:!0,placeholder:t.formatMessage({id:"image_url"}),variant:"outlined",size:"small"},size:{name:"size",component:"Container",variant:"horizontal",elements:{width:{name:"width",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_width"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_width"}),variant:"outlined",size:"small"},height:{name:"height",component:"Text",margin:"normal",label:t.formatMessage({id:"rich_text_editor_height"}),fullWidth:!1,sx:{maxWidth:200},placeholder:t.formatMessage({id:"rich_text_editor_height"}),variant:"outlined",size:"small"}}},hint:{component:"Typo",plainText:t.formatMessage({id:"rich_text_size_hint"}),color:"text.hint",variant:"body2",sx:{}},footer:{name:"_footer",component:"FormFooter",elements:{submit:{name:"_submit",component:"Submit",label:t.formatMessage({id:"ok"}),variant:"contained",color:"primary"}}}}};return V.createElement(eA.ok,{formSchema:r,onSubmit:e,initialValues:{src:""}})}var eV=r(68651),eX=r.n(eV);let eK=(0,eu.gu)("INSERT_IMAGE_COMMAND"),eZ=e=>new Promise((t,r)=>{let n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",e=>r(e)),n.src=e}),eY=e=>eX()(e)||isNaN(e)?e:parseFloat(e);function eU({onClick:e}){let{dialogBackend:t,i18n:r}=(0,eM.PCX)(),n=async({src:n,altText:l,width:a,height:i})=>{try{await eZ(n),e({altText:l,src:n,width:eY(a),height:eY(i)})}catch(e){t.alert({message:r.formatMessage({id:"the_url_is_invalid"})})}};return V.createElement(eJ,{onSubmit:n})}function eq({onClick:e}){let{dialogBackend:t,i18n:r}=(0,eM.PCX)(),n=async({src:n,altText:l,width:a,height:i})=>{try{await eZ(n),e({altText:l,src:n,width:eY(a),height:eY(i)})}catch(e){t.alert({message:r.formatMessage({id:"error_invalid_file_type"})})}};return V.createElement(ej,{onSubmit:n})}function eG({activeEditor:e,onClose:t}){let[r,n]=(0,V.useState)(null),l=(0,V.useRef)(!1),{i18n:a}=(0,eM.PCX)();(0,V.useEffect)(()=>{l.current=!1;let e=e=>{l.current=e.altKey};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[e]);let i=r=>{e.dispatchCommand(eK,r),t()};return V.createElement(V.Fragment,null,!r&&V.createElement(F.A,{sx:{display:"flex",flexDirection:"column",width:"100%"}},V.createElement(eI.A,{"data-testid":"image-modal-option-url",role:"button",variant:"outlined",disableRipple:!0,size:"medium",color:"primary",onClick:()=>n("url"),sx:{minWidth:100,mb:2}},a.formatMessage({id:"rich_text_editor_external_image"})),V.createElement(eI.A,{"data-testid":"image-modal-option-file",role:"button",variant:"outlined",disableRipple:!0,size:"medium",color:"primary",onClick:()=>n("file"),sx:{minWidth:100}},a.formatMessage({id:"upload"}))),"url"===r&&V.createElement(eU,{onClick:i}),"file"===r&&V.createElement(eq,{onClick:i}))}function eQ({captionsEnabled:e}){let[t]=(0,el.DF)();return(0,V.useEffect)(()=>{if(!t.hasNodes([eB.K1]))throw Error("ImagesPlugin: ImageNode not registered on editor");return(0,ec.Sd)(t.registerCommand(eK,e=>{let t=(0,eB.uC)(e);return(0,eu.H2)([t]),(0,eu.Iq)(t.getParentOrThrow())&&(0,ec.cj)(t,eu.lJ).selectEnd(),!0},eu.jZ),t.registerCommand(eu.Tg,e=>(function(e){let t=e1();if(!t)return!1;let r=e.dataTransfer;return!!r&&(r.setData("text/plain","_"),r.setDragImage(e0,0,0),r.setData("application/x-lexical-drag",JSON.stringify({data:{altText:t.__altText,caption:t.__caption,height:t.__height,key:t.getKey(),maxWidth:t.__maxWidth,showCaption:t.__showCaption,src:t.__src,width:t.__width},type:"image"})),!0)})(e),eu.Wg),t.registerCommand(eu.ri,e=>{var t;return t=e,!!e1()&&(e5(t)||t.preventDefault(),!0)},eu.Ac),t.registerCommand(eu.Sr,e=>(function(e,t){let r=e1();if(!r)return!1;let n=function(e){var t;let r=null==(t=e.dataTransfer)?void 0:t.getData("application/x-lexical-drag");if(!r)return null;let{type:n,data:l}=JSON.parse(r);return"image"!==n?null:l}(e);if(!n)return!1;if(e.preventDefault(),e5(e)){let l=function(e){let t,r,n=e.target,l=(r=null==n?null:9===n.nodeType?n.defaultView:n.ownerDocument.defaultView,e$.qx?(r||window).getSelection():null);if(document.caretRangeFromPoint)t=document.caretRangeFromPoint(e.clientX,e.clientY);else if(e.rangeParent&&null!==l)l.collapse(e.rangeParent,e.rangeOffset||0),t=l.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return t}(e);r.remove();let a=(0,eu.uT)();null!=l&&a.applyDOMRange(l),(0,eu.n1)(a),t.dispatchCommand(eK,n)}return!0})(e,t),eu.Wg))},[e,t]),null}let e0=document.createElement("img");function e1(){let e=(0,eu.vJ)();if(!(0,eu.RT)(e))return null;let t=e.getNodes()[0];return(0,eB.Eh)(t)?t:null}function e5(e){let t=e.target;return!!(t&&t instanceof HTMLElement&&!t.closest("code, span.editor-image")&&t.parentElement&&t.parentElement.closest("div.ContentEditable__root"))}e0.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var e2=r(69508);function e3({activeEditor:e,onClose:t}){let{i18n:r}=(0,eM.PCX)(),[n,l]=(0,V.useState)("5"),[a,i]=(0,V.useState)("5"),[o,s]=(0,V.useState)(!0);return(0,V.useEffect)(()=>{let e=Number(n),t=Number(a);e&&e>0&&e<=500&&t&&t>0&&t<=50?s(!1):s(!0)},[n,a]),V.createElement(V.Fragment,null,V.createElement(em.ks,{placeholder:r.formatMessage({id:"rich_text_editor_number_of_rows_from_to"},{from:1,to:500}),label:r.formatMessage({id:"rich_text_editor_rows"}),onChange:l,value:n,"data-test-id":"table-modal-rows",type:"number"}),V.createElement(em.ks,{placeholder:r.formatMessage({id:"rich_text_editor_number_of_columns_from_to"},{from:1,to:50}),label:r.formatMessage({id:"rich_text_editor_columns"}),onChange:i,value:a,"data-test-id":"table-modal-columns",type:"number"}),V.createElement(em.ii,{"data-test-id":"table-model-confirm-insert"},V.createElement(eI.A,{variant:"contained",disabled:o,onClick:()=>{e.dispatchCommand(es.Ng,{columns:a,rows:n}),t()}},r.formatMessage({id:"confirm"}))))}function e4(){return(e4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}(0,eu.gu)("INSERT_NEW_TABLE_COMMAND");var e6=e=>V.createElement("svg",e4({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-bold_svg__bi type-bold_svg__bi-type-bold"},e),n||(n=V.createElement("path",{d:"M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"})));function e7(){return(e7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var e8=e=>V.createElement("svg",e7({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-italic_svg__bi type-italic_svg__bi-type-italic"},e),l||(l=V.createElement("path",{d:"M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"})));function e9(){return(e9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var te=e=>V.createElement("svg",e9({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-underline_svg__bi type-underline_svg__bi-type-underline"},e),a||(a=V.createElement("path",{d:"M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"}))),tt=r(51326);function tr(){return(tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tn=e=>V.createElement("svg",tr({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 512 512"},e),i||(i=V.createElement("path",{fill:"#777",d:"M221.631 109 109.92 392h58.055l24.079-61h127.892l24.079 61h58.055L290.369 109Zm-8.261 168L256 169l42.63 108Z"})));function tl(){return(tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var ta=e=>V.createElement("svg",tl({width:16,height:16,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=V.createElement("path",{fill:"#fff",fillOpacity:.01,d:"M0 0h48v48H0z"})),s||(s=V.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 37a4 4 0 0 0 4-4c0-1.473-1.333-3.473-4-6-2.667 2.527-4 4.527-4 6a4 4 0 0 0 4 4Z",fill:"#777"})),c||(c=V.createElement("path",{d:"m20.854 5.504 3.535 3.536",stroke:"#777",strokeWidth:4,strokeLinecap:"round"})),u||(u=V.createElement("path",{d:"M23.682 8.333 8.125 23.889 19.44 35.203l15.556-15.557L23.682 8.333Z",stroke:"#777",strokeWidth:4,strokeLinejoin:"round"})),d||(d=V.createElement("path",{d:"m12 20.073 16.961 5.577M4 43h40",stroke:"#777",strokeWidth:4,strokeLinecap:"round"})));function ti(){return(ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var to=e=>V.createElement("svg",ti({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=V.createElement("path",{d:"M4.648 4.475 1.824 12.25H.67l3.252-8.531h.744l-.018.756Zm2.368 7.775-2.83-7.775-.018-.756h.744l3.264 8.531h-1.16Zm-.147-3.158v.926H2.076v-.926H6.87Zm6.024 2.074V7.902c0-.25-.051-.466-.153-.65a.997.997 0 0 0-.445-.434 1.622 1.622 0 0 0-.738-.152c-.274 0-.514.047-.721.14a1.255 1.255 0 0 0-.48.37.809.809 0 0 0-.17.492H9.101c0-.227.058-.451.175-.674a1.98 1.98 0 0 1 .504-.603c.223-.184.489-.329.797-.434.313-.11.66-.164 1.043-.164.461 0 .867.078 1.219.234.355.157.633.393.832.71.203.312.305.704.305 1.177v2.953c0 .211.017.436.052.674.04.238.096.443.17.615v.094h-1.13a2.022 2.022 0 0 1-.13-.498 4.011 4.011 0 0 1-.046-.586Zm.187-2.76.012.762h-1.096c-.309 0-.584.025-.826.076a1.89 1.89 0 0 0-.61.217.979.979 0 0 0-.504.879c0 .2.046.38.135.545a.98.98 0 0 0 .405.392c.183.094.408.141.674.141.332 0 .625-.07.878-.211a1.83 1.83 0 0 0 .604-.516c.152-.203.234-.4.246-.591l.463.521a1.572 1.572 0 0 1-.223.545 2.607 2.607 0 0 1-1.2 1.025 2.328 2.328 0 0 1-.927.176 2.42 2.42 0 0 1-1.13-.252 1.933 1.933 0 0 1-.75-.674 1.784 1.784 0 0 1-.264-.955c0-.34.066-.638.199-.896a1.73 1.73 0 0 1 .574-.65c.25-.176.551-.31.903-.399a4.76 4.76 0 0 1 1.177-.135h1.26Z",fill:"#000"})));function ts(){return(ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tc=e=>V.createElement("svg",ts({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-strikethrough_svg__bi type-strikethrough_svg__bi-type-strikethrough"},e),h||(h=V.createElement("path",{d:"M6.333 5.686c0 .31.083.581.27.814H5.166a2.776 2.776 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768 1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703 1.34 0 2.31-.705 2.31-1.675 0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697 0 1.826-1.436 2.967-3.644 2.967z"})));function tu(){return(tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var td=e=>V.createElement("svg",tu({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),p||(p=V.createElement("path",{d:"M11.354 14.5v-.665l1.553-1.438c.132-.128.243-.243.332-.345.091-.102.16-.203.207-.3.047-.1.07-.207.07-.322a.574.574 0 0 0-.326-.546.748.748 0 0 0-.343-.077.721.721 0 0 0-.35.082.557.557 0 0 0-.23.232.753.753 0 0 0-.08.36h-.876c0-.286.065-.534.194-.744a1.3 1.3 0 0 1 .543-.488 1.8 1.8 0 0 1 .806-.172c.312 0 .584.055.816.166.233.11.414.261.543.456.13.194.194.418.194.669 0 .165-.033.327-.098.488-.064.16-.178.339-.343.535a7.918 7.918 0 0 1-.697.7l-.637.625v.03h1.832v.754h-3.11ZM5.04 4.273l1.92 3.196h.068l1.93-3.196h1.803L8.073 8.636 10.805 13H8.972L7.03 9.825h-.068L5.018 13H3.194l2.757-4.364-2.723-4.363H5.04Z",fill:"currentColor"})));function tm(){return(tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var th=e=>V.createElement("svg",tm({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),g||(g=V.createElement("path",{d:"M11.354 6v-.665l1.553-1.438c.132-.128.243-.243.332-.345a1.31 1.31 0 0 0 .207-.3c.047-.1.07-.207.07-.322a.574.574 0 0 0-.326-.545.748.748 0 0 0-.343-.077.721.721 0 0 0-.35.08.557.557 0 0 0-.23.233.753.753 0 0 0-.08.36h-.876c0-.286.065-.534.194-.744a1.3 1.3 0 0 1 .543-.488 1.8 1.8 0 0 1 .806-.172c.312 0 .584.055.816.166.233.11.414.261.543.456.13.194.194.417.194.669 0 .165-.033.327-.098.488-.064.16-.178.339-.343.535a7.92 7.92 0 0 1-.697.7l-.637.625v.03h1.832V6h-3.11ZM5.04 4.273l1.92 3.196h.068l1.93-3.196h1.803L8.073 8.636 10.805 13H8.972L7.03 9.825h-.068L5.018 13H3.194l2.757-4.364-2.723-4.363H5.04Z",fill:"currentColor"})));function tp(){return(tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tg=e=>V.createElement("svg",tp({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"trash_svg__bi trash_svg__bi-trash"},e),f||(f=V.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"})),_||(_=V.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})));function tf(){return(tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var t_=e=>V.createElement("svg",tf({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"arrow-clockwise_svg__bi arrow-clockwise_svg__bi-arrow-clockwise"},e),b||(b=V.createElement("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"})),v||(v=V.createElement("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})));function tb(){return(tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tv=e=>V.createElement("svg",tb({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"arrow-counterclockwise_svg__bi arrow-counterclockwise_svg__bi-arrow-counterclockwise"},e),E||(E=V.createElement("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"})),w||(w=V.createElement("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"})));function tE(){return(tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function tw(){return(tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function tx(){return(tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function ty(){return(ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function tC(){return(tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function tk(){return(tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function tS(){return(tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tA=r(18851),tM=e=>{let{icon:t,label:r}=e;return V.createElement(F.A,{sx:{display:"flex"}},t,V.createElement(tA.A,{sx:{flex:1,minWidth:0,display:"inline-flex"}},r))};let tN={bullet:{label:"rich_text_editor_bullet_list",icon:V.createElement(e=>V.createElement("svg",tC({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"list-ul_svg__bi list-ul_svg__bi-list-ul"},e),S||(S=V.createElement("path",{fillRule:"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}))),null)},check:{label:"rich_text_editor_check_list",icon:V.createElement(e=>V.createElement("svg",tS({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"square-check_svg__bi square-check_svg__bi-check-square"},e),N||(N=V.createElement("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})),O||(O=V.createElement("path",{d:"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"}))),null)},h1:{label:"rich_text_editor_heading_1",icon:V.createElement(e=>V.createElement("svg",tw({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-h1_svg__bi type-h1_svg__bi-type-h1"},e),y||(y=V.createElement("path",{d:"M8.637 13V3.669H7.379V7.62H2.758V3.67H1.5V13h1.258V8.728h4.62V13h1.259zm5.329 0V3.669h-1.244L10.5 5.316v1.265l2.16-1.565h.062V13h1.244z"}))),null)},h2:{label:"rich_text_editor_heading_2",icon:V.createElement(e=>V.createElement("svg",tx({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-h2_svg__bi type-h2_svg__bi-type-h2"},e),C||(C=V.createElement("path",{d:"M7.638 13V3.669H6.38V7.62H1.759V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.022-6.733v-.048c0-.889.63-1.668 1.716-1.668.957 0 1.675.608 1.675 1.572 0 .855-.554 1.504-1.067 2.085l-3.513 3.999V13H15.5v-1.094h-4.245v-.075l2.481-2.844c.875-.998 1.586-1.784 1.586-2.953 0-1.463-1.155-2.556-2.919-2.556-1.941 0-2.966 1.326-2.966 2.74v.049h1.223z"}))),null)},h3:{label:"rich_text_editor_heading_3",icon:V.createElement(e=>V.createElement("svg",ty({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"type-h3_svg__bi type-h3_svg__bi-type-h3"},e),k||(k=V.createElement("path",{d:"M7.637 13V3.669H6.379V7.62H1.758V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.625-4.272h1.018c1.142 0 1.935.67 1.949 1.674.013 1.005-.78 1.737-2.01 1.73-1.08-.007-1.853-.588-1.935-1.32H9.108c.069 1.327 1.224 2.386 3.083 2.386 1.935 0 3.343-1.155 3.309-2.789-.027-1.51-1.251-2.16-2.037-2.249v-.068c.704-.123 1.764-.91 1.723-2.229-.035-1.353-1.176-2.4-2.954-2.385-1.873.006-2.857 1.162-2.898 2.358h1.196c.062-.69.711-1.299 1.696-1.299.998 0 1.695.622 1.695 1.525.007.922-.718 1.592-1.695 1.592h-.964v1.074z"}))),null)},number:{label:"rich_text_editor_numbered_list",icon:V.createElement(e=>V.createElement("svg",tk({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"list-ol_svg__bi list-ol_svg__bi-list-ol"},e),A||(A=V.createElement("path",{fillRule:"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"})),M||(M=V.createElement("path",{d:"M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"}))),null)},paragraph:{label:"rich_text_editor_normal",icon:V.createElement(e=>V.createElement("svg",tE({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-paragraph_svg__bi text-paragraph_svg__bi-text-paragraph"},e),x||(x=V.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z"}))),null)}};var tO=function({editor:e,blockType:t,rootType:r,disabled:n=!1}){var l,a;let{i18n:i}=(0,eM.PCX)(),o=()=>{e.update(()=>{let e=(0,eu.vJ)();(0,eu.I2)(e)&&(0,eo.zI)(e,()=>(0,eu.lJ)())})},s=r=>{t!==r&&e.update(()=>{let e=(0,eu.vJ)();null!==e&&(0,eo.zI)(e,()=>(0,ei.fi)(r))})};return V.createElement(em.Ck,{disabled:n,buttonLabel:i.formatMessage({id:(null==(l=tN[t])?void 0:l.label)||"Block Format"}),buttonIcon:null==(a=tN[t])?void 0:a.icon,buttonAriaLabel:"Formatting options for text style"},V.createElement(em.Ho,{className:"item",onClick:o,selected:"paragraph"===t},V.createElement(tM,{icon:tN.paragraph.icon,label:i.formatMessage({id:tN.paragraph.label})})),V.createElement(em.Ho,{className:"item ",onClick:()=>s("h1"),selected:"h1"===t},V.createElement(tM,{icon:tN.h1.icon,label:i.formatMessage({id:tN.h1.label})})),V.createElement(em.Ho,{className:"item ",onClick:()=>s("h2"),selected:"h2"===t},V.createElement(tM,{icon:tN.h2.icon,label:i.formatMessage({id:tN.h2.label})})),V.createElement(em.Ho,{className:"item",onClick:()=>s("h3"),selected:"h3"===t},V.createElement(tM,{icon:tN.h3.icon,label:i.formatMessage({id:tN.h3.label})})),V.createElement(em.Ho,{className:"item ",onClick:()=>{"bullet"!==t?e.dispatchCommand(er.q7,void 0):o()},selected:"bullet"===t},V.createElement(tM,{icon:tN.bullet.icon,label:i.formatMessage({id:tN.bullet.label})})),V.createElement(em.Ho,{className:"item ",onClick:()=>{"number"!==t?e.dispatchCommand(er.x,void 0):o()},selected:"number"===t},V.createElement(tM,{icon:tN.number.icon,label:i.formatMessage({id:tN.number.label})})),V.createElement(em.Ho,{className:"item",onClick:()=>{"check"!==t?e.dispatchCommand(er.mJ,void 0):o()},selected:"check"===t},V.createElement(tM,{icon:tN.check.icon,label:i.formatMessage({id:tN.check.label})})))};function tz(){return(tz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tR=e=>V.createElement("svg",tz({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-left_svg__bi text-left_svg__bi-text-left"},e),z||(z=V.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})));function tL(){return(tL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tT=e=>V.createElement("svg",tL({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-right_svg__bi text-right_svg__bi-text-right"},e),R||(R=V.createElement("path",{fillRule:"evenodd",d:"M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})));function tD(){return(tD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tP=e=>V.createElement("svg",tD({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"text-center_svg__bi text-center_svg__bi-text-center"},e),L||(L=V.createElement("path",{fillRule:"evenodd",d:"M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})));function tF(){return(tF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var tW=e=>V.createElement("svg",tF({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"justify_svg__bi justify_svg__bi-justify"},e),T||(T=V.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})));let tH={center:{icon:V.createElement(tP,null),iconRTL:V.createElement(tP,null),label:"rich_text_editor_center_align",command:"center"},left:{icon:V.createElement(tR,null),iconRTL:V.createElement(tR,null),label:"rich_text_editor_left_align",command:"left"},right:{icon:V.createElement(tT,null),iconRTL:V.createElement(tT,null),label:"rich_text_editor_right_align",command:"right"},start:{icon:V.createElement(tR,null),iconRTL:V.createElement(tR,null),label:"rich_text_editor_start_align",command:"start"},justify:{icon:V.createElement(tW,null),iconRTL:V.createElement(tW,null),label:"rich_text_editor_justify_align",command:"justify"},end:{icon:V.createElement(tT,null),iconRTL:V.createElement(tT,null),label:"rich_text_editor_end_align",command:"end"}};var t$=function({editor:e,value:t,isRTL:r,disabled:n=!1}){let{i18n:l}=(0,eM.PCX)(),a=tH[t||"left"],i=Object.keys(tH);return V.createElement(em.Ck,{disabled:n,buttonLabel:l.formatMessage({id:(null==a?void 0:a.label)||"format"}),buttonIcon:r?null==a?void 0:a.iconRTL:null==a?void 0:a.icon,buttonAriaLabel:l.formatMessage({id:"rich_text_editor_format_text_align_description"})},i.map(n=>V.createElement(em.Ho,{key:n,onClick:()=>{e.dispatchCommand(eu.fU,tH[n].command)},className:"item ",selected:t===n},V.createElement(tM,{icon:r?tH[n].iconRTL:tH[n].icon,label:tH[n].label?l.formatMessage({id:tH[n].label}):""}))))};let tB="RichtextEditorToolbar",tI=(0,e2.Ay)(F.A,{name:tB,slot:"ToolbarWrapper"})(({theme:e})=>({display:"flex",flexFlow:"wrap",marginBottom:e.spacing(1),borderBottom:"1px dashed",borderBottomColor:"light"===e.palette.mode?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)","& > button":{marginRight:e.spacing(.5),marginBottom:e.spacing(.5)}})),tj={bullet:"Bulleted List",check:"Check List",code:"Code Block",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",number:"Numbered List",paragraph:"Normal",quote:"Quote"},tJ=function(){let e=[];for(let[t,r]of Object.entries(ee.mF))e.push([t,r]);return e}(),tV=[["Arial","Arial"],["Courier New","Courier New"],["Georgia","Georgia"],["Times New Roman","Times New Roman"],["Trebuchet MS","Trebuchet MS"],["Verdana","Verdana"]],tX=[["10px","10px"],["11px","11px"],["12px","12px"],["13px","13px"],["14px","14px"],["15px","15px"],["16px","16px"],["17px","17px"],["18px","18px"],["19px","19px"],["20px","20px"],["22px","22px"],["24px","24px"],["26px","26px"],["28px","28px"],["30px","30px"],["32px","32px"],["34px","34px"],["36px","36px"],["38px","38px"],["40px","40px"]],tK=(0,e2.Ay)(F.A,{name:tB,slot:"ToolbarWrapper"})(({theme:e})=>({display:"inline-flex",width:"1px",background:"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)",height:"24px",margin:"auto 4px"}));function tZ(){return V.createElement(tK,null)}function tY({editor:e,value:t,type:r,disabled:n=!1}){let l=(0,V.useCallback)(t=>{e.update(()=>{let e=(0,eu.vJ)();null!==e&&(0,eo.BJ)(e,{[r]:t})})},[e,r]),a="font-family"===r?"Formatting options for font family":"Formatting options for font size";return V.createElement(em.Ck,{disabled:n,buttonLabel:t,buttonAriaLabel:a,sxDropdownWrapper:{maxHeight:"300px",overflowY:"auto"}},("font-family"===r?tV:tX).map(([e,n])=>V.createElement(em.Ho,{className:`item  ${"font-size"===r?"fontsize-item":""}`,onClick:()=>l(e),key:e,selected:t===e},V.createElement("span",{className:"text"},n))))}function tU({setIsLinkEditMode:e}){let{i18n:t,useLoggedIn:r}=(0,eM.PCX)(),n=r(),[l]=(0,el.DF)(),[a,i]=(0,V.useState)(l),[o,s]=(0,V.useState)("paragraph"),[c,u]=(0,V.useState)("root"),[d,m]=(0,V.useState)(null),[h,p]=(0,V.useState)("15px"),[g,f]=(0,V.useState)("#000"),[_,b]=(0,V.useState)("#fff"),[v,E]=(0,V.useState)("left"),[w,x]=(0,V.useState)(!1),[y,C]=(0,V.useState)(!1),[k,S]=(0,V.useState)(!1),[A,M]=(0,V.useState)(!1),[N,O]=(0,V.useState)(!1),[z,R]=(0,V.useState)(!1),[L,T]=(0,V.useState)(!1),[P,W]=(0,V.useState)(!1),[H,$]=(0,V.useState)(!1),[B,I]=(0,ed.A)(),[j,J]=(0,V.useState)(!1),[X,K]=(0,V.useState)(""),[Z,Y]=(0,V.useState)(()=>l.isEditable()),U=(0,V.useCallback)(()=>{let e=(0,eu.vJ)();if((0,eu.I2)(e)){let t,r=e.anchor.getNode(),n="root"===r.getKey()?r:(0,ec.Bt)(r,e=>{let t=e.getParent();return null!==t&&(0,eu.Iq)(t)});null===n&&(n=r.getTopLevelElementOrThrow());let l=n.getKey(),i=a.getElementByKey(l);C(e.hasFormat("bold")),S(e.hasFormat("italic")),M(e.hasFormat("underline")),O(e.hasFormat("strikethrough")),R(e.hasFormat("subscript")),T(e.hasFormat("superscript")),J((0,eo.LP)(e));let o=(0,eh.OL)(e),c=o.getParent();(0,et.FJ)(c)||(0,et.FJ)(o)?x(!0):x(!1);let d=(0,ec.Bt)(o,es.TX);if((0,es.TX)(d)?u("table"):u("root"),null!==i)if(m(l),(0,er.HY)(n)){let e=(0,ec.eu)(r,er.v5);s(e?e.getListType():n.getListType())}else{let e=(0,ei.Pi)(n)?n.getTag():n.getType();if(e in tj&&s(e),(0,ee.a5)(n)){let e=n.getLanguage();K(e?ee.SD[e]||e:"");return}}p((0,eo.$S)(e,"font-size","15px")),f((0,eo.$S)(e,"color","#000")),b((0,eo.$S)(e,"background-color","#fff")),(0,et.FJ)(c)&&(t=(0,ec.Bt)(o,e=>(0,eu.ff)(e)&&!e.isInline())),E((0,eu.ff)(t)?t.getFormatType():(0,eu.ff)(o)?o.getFormatType():(null==c?void 0:c.getFormatType())||"left")}},[a]);(0,V.useEffect)(()=>l.registerCommand(eu.Mv,(e,t)=>(U(),i(t),!1),eu.d),[l,U]),(0,V.useEffect)(()=>(0,ec.Sd)(l.registerEditableListener(e=>{Y(e)}),a.registerUpdateListener(({editorState:e})=>{e.read(()=>{U()})}),a.registerCommand(eu.Kf,e=>(W(e),!1),eu.d),a.registerCommand(eu.WW,e=>($(e),!1),eu.d)),[U,a,l]),(0,V.useEffect)(()=>a.registerCommand(eu.cq,t=>{let{code:r,ctrlKey:n,metaKey:l}=t;if("KeyK"===r&&(n||l)){let r;return t.preventDefault(),w?(e(!1),r=null):(e(!0),r=(0,eh.Jf)("https://")),a.dispatchCommand(et.yW,r)}return!1},eu.Jj),[a,w,e]);let q=(0,V.useCallback)((e,t)=>{a.update(()=>{let t=(0,eu.vJ)();null!==t&&(0,eo.BJ)(t,e)},t?{tag:"historic"}:{})},[a]),G=(0,V.useCallback)(()=>{a.update(()=>{let e=(0,eu.vJ)();if((0,eu.I2)(e)){let t=e.anchor,r=e.focus,n=e.getNodes();if(t.key===r.key&&t.offset===r.offset)return;n.forEach((e,l)=>{if((0,eu.kF)(e)){let a=e;0===l&&0!==t.offset&&(a=a.splitText(t.offset)[1]||a),l===n.length-1&&(a=a.splitText(r.offset)[0]||a),""!==a.__style&&a.setStyle(""),0!==a.__format&&(a.setFormat(0),(0,ec.mB)(a).setFormat("")),e=a}else(0,ei.Pi)(e)||(0,ei.jd)(e)?e.replace((0,eu.lJ)(),!0):(0,ea.D)(e)&&e.setFormat("")})}})},[a]),Q=(0,V.useCallback)((e,t)=>{q({color:e},t)},[q]),ep=(0,V.useCallback)((e,t)=>{q({"background-color":e},t)},[q]),eg=(0,V.useCallback)(()=>{w?(e(!1),l.dispatchCommand(et.yW,null)):(e(!0),l.dispatchCommand(et.yW,(0,eh.Jf)("https://")))},[l,w]),ef=(0,V.useCallback)(e=>{a.update(()=>{if(null!==d){let t=(0,eu.ns)(d);(0,ee.a5)(t)&&t.setLanguage(e)}})},[a,d]);return V.createElement(tI,null,V.createElement("button",{disabled:!P||!Z,onClick:()=>{a.dispatchCommand(eu.ZK,void 0)},title:t.formatMessage({id:"rich_text_editor_undo"}),type:"button",className:"toolbar-item spaced","aria-label":"Undo"},V.createElement(tv,null)),V.createElement("button",{disabled:!H||!Z,onClick:()=>{a.dispatchCommand(eu.V3,void 0)},title:t.formatMessage({id:"rich_text_editor_redo"}),type:"button",className:"toolbar-item","aria-label":"Redo"},V.createElement(t_,null)),V.createElement(tZ,null),o in tj&&a===l&&V.createElement(V.Fragment,null,V.createElement(tO,{disabled:!Z,blockType:o,rootType:c,editor:l}),V.createElement(tZ,null)),"code"===o?V.createElement(em.Ck,{disabled:!Z,buttonClassName:"toolbar-item code-language",buttonLabel:(0,ee.$D)(X),buttonAriaLabel:"Select language"},tJ.map(([e,t])=>V.createElement(em.Ho,{className:"item",onClick:()=>ef(e),key:e,selected:e===X},V.createElement("span",{className:"text"},t)))):V.createElement(V.Fragment,null,V.createElement(t$,{disabled:!Z,value:v,editor:l,isRTL:j}),V.createElement(tY,{disabled:!Z,type:"font-size",value:h,editor:l}),V.createElement(tZ,null),V.createElement("button",{disabled:!Z,onClick:()=>{a.dispatchCommand(eu.mB,"bold")},className:`toolbar-item spaced ${y?"active":""}`,title:t.formatMessage({id:"rich_text_editor_bold"}),type:"button","aria-label":t.formatMessage({id:"rich_text_editor_bold"})},V.createElement(e6,null)),V.createElement("button",{disabled:!Z,onClick:()=>{a.dispatchCommand(eu.mB,"italic")},className:`toolbar-item spaced ${k?"active":""}`,title:t.formatMessage({id:"rich_text_editor_italic"}),type:"button","aria-label":t.formatMessage({id:"rich_text_editor_italic"})},V.createElement(e8,null)),V.createElement("button",{disabled:!Z,onClick:()=>{a.dispatchCommand(eu.mB,"underline")},className:`toolbar-item spaced ${A?"active":""}`,title:t.formatMessage({id:"rich_text_editor_underline"}),type:"button","aria-label":t.formatMessage({id:"rich_text_editor_underline"})},V.createElement(te,null)),V.createElement("button",{disabled:!Z,onClick:eg,className:`toolbar-item spaced ${w?"active":""}`,"aria-label":"Insert link",title:t.formatMessage({id:"rich_text_editor_insert_link"}),type:"button"},V.createElement(tt.A,null)),V.createElement(em.Zs,{disabled:!Z,buttonAriaLabel:t.formatMessage({id:"rich_text_editor_text_color"}),color:g,onChange:Q,title:t.formatMessage({id:"rich_text_editor_text_color"}),buttonIcon:V.createElement(tn,null)}),V.createElement(em.Zs,{disabled:!Z,buttonAriaLabel:t.formatMessage({id:"rich_text_editor_background_color"}),color:_,onChange:ep,title:t.formatMessage({id:"rich_text_editor_background_color"}),buttonIcon:V.createElement(ta,null)}),V.createElement(em.Ck,{disabled:!Z,buttonAriaLabel:"Formatting options for additional text styles",buttonIcon:V.createElement(to,null)},V.createElement(em.Ho,{onClick:()=>{a.dispatchCommand(eu.mB,"strikethrough")},className:"item ",title:t.formatMessage({id:"rich_text_editor_strikethrough"}),"aria-label":t.formatMessage({id:"rich_text_editor_strikethrough"}),selected:N},V.createElement(tc,null),V.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_strikethrough"}))),V.createElement(em.Ho,{onClick:()=>{a.dispatchCommand(eu.mB,"subscript")},className:"item ",title:t.formatMessage({id:"rich_text_editor_subscript"}),"aria-label":t.formatMessage({id:"rich_text_editor_subscript"}),selected:z},V.createElement(td,null),V.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_subscript"}))),V.createElement(em.Ho,{onClick:()=>{a.dispatchCommand(eu.mB,"superscript")},className:"item",title:t.formatMessage({id:"rich_text_editor_superscript"}),"aria-label":t.formatMessage({id:"rich_text_editor_superscript"}),selected:L},V.createElement(th,null),V.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_superscript"}))),V.createElement(em.Ho,{onClick:G,className:"item",title:t.formatMessage({id:"rich_text_editor_clear_formatting"}),"aria-label":t.formatMessage({id:"rich_text_editor_clear_formatting"})},V.createElement(tg,null),V.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_clear_formatting"})))),V.createElement(tZ,null),V.createElement(em.Ck,{disabled:!Z,buttonLabel:t.formatMessage({id:"rich_text_editor_insert"}),buttonAriaLabel:"Insert specialized editor node"},n?V.createElement(em.Ho,{onClick:()=>{I(t.formatMessage({id:"rich_text_editor_insert_image"}),e=>V.createElement(eG,{activeEditor:a,onClose:e}))},className:"item"},V.createElement(D.s4,{sx:{mr:1},icon:"ico-photo-o"}),V.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_image"}))):null,V.createElement(em.Ho,{onClick:()=>{I(t.formatMessage({id:"rich_text_editor_insert_table"}),e=>V.createElement(e3,{activeEditor:a,onClose:e}))},className:"item"},V.createElement(D.s4,{sx:{mr:1},icon:"ico-th-o"}),V.createElement("span",{className:"text"},t.formatMessage({id:"rich_text_editor_table"}))),eF.map(e=>V.createElement(em.Ho,{key:e.type,onClick:()=>{a.dispatchCommand(en.ot,e.type)},className:"item"},V.createElement(F.A,{component:"span",mr:1},e.icon),V.createElement("span",{className:"text"},t.formatMessage({id:(null==e?void 0:e.contentName)||"rich_text_editor_embed"})))))),B)}var tq=r(19934),tG=r(9498),tQ=r(28762),t0=r(13841);let t1=[(0,t0.o)(/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,e=>e.startsWith("http")?e:`https://${e}`),(0,t0.o)(/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,e=>`mailto:${e}`)];function t5(){return V.createElement(t0.p,{matchers:t1})}var t2=r(49367),t3=r(8143),t4=r(36694),t6=r(86725);let t7=(0,e2.Ay)(F.A,{name:"RichtextEditorLinkEdit",slot:"Wrapper"})(({theme:e})=>({display:"flex",alignItems:"center",position:"absolute",top:0,left:0,zIndex:10,opacity:0,boxShadow:e.shadows[1],borderRadius:e.shape.borderRadius,transition:"opacity 0.5s",willChange:"transform",background:e.palette.background.paper}));function t8({editor:e,isLink:t,setIsLink:r,anchorElem:n,isLinkEditMode:l,setIsLinkEditMode:a}){let i=(0,V.useRef)(null),o=(0,V.useRef)(null),[s,c]=(0,V.useState)(""),[u,d]=(0,V.useState)("https://"),[m,h]=(0,V.useState)(null),p=(0,V.useCallback)(()=>{let t=(0,eu.vJ)();if((0,eu.I2)(t)){let e=(0,eh.OL)(t),r=(0,ec.Bt)(e,et.FJ);r?c(r.getURL()):(0,et.FJ)(e)?c(e.getURL()):c(""),l&&d(s)}let r=i.current,o=window.getSelection(),u=document.activeElement;if(null===r)return;let m=e.getRootElement();if(null!==t&&null!==o&&null!==m&&m.contains(o.anchorNode)&&e.isEditable()){var p,g;let e=null==(g=o.focusNode)||null==(p=g.parentElement)?void 0:p.getBoundingClientRect();e&&(e.y+=40,(0,eh.LR)(e,r,n)),h(t)}else u&&"link-input"===u.className||(null!==m&&(0,eh.LR)(null,r,n),h(null),a(!1),c(""));return!0},[n,e,a,l,s]);(0,V.useEffect)(()=>{let t=n.parentElement,r=()=>{e.getEditorState().read(()=>{p()})};return window.addEventListener("resize",r),t&&t.addEventListener("scroll",r),()=>{window.removeEventListener("resize",r),t&&t.removeEventListener("scroll",r)}},[n.parentElement,e,p]),(0,V.useEffect)(()=>(0,ec.Sd)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{p()})}),e.registerCommand(eu.Mv,()=>(p(),!0),eu.Ac),e.registerCommand(eu.Q$,()=>!!t&&(r(!1),!0),eu.Wg)),[e,p,r,t]),(0,V.useEffect)(()=>{e.getEditorState().read(()=>{p()})},[e,p]),(0,V.useEffect)(()=>{l&&o.current&&o.current.focus()},[l,t]);let g=()=>{null!==m&&(""!==s&&e.dispatchCommand(et.yW,(0,eh.Jf)(u)),d("https://"),a(!1))};return V.createElement(t7,{ref:i},t?l?V.createElement(F.A,{p:1,sx:{width:"320px",display:"flex",alignItems:"center"}},V.createElement(F.A,{mr:1,sx:{flex:1,minWidth:0}},V.createElement(t4.A,{fullWidth:!0,ref:o,className:"link-input",value:u,onChange:e=>{d(e.target.value)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),g()):"Escape"===e.key&&(e.preventDefault(),a(!1))},size:"small"})),V.createElement(t6.A,{size:"small",role:"button",onClick:e=>{e.preventDefault(),a(!1)}},V.createElement(D.s4,{icon:"ico-close"})),V.createElement(t6.A,{size:"small",role:"button",onClick:e=>{e.preventDefault(),g()}},V.createElement(D.s4,{icon:"ico-check"}))):V.createElement(F.A,{sx:{display:"flex",width:"320px",alignItems:"center"},p:1},V.createElement(F.A,{sx:{flex:1,minWidth:0}},V.createElement("a",{href:(0,eh.Jf)(s),target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",width:"auto",maxWidth:"100%"}},V.createElement(D.mE,{variant:"body2",lines:1},s))),V.createElement(t6.A,{size:"small",role:"button",onClick:e=>{e.preventDefault(),d(s),a(!0)}},V.createElement(D.s4,{icon:"ico-pencilline-o"})),V.createElement(t6.A,{size:"small",role:"button",onClick:t=>{t.preventDefault(),e.dispatchCommand(et.yW,null)}},V.createElement(D.s4,{icon:"ico-trash-o"}))):null)}function t9({anchorElem:e=document.body,isLinkEditMode:t,setIsLinkEditMode:r}){let[n]=(0,el.DF)(),[l,a]=(0,V.useState)(n),[i,o]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{function e(){let e=(0,eu.vJ)();if((0,eu.I2)(e)){let t=(0,eh.OL)(e),r=(0,ec.Bt)(t,et.FJ),n=(0,ec.Bt)(t,et.iK);null!==r&&null===n?o(!0):o(!1)}}return(0,ec.Sd)(n.registerUpdateListener(({editorState:t})=>{t.read(()=>{e()})}),n.registerCommand(eu.Mv,(t,r)=>(e(),a(r),!1),eu.d),n.registerCommand(eu.d8,e=>{let t=(0,eu.vJ)();if((0,eu.I2)(t)){let r=(0,eh.OL)(t),n=(0,ec.Bt)(r,et.FJ);if((0,et.FJ)(n)&&(e.metaKey||e.ctrlKey))return window.open(n.getURL(),"_blank"),!0}return!1},eu.Ac))},[n]),(0,t3.createPortal)(V.createElement(t8,{editor:l,isLink:i,anchorElem:e,setIsLink:o,isLinkEditMode:t,setIsLinkEditMode:r}),e)}var re=r(1161);let rt=(0,e2.Ay)(F.A,{name:"RichtextEditor",slot:"FloatTextContainer"})(({theme:e})=>({display:"flex",padding:e.spacing(.5),verticalAlign:"middle",position:"absolute",top:0,left:0,zIndex:10,opacity:0,boxShadow:e.shadows[1],background:(0,re.a)(e.palette.background.default,.1),borderRadius:e.shape.borderRadius,transition:"opacity 0.5s",willChange:"transform"}));function rr({editor:e,anchorElem:t,isLink:r,isBold:n,isItalic:l,isUnderline:a,isCode:i,isStrikethrough:o,isSubscript:s,isSuperscript:c}){let u=(0,V.useRef)(null),d=(0,V.useCallback)(()=>{r?e.dispatchCommand(et.yW,null):e.dispatchCommand(et.yW,"https://")},[e,r]);function m(e){if((null==u?void 0:u.current)&&(1===e.buttons||3===e.buttons)&&"none"!==u.current.style.pointerEvents){let t=e.clientX,r=e.clientY,n=document.elementFromPoint(t,r);u.current.contains(n)||(u.current.style.pointerEvents="none")}}function h(e){(null==u?void 0:u.current)&&"auto"!==u.current.style.pointerEvents&&(u.current.style.pointerEvents="auto")}(0,V.useEffect)(()=>{if(null==u?void 0:u.current)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h)}},[u]);let p=(0,V.useCallback)(()=>{let n=(0,eu.vJ)(),l=u.current,a=window.getSelection();if(null===l)return;let i=e.getRootElement();if(null!==n&&null!==a&&!a.isCollapsed&&null!==i&&i.contains(a.anchorNode)){let e=(0,eh.OW)(a,i);(0,eh.bB)(e,l,t,r)}},[e,t,r]);return(0,V.useEffect)(()=>{let r=t.parentElement,n=()=>{e.getEditorState().read(()=>{p()})};return window.addEventListener("resize",n),r&&r.addEventListener("scroll",n),()=>{window.removeEventListener("resize",n),r&&r.removeEventListener("scroll",n)}},[e,p,t]),(0,V.useEffect)(()=>(e.getEditorState().read(()=>{p()}),(0,ec.Sd)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{p()})}),e.registerCommand(eu.Mv,()=>(p(),!1),eu.Ac))),[e,p]),V.createElement(rt,{ref:u,className:"floating-text-format-popup"},e.isEditable()&&V.createElement(V.Fragment,null,V.createElement(t6.A,{type:"button",onClick:()=>{e.dispatchCommand(eu.mB,"bold")},className:`popup-item spaced ${n?"active":""}`,"aria-label":"Format text as bold"},V.createElement(e6,null)),V.createElement(t6.A,{type:"button",onClick:()=>{e.dispatchCommand(eu.mB,"italic")},className:`popup-item spaced ${l?"active":""}`,"aria-label":"Format text as italics"},V.createElement(e8,null)),V.createElement(t6.A,{type:"button",onClick:()=>{e.dispatchCommand(eu.mB,"underline")},className:`popup-item spaced ${a?"active":""}`,"aria-label":"Format text to underlined"},V.createElement(te,null)),V.createElement(t6.A,{type:"button",onClick:()=>{e.dispatchCommand(eu.mB,"strikethrough")},className:`popup-item spaced ${o?"active":""}`,"aria-label":"Format text with a strikethrough"},V.createElement(tc,null)),V.createElement(t6.A,{type:"button",onClick:()=>{e.dispatchCommand(eu.mB,"subscript")},className:`popup-item spaced ${s?"active":""}`,title:"Subscript","aria-label":"Format Subscript"},V.createElement(td,null)),V.createElement(t6.A,{type:"button",onClick:()=>{e.dispatchCommand(eu.mB,"superscript")},className:`popup-item spaced ${c?"active":""}`,title:"Superscript","aria-label":"Format Superscript"},V.createElement(th,null)),V.createElement(t6.A,{type:"button",onClick:d,className:`popup-item spaced ${r?"active":""}`,"aria-label":"Insert link"},V.createElement(tt.A,null))))}function rn({anchorElem:e=document.body}){let[t]=(0,el.DF)();return function(e,t){let[r,n]=(0,V.useState)(!1),[l,a]=(0,V.useState)(!1),[i,o]=(0,V.useState)(!1),[s,c]=(0,V.useState)(!1),[u,d]=(0,V.useState)(!1),[m,h]=(0,V.useState)(!1),[p,g]=(0,V.useState)(!1),[f,_]=(0,V.useState)(!1),[b,v]=(0,V.useState)(!1),E=(0,V.useCallback)(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;let t=(0,eu.vJ)(),r=window.getSelection(),l=e.getRootElement();if(null!==r&&(!(0,eu.I2)(t)||null===l||!l.contains(r.anchorNode)))return void n(!1);if(!(0,eu.I2)(t))return;let i=(0,eh.OL)(t);o(t.hasFormat("bold")),c(t.hasFormat("italic")),d(t.hasFormat("underline")),h(t.hasFormat("strikethrough")),g(t.hasFormat("subscript")),_(t.hasFormat("superscript")),v(t.hasFormat("code"));let s=i.getParent();(0,et.FJ)(s)||(0,et.FJ)(i)?a(!0):a(!1),(0,ee.yN)(t.anchor.getNode())||""===t.getTextContent()?n(!1):n((0,eu.kF)(i)||(0,eu.bS)(i));let u=t.getTextContent().replace(/\n/g,"");if(!t.isCollapsed()&&""===u)return void n(!1)})},[e]);return((0,V.useEffect)(()=>(document.addEventListener("selectionchange",E),()=>{document.removeEventListener("selectionchange",E)}),[E]),(0,V.useEffect)(()=>(0,ec.Sd)(e.registerUpdateListener(()=>{E()}),e.registerRootListener(()=>{null===e.getRootElement()&&n(!1)})),[e,E]),r)?(0,t3.createPortal)(V.createElement(rr,{editor:e,anchorElem:t,isLink:l,isBold:i,isItalic:s,isStrikethrough:m,isSubscript:p,isSuperscript:f,isUnderline:u,isCode:b}),t):null}(t,e)}var rl=r(85885),ra=r(65801);let ri=(0,e2.Ay)(F.A,{name:"RichTextEditorViewer",slot:"viewer",shouldForwardProp:e=>"mt"!==e})(({theme:e,mt:t=2})=>({marginTop:e.spacing(t),whiteSpace:"pre-wrap",p:{margin:0}}));function ro({children:e,...t}){return V.createElement(ri,t,e)}var rs=r(60114),rc=r(45888),ru=r(23173),rd=r(59042),rm=r(89847);class rh extends eu.fG{static getType(){return"layout-container"}static clone(e){return new rh(e.__templateColumns,e.__key)}createDOM(e){let t=document.createElement("div");return t.style.gridTemplateColumns=this.__templateColumns,"string"==typeof e.theme.layoutContainer&&(0,ec.ZB)(t,e.theme.layoutContainer),t}updateDOM(e,t){return e.__templateColumns!==this.__templateColumns&&(t.style.gridTemplateColumns=this.__templateColumns),!1}static importDOM(){return{}}static importJSON(e){return new rh(e.templateColumns)}canBeEmpty(){return!1}exportJSON(){return{...super.exportJSON(),templateColumns:this.__templateColumns,type:"layout-container",version:1}}getTemplateColumns(){return this.getLatest().__templateColumns}setTemplateColumns(e){this.getWritable().__templateColumns=e}constructor(e,t){super(t),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"__templateColumns",void 0),this.__templateColumns=e}}class rp extends eu.fG{static getType(){return"layout-item"}static clone(e){return new rp(e.__key)}createDOM(e){let t=document.createElement("div");return"string"==typeof e.theme.layoutItem&&(0,ec.ZB)(t,e.theme.layoutItem),t}updateDOM(){return!1}static importDOM(){return{}}static importJSON(){return new rp}isShadowRoot(){return!0}exportJSON(){return{...super.exportJSON(),type:"layout-item",version:1}}}function rg(e){let t=e.textContent;return null!==t?{node:r_(t)}:null}class rf extends eu.Ey{static getType(){return"mention"}static clone(e){return new rf(e.__mention,e.__text,e.__key)}static importJSON(e){let t=r_(e.mentionName);return t.setTextContent(e.text),t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),mentionName:this.__mention,type:"mention",version:1}}createDOM(e){let t=super.createDOM(e);return t.style.cssText="background-color: rgba(24, 119, 232, 0.2)",t.className="mention",t}exportDOM(){let e=document.createElement("span");return e.setAttribute("data-lexical-mention","true"),e.textContent=this.__text,{element:e}}static importDOM(){return{span:e=>e.hasAttribute("data-lexical-mention")?{conversion:rg,priority:1}:null}}isTextEntity(){return!0}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}constructor(e,t,r){super(null!=t?t:e,r),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"__mention",void 0),this.__mention=e}}function r_(e){let t=new rf(e);return t.setMode("segmented").toggleDirectionless(),(0,eu.pT)(t)}class rb extends eu.Ey{static getType(){return"extended-text"}static clone(e){return new rb(e.__text,e.__key)}static importDOM(){let e=eu.Ey.importDOM();return{...e,code:()=>({conversion:rv(null==e?void 0:e.code),priority:1}),em:()=>({conversion:rv(null==e?void 0:e.em),priority:1}),span:()=>({conversion:rv(null==e?void 0:e.span),priority:1}),u:()=>({conversion:rv(null==e?void 0:e.u),priority:1}),i:()=>({conversion:rv(null==e?void 0:e.i),priority:1}),strong:()=>({conversion:rv(null==e?void 0:e.strong),priority:1}),sub:()=>({conversion:rv(null==e?void 0:e.sub),priority:1}),sup:()=>({conversion:rv(null==e?void 0:e.sup),priority:1})}}static importJSON(e){return eu.Ey.importJSON(e)}isSimpleText(){return("text"===this.__type||"extended-text"===this.__type)&&0===this.__mode}exportJSON(){return{...super.exportJSON(),type:"extended-text",version:1}}constructor(e,t){super(e,t)}}function rv(e){return t=>{let r=null==e?void 0:e(t);if(!r)return null;let n=r.conversion(t);if(!n)return n;let l=t.style.backgroundColor,a=t.style.color,i=t.style.fontFamily,o=t.style.fontWeight,s=t.style.fontSize,c=t.style.textDecoration;return{...n,forChild:(e,t)=>{var r;let u=(null!=(r=null==n?void 0:n.forChild)?r:e=>e)(e,t);if((0,eu.kF)(u)){let e=[l?`background-color: ${l}`:null,a?`color: ${a}`:null,i?`font-family: ${i}`:null,o?`font-weight: ${o}`:null,s?`font-size: ${s}`:null,c?`text-decoration: ${c}`:null].filter(e=>null!=e).join("; ");if(e.length)return u.setStyle(e)}return u}}}}function rE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let rw=/^(\d+(?:\.\d+)?)px$/;class rx extends es.B9{static getType(){return"customtablecell"}static clone(e){let t=new rx(e.__headerState,e.__colSpan,e.__width,e.__key);return t.__rowSpan=e.__rowSpan,t.__backgroundColor=e.__backgroundColor,t}static importDOM(){return{td:e=>({conversion:ry,priority:0}),th:e=>({conversion:ry,priority:0})}}static importJSON(e){let t=e.colSpan||1,r=e.rowSpan||1,n=rC(e.headerState,t,e.width||void 0);return n.__rowSpan=r,n.__backgroundColor=e.backgroundColor||null,n}createDOM(e){let t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(t.style.backgroundColor=this.__backgroundColor),(0,ec.ZB)(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){let{element:t}=super.exportDOM(e);if(t){t.style.border="1px solid",this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),t.style.width=`${this.getWidth()||"75"}px`,t.style.verticalAlign="top",t.style.textAlign="start";let e=this.getBackgroundColor();null!==e?t.style.backgroundColor=e:this.hasHeader()&&(t.style.backgroundColor="#828080")}return{element:t}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,type:"customtablecell",width:this.getWidth()}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e){return this.getWritable().__headerState=e,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){return this.getWritable().__width=e,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){this.getWritable().__backgroundColor=e}toggleHeaderStyle(e){let t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return 0!==this.getLatest().__headerState}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}constructor(e=0,t=1,r,n){super(n),rE(this,"__colSpan",void 0),rE(this,"__rowSpan",void 0),rE(this,"__headerState",void 0),rE(this,"__width",void 0),rE(this,"__backgroundColor",void 0),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=r,this.__backgroundColor=null}}function ry(e){let t,r=e.nodeName.toLowerCase();rw.test(e.style.width)&&(t=parseFloat(e.style.width));let n=rC(1*("th"===r),e.colSpan,t);n.__rowSpan=e.rowSpan;let l=e.style.backgroundColor;return""!==l&&(n.__backgroundColor=l),{forChild:(e,t)=>{if(t instanceof rx&&!(0,eu.ff)(e)){let t=(0,eu.lJ)();return(0,eu.wH)(e)&&"\n"===e.getTextContent()?null:(t.append(e),t)}return e},node:n}}function rC(e,t=1,r){return(0,eu.pT)(new rx(e,t,r))}let rk=[ei.jL,er.v5,er.YW,ei.dJ,es.HA,rx,{replace:es.B9,with:e=>new rx},es.py,rc.ZZ,et.k_,et.Db,rd.Vd,eB.K1,rf,rm.fS,eb,eL,eC,ru.y6,rh,rp,rb,{replace:eu.Ey,with:e=>new rb(e.__text)}];var rS=r(87500),rA=r(39489);function rM(e){let{icon:t,active:r,disabled:n,children:l,label:a,isMenuOpen:i,setIsMenuOpen:o}=e,s=V.useRef(),c=()=>o(!1);return V.createElement(V.Fragment,null,V.createElement(t6.A,{"aria-label":a,size:"small",onClick:()=>o(e=>!e),role:"button",disabled:n,selected:r,ref:s,sx:{width:"24px",height:"24px",fontSize:"12px"}},V.createElement(D.s4,{icon:t})),V.createElement(rA.Ay,{anchorEl:s.current,open:i,onClose:c},V.createElement(D.nt.Provider,{value:{closePopover:c}},l)))}var rN=r(97276);function rO(e){let t=e.getShape();return{columns:t.toX-t.fromX+1,rows:t.toY-t.fromY+1}}function rz(e){if(1!==e.getChildrenSize())return!1;let t=e.getFirstChildOrThrow();return!!(0,eu.bS)(t)&&!!t.isEmpty()}function rR(e){return e.getEditorState().read(()=>{let e=(0,eu.vJ)();if((0,eu.I2)(e)||(0,es.Ln)(e)){let[t]=(0,es.be)(e.anchor);if((0,es.Xx)(t))return t.getBackgroundColor()}return null})}function rL({onClose:e,tableCellNode:t,setIsMenuOpen:r,contextRef:n,cellMerge:l,showColorPickerModal:a}){let{i18n:i}=(0,eM.PCX)(),[o]=(0,el.DF)(),s=(0,V.useRef)(null),[c,u]=(0,V.useState)(t),[d,m]=(0,V.useState)({columns:1,rows:1}),[h,p]=(0,V.useState)(!1),[g,f]=(0,V.useState)(!1),[_,b]=(0,V.useState)(()=>rR(o)||"");(0,V.useEffect)(()=>o.registerMutationListener(rx,e=>{"updated"===e.get(c.getKey())&&(o.getEditorState().read(()=>{u(c.getLatest())}),b(rR(o)||""))}),[o,c]),(0,V.useEffect)(()=>{o.getEditorState().read(()=>{let e=(0,eu.vJ)();if((0,es.Ln)(e)){let t=rO(e);m(rO(e)),p(function(e){let t=e.getNodes(),r=[],n=null,l=null,a=0;for(let e=0;e<t.length;e++){let i=t[e];if((0,es.Xx)(i)){let e=i.getParentOrThrow();if((0,eh.V1)((0,es.RN)(e),"Expected CellNode to have a RowNode parent"),n!==e){if(null!==l&&a!==l)return!1;null!==n&&(l=a),n=e,a=0}let t=i.__colSpan;for(let e=0;e<t;e++)void 0===r[a+e]&&(r[a+e]=0),r[a+e]+=i.__rowSpan;a+=t}}return(null===l||a===l)&&r.every(e=>e===r[0])}(e)&&(t.columns>1||t.rows>1))}f(function(){let e=(0,eu.vJ)();if((0,eu.I2)(e)&&!e.isCollapsed()||(0,es.Ln)(e)&&!e.anchor.is(e.focus)||!(0,eu.I2)(e)&&!(0,es.Ln)(e))return!1;let[t]=(0,es.be)(e.anchor);return t.__colSpan>1||t.__rowSpan>1}())})},[o]),(0,V.useEffect)(()=>{let e=n.current,t=s.current,r=o.getRootElement();if(null!=e&&null!=t&&null!=r){let n=r.getBoundingClientRect(),l=e.getBoundingClientRect();t.style.opacity="1";let a=t.getBoundingClientRect(),i=l.right+5;if(i+a.width>window.innerWidth||i+a.width>n.right){let e=l.left-a.width-5;i=(e<0?5:e)+window.pageXOffset}t.style.left=`${i+window.pageXOffset}px`;let o=l.top;if(o+a.height>window.innerHeight){let e=l.bottom-a.height;o=(e<0?5:e)+window.pageYOffset}t.style.top=`${o+ +window.pageYOffset}px`}},[n,s,o]),(0,V.useEffect)(()=>{function e(e){null==s.current||null==n.current||s.current.contains(e.target)||n.current.contains(e.target)||r(!1)}return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[r,n]);let v=(0,V.useCallback)(()=>{o.update(()=>{if(c.isAttached()){let e=(0,es.sJ)(c),t=o.getElementByKey(e.getKey());if(!t)throw Error("Expected to find tableElement in DOM");let r=(0,es.xp)(t);null!==r&&r.clearHighlight(),e.markDirty(),u(c.getLatest())}(0,eu.Ni)().selectStart()})},[o,c]),E=(0,V.useCallback)(t=>{o.update(()=>{(0,es.kC)(t),e()})},[o,e]),w=(0,V.useCallback)(t=>{o.update(()=>{for(let e=0;e<d.columns;e++)(0,es.O8)(t);e()})},[o,e,d.columns]),x=(0,V.useCallback)(()=>{o.update(()=>{(0,es.kN)(),e()})},[o,e]),y=(0,V.useCallback)(()=>{o.update(()=>{(0,es.sJ)(c).remove(),v(),e()})},[o,c,v,e]),C=(0,V.useCallback)(()=>{o.update(()=>{(0,es.ex)(),e()})},[o,e]),k=(0,V.useCallback)(()=>{o.update(()=>{let t=(0,es.sJ)(c),r=(0,es.pA)(c),n=t.getChildren();if(r>=n.length||r<0)throw Error("Expected table cell to be inside of table row.");let l=n[r];if(!(0,es.RN)(l))throw Error("Expected table row");l.getChildren().forEach(e=>{if(!(0,es.Xx)(e))throw Error("Expected table cell");e.toggleHeaderStyle(es.o5.ROW)}),v(),e()})},[o,c,v,e]),S=(0,V.useCallback)(()=>{o.update(()=>{let t=(0,es.sJ)(c),r=(0,es.Ze)(c),n=t.getChildren();if(r>=Math.max(...n.map(e=>e.getChildren().length))||r<0)throw Error("Expected table cell to be inside of table row.");for(let e=0;e<n.length;e++){let t=n[e];if(!(0,es.RN)(t))throw Error("Expected table row");let l=t.getChildren();if(r>=l.length)continue;let a=l[r];if(!(0,es.Xx)(a))throw Error("Expected table cell");a.toggleHeaderStyle(es.o5.COLUMN)}v(),e()})},[o,c,v,e]),A=(0,V.useCallback)(e=>{o.update(()=>{let t=(0,eu.vJ)();if((0,eu.I2)(t)||(0,es.Ln)(t)){let[r]=(0,es.be)(t.anchor);if((0,es.Xx)(r)&&r.setBackgroundColor(e),(0,es.Ln)(t)){let r=t.getNodes();for(let t=0;t<r.length;t++){let n=r[t];(0,es.Xx)(n)&&n.setBackgroundColor(e)}}}})},[o]),M=null;return l&&(h?M=V.createElement(rN.A,{className:"item",onClick:()=>void o.update(()=>{let t=(0,eu.vJ)();if((0,es.Ln)(t)){let{columns:r,rows:n}=rO(t),l=t.getNodes(),a=null;for(let e=0;e<l.length;e++){let t=l[e];if((0,es.Xx)(t))if(null===a){let e;t.setColSpan(r).setRowSpan(n),a=t,rz(t)&&(0,eu.bS)(e=t.getFirstChild())&&e.remove()}else(0,es.Xx)(a)&&(rz(t)||a.append(...t.getChildren()),t.remove())}if(null!==a){0===a.getChildrenSize()&&a.append((0,eu.lJ)());let e=a.getLastDescendant();(0,eu.kF)(e)?e.select():(0,eu.ff)(e)?e.selectEnd():null!==e&&e.selectNext()}e()}}),"data-test-id":"table-merge-cells"},i.formatMessage({id:"rich_text_editor_merge_cells"})):g&&(M=V.createElement(rN.A,{className:"item",onClick:()=>void o.update(()=>{(0,es.GA)()}),"data-test-id":"table-unmerge-cells"},i.formatMessage({id:"rich_text_editor_unmerge_cells"})))),V.createElement(F.A,null,M,V.createElement(rN.A,{className:"item",onClick:()=>a(i.formatMessage({id:"rich_text_editor_cell_background_color"}),()=>V.createElement(em.sk,{color:_,onChange:A})),"data-test-id":"table-background-color"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_background_color"}))),V.createElement("hr",null),V.createElement(rN.A,{className:"item",onClick:()=>E(!1),"data-test-id":"table-insert-row-above"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_row_above"},{value:d.rows}))),V.createElement(rN.A,{className:"item",onClick:()=>E(!0),"data-test-id":"table-insert-row-below"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_row_below"},{value:d.rows}))),V.createElement("hr",null),V.createElement(rN.A,{className:"item",onClick:()=>w(!1),"data-test-id":"table-insert-column-before"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_column_left"},{value:d.rows}))),V.createElement(rN.A,{className:"item",onClick:()=>w(!0),"data-test-id":"table-insert-column-after"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_insert_value_column_right"},{value:d.rows}))),V.createElement("hr",null),V.createElement(rN.A,{className:"item",onClick:()=>C(),"data-test-id":"table-delete-columns"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_delete_column"}))),V.createElement(rN.A,{className:"item",onClick:()=>x(),"data-test-id":"table-delete-rows"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_delete_row"}))),V.createElement(rN.A,{className:"item",onClick:()=>y(),"data-test-id":"table-delete"},V.createElement("span",{className:"text"},i.formatMessage({id:"rich_text_editor_delete_table"}))),V.createElement("hr",null),V.createElement(rN.A,{className:"item",onClick:()=>k()},V.createElement("span",{className:"text"},i.formatMessage({id:(c.__headerState&es.o5.ROW)===es.o5.ROW?"rich_text_editor_remove_row_header_table":"rich_text_editor_add_row_header_table"}))),V.createElement(rN.A,{className:"item",onClick:()=>S(),"data-test-id":"table-column-header"},V.createElement("span",{className:"text"},i.formatMessage({id:(c.__headerState&es.o5.COLUMN)===es.o5.COLUMN?"rich_text_editor_remove_column_header_table":"rich_text_editor_add_column_header_table"}))))}function rT({anchorElem:e,cellMerge:t}){let[r]=(0,el.DF)(),n=(0,V.useRef)(null),l=(0,V.useRef)(null),[a,i]=(0,V.useState)(!1),[o,s]=(0,V.useState)(null),[c,u]=(0,ed.A)(),d=(0,V.useCallback)(()=>{let e=n.current,t=(0,eu.vJ)(),l=window.getSelection(),a=document.activeElement;if(null==t||null==e)return void s(null);let i=r.getRootElement();if((0,eu.I2)(t)&&null!==i&&null!==l&&i.contains(l.anchorNode)){let e=(0,es.zp)(t.anchor.getNode());if(null==e||null==r.getElementByKey(e.getKey()))return void s(null);s(e)}else a||s(null)},[r]);(0,V.useEffect)(()=>r.registerUpdateListener(()=>{r.getEditorState().read(()=>{d()})})),(0,V.useEffect)(()=>{let t=n.current;if(null!=t&&null!=o){let n=r.getElementByKey(o.getKey());if(null!=n){let r=n.getBoundingClientRect(),l=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=r.top-a.top+4,o=r.right-l.width-10-a.left;t.style.opacity="1",t.style.transform=`translate(${o}px, ${i}px)`}else t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)"}},[n,o,r,e]);let m=(0,V.useRef)(o);return(0,V.useEffect)(()=>{m.current!==o&&i(!1),m.current=o},[m,o]),V.createElement("div",{className:"table-cell-action-button-container",ref:n},null!=o&&V.createElement(V.Fragment,null,V.createElement(rM,{icon:"ico-angle-down",setIsMenuOpen:i,isMenuOpen:a},V.createElement(rL,{contextRef:l,setIsMenuOpen:i,isMenuOpen:a,onClose:()=>i(!1),tableCellNode:o,cellMerge:t,showColorPickerModal:u})),c))}function rD({anchorElem:e=document.body,cellMerge:t=!1}){let r=(0,rS.A)();return(0,t3.createPortal)(r?V.createElement(rT,{anchorElem:e,cellMerge:t}):null,e)}function rP({editor:e}){let t=(0,V.useRef)(null),r=(0,V.useRef)(null),n=(0,V.useRef)(null),l=(0,V.useRef)(null),[a,i]=(0,V.useState)(null),[o,s]=(0,V.useState)(null),[c,u]=(0,V.useState)(!1),[d,m]=(0,V.useState)(null);(0,V.useEffect)(()=>e.registerCommand(eu.Mv,e=>{let t=(0,eu.vJ)(),r=(0,es.Ln)(t);return c!==r&&u(r),!1},eu.Wg));let h=(0,V.useCallback)(()=>{s(null),t.current=null,m(null),l.current=null,n.current=null},[]);(0,V.useEffect)(()=>{let l=l=>{setTimeout(()=>{let a=l.target;if(d)return void i({x:l.clientX,y:l.clientY});if(!(r.current&&r.current.contains(a))&&t.current!==a){t.current=a;let r=(0,es.cn)(a);r&&o!==r?e.update(()=>{let l=(0,eu.xL)(r.elem);if(!l)throw Error("TableCellResizer: Table cell node not found.");let i=(0,es.sJ)(l),o=e.getElementByKey(i.getKey());if(!o)throw Error("TableCellResizer: Table element not found.");t.current=a,n.current=o.getBoundingClientRect(),s(r)}):null==r&&h()}},0)};return document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousemove",l)}},[o,d,e,h]);let p=(0,V.useCallback)(t=>{if(!o)throw Error("TableCellResizer: Expected active cell.");e.update(()=>{let e=(0,eu.xL)(o.elem);if(!(0,es.Xx)(e))throw Error("TableCellResizer: Table cell node not found.");let r=(0,es.sJ)(e),n=(0,es.pA)(e),l=r.getChildren();if(n>=l.length||n<0)throw Error("Expected table cell to be inside of table row.");let a=l[n];if(!(0,es.RN)(a))throw Error("Expected table row");a.setHeight(t)})},[o,e]),g=(0,V.useCallback)(t=>{if(!o)throw Error("TableCellResizer: Expected active cell.");e.update(()=>{let e=(0,eu.xL)(o.elem);if(!(0,es.Xx)(e))throw Error("TableCellResizer: Table cell node not found.");let r=(0,es.sJ)(e),n=(0,es.Ze)(e),l=r.getChildren();for(let e=0;e<l.length;e++){let r=l[e];if(!(0,es.RN)(r))throw Error("Expected table row");let a=r.getChildren(),i=a.map(e=>e.getColSpan()).reduce((e,t)=>{var r;let n=null!=(r=e[e.length-1])?r:0;return e.push(n+t),e},[]).findIndex(e=>e>n);if(i>=a.length||i<0)throw Error("Expected table cell to be inside of table row.");let o=a[i];if(!(0,es.Xx)(o))throw Error("Expected table cell");o.setWidth(t)}})},[o,e]),f=(0,V.useCallback)(e=>{let t=r=>{if(r.preventDefault(),r.stopPropagation(),!o)throw Error("TableCellResizer: Expected active cell.");if(l.current){let{x:n,y:a}=l.current;if(null===o)return;if("bottom"===e){let t=o.elem.getBoundingClientRect().height,n=Math.abs(r.clientY-a);p(Math.max("bottom"===e&&a>r.clientY?t-n:n+t,33))}else{let t=getComputedStyle(o.elem),l=o.elem.clientWidth;l-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);let a=Math.abs(r.clientX-n);g(Math.max("right"===e&&n>r.clientX?l-a:a+l,50))}h(),document.removeEventListener("mouseup",t)}};return t},[o,h,g,p]),_=(0,V.useCallback)(e=>t=>{if(t.preventDefault(),t.stopPropagation(),!o)throw Error("TableCellResizer: Expected active cell.");l.current={x:t.clientX,y:t.clientY},i(l.current),m(e),document.addEventListener("mouseup",f(e))},[o,f]),b=(0,V.useCallback)(()=>{if(o){let{height:e,width:t,top:r,left:l}=o.elem.getBoundingClientRect(),i={bottom:{backgroundColor:"none",cursor:"row-resize",height:"10px",left:`${window.pageXOffset+l}px`,top:`${window.pageYOffset+r+e}px`,width:`${t}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${e}px`,left:`${window.pageXOffset+l+t}px`,top:`${window.pageYOffset+r}px`,width:"10px"}},s=n.current;return d&&a&&s&&("bottom"===d?(i[d].left=`${window.pageXOffset+s.left}px`,i[d].top=`${window.pageYOffset+a.y}px`,i[d].height="3px",i[d].width=`${s.width}px`):(i[d].top=`${window.pageYOffset+s.top}px`,i[d].left=`${window.pageXOffset+a.x}px`,i[d].width="3px",i[d].height=`${s.height}px`),i[d].backgroundColor="#adf"),i}return{bottom:null,left:null,right:null,top:null}},[o,d,a])();return V.createElement("div",{ref:r},null!=o&&!c&&V.createElement(V.Fragment,null,V.createElement(F.A,{sx:{position:"absolute"},className:"TableCellResizer__resizer TableCellResizer__ui",style:b.right||void 0,onMouseDown:_("right")}),V.createElement(F.A,{sx:{position:"absolute"},className:"TableCellResizer__resizer TableCellResizer__ui",style:b.bottom||void 0,onMouseDown:_("bottom")})))}function rF(){let[e]=(0,el.DF)(),t=(0,rS.A)();return(0,V.useMemo)(()=>t?(0,t3.createPortal)(V.createElement(rP,{editor:e}),document.body):null,[e,t])}let rW="RichtextEditor",rH=(0,e2.Ay)(F.A,{name:rW,slot:"PlaceholderRoot"})(({theme:e})=>({position:"absolute",color:e.palette.text.hint,overflow:"hidden",textOverflow:"ellipsis",top:"8px",left:"0",userSelect:"none",display:"inlineBlock",pointerEvents:"none",...e.typography.body2})),r$=(0,e2.Ay)(F.A,{name:rW,slot:"EditorContainer"})(({theme:e})=>({position:"relative","& .ltr":{textAlign:"left"},"& .rtl":{textAlign:"right"},"svg path":{fill:e.palette.text.primary}})),rB=(0,e2.Ay)(F.A,{name:rW,slot:"EditorInner"})(({theme:e})=>({position:"relative","& .editor-input":{caretColor:e.palette.text.primary,minHeight:"150px",resize:"none",position:"relative",tabSize:1,outline:0,padding:`${e.spacing(1)} 0`}})),rI=(e,t)=>{let r=(0,eu.Ni)();if(r.clear(),!t){let e=(0,eu.lJ)();r.append(e);return}let n=(new DOMParser).parseFromString((t||"").replace(/\n/g,"<br>"),"text/html");(0,rl.d)(e,n).forEach(e=>{try{r.append(e)}catch(n){let t=(0,eu.lJ)();"linebreak"===e.getType()?r.append(t):r.append(t.append(e))}})};function rj({text:e}){return e?V.createElement(rH,null,e):null}function rJ(e){let t={theme:K,onError(e){throw e},nodes:[...rk],editorState:t=>{rI(t,(null==e?void 0:e.value)||"")},...(null==e?void 0:e.initEditorConfig)||{}};return V.createElement(Z.n,{initialConfig:t},V.createElement(ro,{mt:0},V.createElement(rV,e)))}let rV=e=>{let{placeholder:t,onChange:r,onBlur:n,onFocus:l,onClick:a,autoFocus:i=!1,value:o,disabled:s}=e,[c,u]=V.useState(!1),d=V.useRef(null),m=(0,ra.pt)(),h=V.useRef(!1),[p]=(0,el.DF)(),g=V.useMemo(()=>({container:document.createElement("div"),elements:[]}),[]);V.useEffect(()=>{m?l():n()},[m]),V.useEffect(()=>{p.setEditable(!s),s&&p.dispatchCommand(eu.pF,"")},[s]);let[f,_]=V.useState(null),[b,v]=V.useState(!1),[E,w]=V.useState(!1),x=V.useRef(null);V.useEffect(()=>{setImmediate(()=>{h.current=!0})},[]),V.useEffect(()=>p.registerCommand(eu.d8,()=>(a(),!1),eu.Ac),[]),V.useEffect(()=>{h.current&&p.update(()=>{m||(0,rl.g)(p,null)!==o&&rI(p,o)})},[o]),V.useEffect(()=>{let e=()=>{let e=window.matchMedia("(max-width: 1025px)").matches;e!==b&&v(e)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[b]);let y=V.useCallback(()=>{p.getEditorState().read(()=>{let e=(0,eu.vJ)();if((0,eu.I2)(e)){x.current=e.clone();let t=e.anchor,r=e.focus,n=(0,eo.cb)(p,t.getNode(),t.offset,r.getNode(),r.offset),l=d.current;if(null!==n&&null!==l){let{left:e,bottom:t,width:r}=n.getBoundingClientRect(),a=(0,eo.zT)(p,n),i=1===a.length?e+r/2-125:e-125;i<10&&(i=10),l.style.left=`${i}px`,l.style.top=`${t+20+(window.pageYOffset||document.documentElement.scrollTop)}px`;let o=a.length,{container:s}=g,c=g.elements,u=c.length;for(let e=0;e<o;e++){let t=a[e],r=c[e];void 0===r&&(r=document.createElement("span"),c[e]=r,s.appendChild(r));let n=`position:absolute;top:${t.top+(window.pageYOffset||document.documentElement.scrollTop)}px;left:${t.left}px;height:${t.height}px;width:${t.width}px;background-color:rgba(255, 212, 0, 0.3);pointer-events:none;z-index:5;`;r.style.cssText=n}for(let e=u-1;e>=o;e--){let t=c[e];s.removeChild(t),c.pop()}}}})},[p,g]);V.useLayoutEffect(()=>{y();let e=g.container,t=document.body;if(null!==t)return t.appendChild(e),()=>{t.removeChild(e)}},[g.container,y]),V.useEffect(()=>(window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}),[y]);let C=V.useCallback((e,t)=>{e.read(()=>{let e=(0,rl.g)(t,null),n=!(0,ra.Un)(t.isComposing(),!0);r(n?e:""),u(n)})},[u,r]);return V.createElement(r$,{className:"editor-shell"},V.createElement(tU,{setIsLinkEditMode:w}),V.createElement(rB,null,V.createElement(Y.$,{contentEditable:V.createElement("div",{className:"editor-scroller"},V.createElement("div",{className:"editor",ref:e=>{null!==e&&_(e)}},V.createElement(U.a,{className:"editor-input"}))),placeholder:V.createElement(rj,{text:t}),ErrorBoundary:Q.A}),V.createElement(q.G,null),V.createElement(t2.D,{onChange:C}),i?V.createElement(G.x,null):null,V.createElement(tG.Q,null),V.createElement(tq.W,null),V.createElement(tQ.A,null),V.createElement(eH,null),V.createElement(eQ,null),V.createElement(t5,null),V.createElement(rs.A,null),V.createElement(rF,null),V.createElement(eE,null),V.createElement(eD,null),V.createElement(eS,null),f&&!b&&V.createElement(V.Fragment,null,V.createElement(t9,{anchorElem:f,isLinkEditMode:E,setIsLinkEditMode:w}),V.createElement(rD,{anchorElem:f,cellMerge:!0}),V.createElement(rn,{anchorElem:f}))))},rX=(0,H.A)(e=>(0,$.A)({formLabel:{paddingLeft:"4px !important"},"formLabel-outlined":{backgroundColor:e.palette.background.paper,paddingRight:e.spacing(.5),paddingLeft:e.spacing(.5),marginLeft:e.spacing(-.5)},RDW:{position:"relative",padding:e.spacing(2,1.5)},"RDW-outlined":{"&:hover":{"& > fieldset":{borderColor:e.palette.text.primary}}},"RDW-outlined-focused":{"& > fieldset":{borderColor:`${e.palette.primary.main} !important`,border:"2px solid"},"& > label":{color:e.palette.primary.main}},"RDW-filled":{},"RDW-standard":{padding:e.spacing(1,0,0,0),borderWidth:"0 0 1px 0"},"RDW-error":{"& > fieldset":{borderColor:`${e.palette.error.main} !important`},"& > label":{color:e.palette.error.main}},hidePlaceholder:{"& .public-DraftEditorPlaceholder-root":{display:"none"}},hiddenToolbar:{display:"none !important"}}));var rK=({config:e,name:t,disabled:r,required:n,formik:l})=>{let{label:a,variant:i,color:o,required:s,fullWidth:c=!0,disabled:u,placeholder:d,margin:m="normal",emptyValue:h=""}=e,p=rX(),[g,f]=V.useState(!1),[_,b]=V.useState(!1),[v,E,{setValue:w,setTouched:x}]=(0,I.Mt)(null!=t?t:"RichTextEditorField"),y=V.useCallback(()=>{f(!0)},[]),C=V.useCallback(()=>{f(!1),_&&x(!0)},[_]),k=V.useCallback(()=>{b(!0)},[]),S=!!(E.error&&(E.touched||l.submitCount)),A=u||r||l.isSubmitting;return V.createElement(P.A,{margin:m,required:s,disabled:A,fullWidth:c,"data-testid":J()(`field ${t}`)},V.createElement(F.A,{sx:{position:"relative"},className:(0,B.A)(p.RDW,p[`RDW-${i}`],g&&p[`RDW-${i}-focused`],S&&p["RDW-error"])},V.createElement(W.A,{required:s||n,shrink:!0,variant:i,"data-testid":J()(`input ${t}`),className:(0,B.A)(p.formLabel,p[`formLabel-${i}`],g&&p[`formLabel-${i}-focused`]),disabled:A,color:o},a),V.createElement(rJ,{placeholder:d,onChange:e=>{w(e||h)},onBlur:C,onFocus:y,onClick:k,value:v.value,disabled:A,initEditorConfig:{editable:!A}}),V.createElement(D._r,{children:a,variant:i,hoverState:g})),S?V.createElement(X.A,{error:E.error}):null)}},24225:function(e,t,r){r.d(t,{Eh:function(){return u},K1:function(){return s},uC:function(){return c}});var n=r(13612),l=r(30758);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let i=l.lazy(()=>r.e("packages_framework_metafox-lexical_src_components_ImageComponent_tsx").then(r.bind(r,29302)));function o(e){if(e instanceof HTMLImageElement){let t=e.getAttribute("width")||"auto",{alt:r,src:n,width:l,height:a}=e;return{node:c({altText:r,height:a,src:n,width:t.includes("%")?t:l})}}return null}class s extends n.Kp{static getType(){return"image"}static clone(e){return new s(e.__src,e.__altText,e.__maxWidth,e.__width,e.__height,e.__showCaption,e.__caption,e.__captionsEnabled,e.__key)}static importJSON(e){let{altText:t,height:r,width:n,maxWidth:l,caption:a,src:i,showCaption:o}=e,s=c({altText:t,height:r,maxWidth:l,showCaption:o,src:i,width:n}),u=s.__caption,d=u.parseEditorState(a.editorState);return d.isEmpty()||u.setEditorState(d),s}exportDOM(){let e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),e.setAttribute("width",this.__width),e.setAttribute("height",this.__height),{element:e}}static importDOM(){return{img:e=>({conversion:o,priority:0})}}exportJSON(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:"inherit"===this.__height?0:this.__height,maxWidth:this.__maxWidth,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:"inherit"===this.__width?0:this.__width}}setWidthAndHeight(e,t){let r=this.getWritable();r.__width=e,r.__height=t}setShowCaption(e){this.getWritable().__showCaption=e}createDOM(e){let t=document.createElement("span"),r=e.theme.image;return void 0!==r&&(t.className=r),t}updateDOM(){return!1}getSrc(){return this.__src}getAltText(){return this.__altText}decorate(){return l.createElement(l.Suspense,{fallback:null},l.createElement(i,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,maxWidth:this.__maxWidth,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,captionsEnabled:this.__captionsEnabled,resizable:!0}))}constructor(e,t,r,l,i,o,s,c,u){super(u),a(this,"__src",void 0),a(this,"__altText",void 0),a(this,"__width",void 0),a(this,"__height",void 0),a(this,"__maxWidth",void 0),a(this,"__showCaption",void 0),a(this,"__caption",void 0),a(this,"__captionsEnabled",void 0),this.__src=e,this.__altText=t,this.__maxWidth=r,this.__width=e.includes(".svg")&&("auto"===l||!l)?"100%":l||"auto",this.__height=i||"auto",this.__showCaption=o||!1,this.__caption=s||(0,n.ie)(),this.__captionsEnabled=c||void 0===c}}function c({altText:e,height:t,maxWidth:r,captionsEnabled:l,src:a,width:i,showCaption:o,caption:c,key:u}){return(0,n.pT)(new s(a,e,r,i,t,o,c,l,u))}function u(e){return e instanceof s}},31965:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(30758),l=r(98791),a=r(43961),i=r(99221);let o=(0,r(69508).Ay)(l.Cf,{name:"EditorRichTextModal",slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"}));function s(){let[e,t]=(0,n.useState)(null),{i18n:r}=(0,a.PCX)(),s=(0,n.useCallback)(()=>{t(null)},[]);return[(0,n.useMemo)(()=>{if(null===e)return null;let{title:t,content:a,props:c={}}=e;return n.createElement(l.lG,{maxWidth:"xs",fullWidth:!0,scroll:"body",onClose:s,open:!0,...c},t?n.createElement(l.L3,{onCancel:s},r.formatMessage({id:t})):null,n.createElement(o,null,n.createElement(i.A,{p:2,sx:{width:"100%"}},a)))},[e,s]),(0,n.useCallback)((e,r,n)=>{t({content:r(s),title:e,props:n})},[s])]}},42733:function(e,t,r){r.d(t,{sk:function(){return u},ar:function(){return b},ii:function(){return v},Ck:function(){return R},Ho:function(){return O},Zs:function(){return L},wz:function(){return D},Or:function(){return P},ks:function(){return i}});var n=r(30758),l=r(32367),a=r(36694);function i({label:e,value:t,onChange:r,placeholder:i="","data-test-id":o,type:s="text",fullWidth:c=!0,margin:u="normal"}){return n.createElement(l.A,{margin:u,fullWidth:c},n.createElement(a.A,{label:e,type:s,InputLabelProps:{shrink:"number"===s||void 0},placeholder:i,value:t,onChange:e=>{r(e.target.value)},"data-test-id":o}))}var o=r(99221);let s=!1,c=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"];function u({color:e,onChange:t}){let r=n.useRef(f("hex",e)),[l,a]=(0,n.useState)(f("hex",e)),[u,m]=(0,n.useState)(e),h=(0,n.useRef)(null),p=(0,n.useMemo)(()=>({x:l.hsv.s/100*214,y:(100-l.hsv.v)/100*150}),[l.hsv.s,l.hsv.v]),g=(0,n.useMemo)(()=>({x:l.hsv.h/360*214}),[l.hsv]);return(0,n.useEffect)(()=>{if(null!==h.current&&t){var e;(null==r||null==(e=r.current)?void 0:e.hex)!==l.hex&&t(l.hex,s),m(l.hex)}},[l,t]),(0,n.useEffect)(()=>{if(void 0===e)return;let t=f("hex",e);a(t),m(t.hex)},[e]),n.createElement(o.A,null,n.createElement("div",{className:"color-picker-wrapper",style:{width:214},ref:h},n.createElement(i,{label:"Hex",onChange:e=>{m(e),/^#[0-9A-Fa-f]{6}$/i.test(e)&&a(f("hex",e))},value:u}),n.createElement("div",{className:"color-picker-basic-color"},c.map(e=>n.createElement("button",{className:e===l.hex?" active":"",key:e,style:{backgroundColor:e},onClick:()=>{m(e),a(f("hex",e))}}))),n.createElement(d,{className:"color-picker-saturation",style:{backgroundColor:`hsl(${l.hsv.h}, 100%, 50%)`},onChange:({x:e,y:t})=>{let r=f("hsv",{...l.hsv,s:e/214*100,v:100-t/150*100});a(r),m(r.hex)}},n.createElement("div",{className:"color-picker-saturation_cursor",style:{backgroundColor:l.hex,left:p.x,top:p.y}})),n.createElement(d,{className:"color-picker-hue",onChange:({x:e})=>{let t=f("hsv",{...l.hsv,h:e/214*360});a(t),m(t.hex)}},n.createElement("div",{className:"color-picker-hue_cursor",style:{backgroundColor:`hsl(${l.hsv.h}, 100%, 50%)`,left:g.x}})),n.createElement("div",{className:"color-picker-color",style:{backgroundColor:l.hex}})))}function d({className:e,style:t,onChange:r,children:l}){let a=(0,n.useRef)(null),i=(0,n.useRef)(!1),o=e=>{if(a.current){var t,n,l,i,o,s;let{current:c}=a,{width:u,height:d,left:m,top:h}=c.getBoundingClientRect();r({x:(t=e.clientX-m,l=0,t>(n=u)?n:t<0?l:t),y:(i=e.clientY-h,s=0,i>(o=d)?o:i<0?s:i)})}};return n.createElement("div",{ref:a,className:e,style:t,onMouseDown:e=>{if(0!==e.button)return;o(e);let t=e=>{i.current=!0,s=!0,o(e)},r=e=>{i.current&&(s=!1),document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",r,!1),o(e),i.current=!1};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",r,!1)}},l)}function m(e){if(e.startsWith("#")){if(4===e.length||5===e.length)return e.split("").map((e,t)=>t?e+e:"#").join("");else if(7===e.length||9===e.length)return e}else{let t=document.createElement("canvas").getContext("2d");if(!t)throw Error("2d context not supported or canvas already initialized");return t.fillStyle=e,t.fillStyle}return"#000000"}function h(e){let t=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,r,n)=>`#${t}${t}${r}${r}${n}${n}`).substring(1).match(/.{2}/g)||[]).map(e=>parseInt(e,16));return{b:t[2],g:t[1],r:t[0]}}function p({r:e,g:t,b:r}){let n=Math.max(e/=255,t/=255,r/=255),l=n-Math.min(e,t,r);return{h:l?(n===e?(t-r)/l+6*(t<r):n===t?2+(r-e)/l:4+(e-t)/l)*60:0,s:n?l/n*100:0,v:100*n}}function g({b:e,g:t,r}){return`#${[r,t,e].map(e=>e.toString(16).padStart(2,"0")).join("")}`}function f(e,t){let r=m("#121212"),n=h(r),l=p(n);return"hex"===e?l=p(n=h(r=m(t))):"rgb"===e?(r=g(n=t),l=p(n)):"hsv"===e&&(r=g(n=function({h:e,s:t,v:r}){let n=~~(e/60),l=e/60-n,a=(r/=100)*(1-(t/=100)),i=r*(1-t*l),o=r*(1-t*(1-l)),s=n%6,c=Math.round(255*[r,i,a,a,o,r][s]),u=Math.round(255*[o,r,r,i,a,a][s]);return{b:Math.round(255*[a,a,o,r,r,i][s]),g:u,r:c}}(l=t))),{hex:r,hsv:l,rgb:n}}var _=r(88916);function b({className:e}){return n.createElement(_.a,{className:e||"ContentEditable__root"})}function v({"data-test-id":e,children:t}){return n.createElement("div",{className:"DialogActions","data-test-id":e},t)}var E=r(8143),w=r(25304),x=r(69508),y=r(56332),C=r(97276),k=r(18851),S=r(27759);let A=(0,x.Ay)(S.A,{name:"RichtextEditorAction",slot:"DropdownWrapper"})(({theme:e})=>({zIndex:e.zIndex.tooltip-1,display:"block",position:"fixed",minHeight:"40px"})),M=n.createContext(null),N=(0,x.Ay)(y.A,{name:"RichtextEditorAction",slot:"ButtonAction"})(({theme:e})=>({border:0,color:e.palette.text.primary,display:"flex",background:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",verticalAlign:"middle",alignItems:"center",justifyContent:"space-between",minWidth:"48px","&:hover:not([disabled])":{backgroundColor:"rgba(0,0,0,0.1)"}}));function O({children:e,className:t,onClick:r,title:l,selected:a}){let i=(0,n.useRef)(null),o=n.useContext(M);if(null===o)throw Error("DropDownItem must be used within a DropDown");let{registerItem:s}=o;return(0,n.useEffect)(()=>{i&&i.current&&s(i)},[i,s]),n.createElement(C.A,{className:t,onClick:r,selected:a,ref:i,title:l},e)}function z({children:e,dropDownRef:t,onClose:r,sxDropdownWrapper:l={}}){let[a,i]=(0,n.useState)(),[o,s]=(0,n.useState)(),c=(0,n.useCallback)(e=>{i(t=>t?[...t,e]:[e])},[i]),u=(0,n.useMemo)(()=>({registerItem:c}),[c]);return(0,n.useEffect)(()=>{a&&!o&&s(a[0]),o&&o.current&&o.current.focus()},[a,o]),n.createElement(M.Provider,{value:u},n.createElement(A,{className:"dropdown",ref:t,onKeyDown:e=>{if(!a)return;let t=e.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(t)&&e.preventDefault(),"Escape"===t||"Tab"===t?r():"ArrowUp"===t?s(e=>{if(!e)return a[0];let t=a.indexOf(e)-1;return a[-1===t?a.length-1:t]}):"ArrowDown"===t&&s(e=>e?a[a.indexOf(e)+1]:a[0])},sx:l},e))}function R({disabled:e=!1,buttonLabel:t,buttonAriaLabel:r,buttonIcon:l,children:a,stopCloseOnClickSelf:i,sxDropdownWrapper:o}){let s=(0,n.useRef)(null),c=(0,n.useRef)(null),[u,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=c.current,t=s.current;if(u&&null!==e&&null!==t){let{top:r,left:n}=e.getBoundingClientRect();t.style.top=`${r+e.offsetHeight+4}px`,t.style.left=`${Math.min(n,window.innerWidth-t.offsetWidth-20)}px`}},[s,c,u]),(0,n.useEffect)(()=>{let e=c.current;if(null!==e&&u){let t=t=>{let r=t.target;!(i&&s.current&&s.current.contains(r))&&(e.contains(r)||d(!1))};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}}},[s,c,u,i]),(0,n.useEffect)(()=>{let e=()=>{if(u){let e=c.current,t=s.current;if(null!==e&&null!==t){let{top:r}=e.getBoundingClientRect(),n=r+e.offsetHeight+4;n!==t.getBoundingClientRect().top&&(t.style.top=`${n}px`)}}};return document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e)}},[c,s,u]),n.createElement(n.Fragment,null,n.createElement(N,{type:"button",disabled:e,"aria-label":r||t,onClick:()=>d(!u),ref:c,variant:"text"},l||null,t&&n.createElement(k.A,{variant:"body2",component:"span",ml:1},t),n.createElement(w.s4,{sx:{ml:1},icon:"ico-caret-down"})),u&&(0,E.createPortal)(n.createElement(z,{dropDownRef:s,onClose:()=>{d(!1),c&&c.current&&c.current.focus()},sxDropdownWrapper:o},a),document.body))}function L({disabled:e=!1,stopCloseOnClickSelf:t=!0,color:r,onChange:l,...a}){return n.createElement(R,{...a,disabled:e,stopCloseOnClickSelf:t},n.createElement(o.A,{p:2},n.createElement(u,{color:r,onChange:l})))}function T(e,t,r){return Math.min(Math.max(e,t),r)}function D({onResizeStart:e,onResizeEnd:t,buttonRef:r,imageRef:l,maxWidth:a,editor:i,showCaption:o,setShowCaption:s,captionsEnabled:c}){let u=(0,n.useRef)(null),d=(0,n.useRef)({priority:"",value:"default"}),m=(0,n.useRef)({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),h=i.getRootElement(),p=a||(null!==h?h.getBoundingClientRect().width-20:100),g=null!==h?h.getBoundingClientRect().height-20:100,f=(t,r)=>{if(!i.isEditable())return;let n=l.current,a=u.current;if(null!==n&&null!==a){t.preventDefault();let{width:l,height:i}=n.getBoundingClientRect(),o=m.current;o.startWidth=l,o.startHeight=i,o.ratio=l/i,o.currentWidth=l,o.currentHeight=i,o.startX=t.clientX,o.startY=t.clientY,o.isResizing=!0,o.direction=r;let s=1===r||4===r?"ew":8===r||2===r?"ns":8&r&&4&r||2&r&&1&r?"nwse":"nesw";null!==h&&h.style.setProperty("cursor",`${s}-resize`,"important"),null!==document.body&&(document.body.style.setProperty("cursor",`${s}-resize`,"important"),d.current.value=document.body.style.getPropertyValue("-webkit-user-select"),d.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important")),e(),a.classList.add("image-control-wrapper--resizing"),n.style.height=`${i}px`,n.style.width=`${l}px`,document.addEventListener("pointermove",_),document.addEventListener("pointerup",b)}},_=e=>{let t=l.current,r=m.current,n=5&r.direction,a=10&r.direction;if(null!==t&&r.isResizing)if(n&&a){let n=Math.floor(r.startX-e.clientX);n=1&r.direction?-n:n;let l=T(r.startWidth+n,100,p),a=l/r.ratio;t.style.width=`${l}px`,t.style.height=`${a}px`,r.currentHeight=a,r.currentWidth=l}else if(a){let n=Math.floor(r.startY-e.clientY);n=2&r.direction?-n:n;let l=T(r.startHeight+n,100,g);t.style.height=`${l}px`,r.currentHeight=l}else{let n=Math.floor(r.startX-e.clientX);n=1&r.direction?-n:n;let l=T(r.startWidth+n,100,p);t.style.width=`${l}px`,r.currentWidth=l}},b=()=>{let e=l.current,r=m.current,n=u.current;if(null!==e&&null!==n&&r.isResizing){let e=r.currentWidth,l=r.currentHeight;r.startWidth=0,r.startHeight=0,r.ratio=0,r.startX=0,r.startY=0,r.currentWidth=0,r.currentHeight=0,r.isResizing=!1,n.classList.remove("image-control-wrapper--resizing"),null!==h&&h.style.setProperty("cursor","text"),null!==document.body&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",d.current.value,d.current.priority)),t(e,l),document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",b)}};return n.createElement("div",{ref:u},n.createElement("div",{className:"image-resizer image-resizer-n",onPointerDown:e=>{f(e,8)}}),n.createElement("div",{className:"image-resizer image-resizer-ne",onPointerDown:e=>{f(e,9)}}),n.createElement("div",{className:"image-resizer image-resizer-e",onPointerDown:e=>{f(e,1)}}),n.createElement("div",{className:"image-resizer image-resizer-se",onPointerDown:e=>{f(e,3)}}),n.createElement("div",{className:"image-resizer image-resizer-s",onPointerDown:e=>{f(e,2)}}),n.createElement("div",{className:"image-resizer image-resizer-sw",onPointerDown:e=>{f(e,6)}}),n.createElement("div",{className:"image-resizer image-resizer-w",onPointerDown:e=>{f(e,4)}}),n.createElement("div",{className:"image-resizer image-resizer-nw",onPointerDown:e=>{f(e,12)}}))}function P({children:e,className:t}){return n.createElement("div",{className:t||"Placeholder__root"},e)}},51326:function(e,t,r){var n,l,a=r(30758);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.A=e=>a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"link_svg__bi link_svg__bi-link"},e),n||(n=a.createElement("path",{d:"M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"})),l||(l=a.createElement("path",{d:"M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"})))}}]);