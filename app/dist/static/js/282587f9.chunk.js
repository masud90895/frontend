"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-photo-components-PhotoModalView-PhotoItemModalView"],{69404:function(e,t,i){i.d(t,{A:function(){return x}});var o=i(43961),n=i(20644),a=i.n(n),l=i(25304),r=i(69508),s=i(56332),d=i(30758);let p="PhotoTag",c=(0,r.Ay)("div",{name:p,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:i,py:o,hovering:n,forceShow:a})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||a)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:n?10:"auto",...i&&o&&{left:`${i}%`,top:`${o}%`}})),m=(0,r.Ay)("div",{name:p,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"dark"===e.palette.mode?"rgba(0,0,0,.6)":"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),g=(0,r.Ay)(l.xE,{name:p,slot:"LinkStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.common.white,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,maxWidth:"180px",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,padding:e.spacing(0,.5)})),u=(0,r.Ay)(s.A,{name:p,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.common.white,minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),h=(0,r.Ay)("span",{name:p,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"}));var x=(0,o.NgA)((e,{identity:t})=>{let i=a()(e,t);return i?{item:i,user:i.user?a()(e,i.user):void 0}:{}})(function({item:e,user:t,tagging:i,extra:o,onRemove:n,isTypePreview:a,forceShow:r}){var s;let p=i&&(null==e||null==(s=e.extra)?void 0:s.can_remove_tag_friend),[x,f]=d.useState(!1);return d.createElement(c,{px:e.px,py:e.py,tagging:i,hovering:x,forceShow:r},d.createElement(m,{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)},t&&!a?d.createElement(g,{user:t,hoverCard:!1,rootProps:{display:"inherit"}}):d.createElement(h,null,(null==t?void 0:t.full_name)||(null==e?void 0:e.content)),p?d.createElement(u,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>{n(t,e.id)}},d.createElement(l.s4,{icon:"ico-close"})):null))})},72099:function(e,t,i){var o=i(13526),n=i(30758);t.A=n.forwardRef(function({classes:e,px:t,py:i,open:a},l){let r=n.useMemo(()=>({left:`${t}%`,top:`${i}%`}),[t,i]);return n.createElement("div",{onClick:e=>e.stopPropagation(),className:(0,o.A)(e.taggedBox,a?"":"srOnly"),style:r,ref:l},n.createElement("div",{className:e.whoIsThis}))})},87596:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var o=i(43961),n=i(25304),a=i(41349),l=i(69508),r=i(86725),s=i(99221),d=i(89507),p=i(56332),c=i(30758),m=i(69404),g=i(28606),u=i(94215);let h=(0,g.A)(e=>(0,u.A)({root:{},image:{maxWidth:"100%",maxHeight:"100vh",float:"left",backgroundColor:"hsl(0, 0%, 90%)",opacity:0,[e.breakpoints.down("sm")]:{maxHeight:"350px"}},imageHeightAuto:{maxHeight:"initial",[e.breakpoints.down("sm")]:{maxHeight:"350px"}},visibleImage:{opacity:1},boxFake:{position:"absolute",top:0,right:0,left:0,objectFit:"cover",display:"flex",alignItems:"center",justifyContent:"center"},imageFake:{width:"100%",height:"auto"},actionBar:{position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"flex-end",zIndex:1,alignItems:"center"},tagFriend:{color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)},dropDown:{color:"#fff",minWidth:"32px",height:"32px",fontSize:e.mixins.pxToRem(15)},taggedBox:{position:"absolute",left:0,top:0,width:"100px",height:"100px",border:"2px solid",borderColor:e.palette.background.paper,boxShadow:e.shadows[20],transform:"translate(-50%,-50%)"},suggestFriend:{backgroundColor:e.mixins.backgroundColor("paper"),marginTop:"10px",marginLeft:"-70px",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,"&  .MuiFilledInput-root":{background:"none"}},smallAvatar:{width:"24px",height:"24px",marginRight:e.spacing(1)},whoIsThis:{height:"100px",width:"100%"},popper:{zIndex:e.zIndex.snackbar,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(1),boxShadow:e.shadows[20],borderRadius:e.shape.borderRadius,margin:e.spacing(1,0),width:"240px","& .MuiAutocomplete-paper":{boxShadow:"none"},"& .MuiAutocomplete-listbox":{padding:0},"& .MuiAutocomplete-option":{borderRadius:e.shape.borderRadius,padding:"6px 8px"},"& .MuiAutocomplete-root":{maxWidth:"224px"},"& .MuiFilledInput-underline:after":{display:"none"},"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiFilledInput-underline:before":{display:"none"},"& .MuiFilledInput-root":{background:"none",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius},"& .MuiAutocomplete-noOptions":{padding:e.spacing(1.5,1)}},tagItem:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(.5,1),"&:hover":{background:e.palette.action.selected,borderRadius:e.shape.borderRadius/2}},userName:{flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:e.mixins.pxToRem(14)},inputBaseBox:{"& input":{width:"100%",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,padding:e.spacing(1),fontSize:e.mixins.pxToRem(15),"&:focus":{border:e.mixins.border("secondary"),outline:"none"}}},message:{color:"#fff",margin:e.spacing(0,1)},iconButton:{color:"white"},clear:{clear:"both"}}),{name:"MuiPhotoItemViewModal"});var x=i(96934),f=i(72099),y=i(1855),b=i.n(y);let v="PhotoItemModalView",w=(0,l.Ay)("div",{name:v,slot:"ImageBox",shouldForwardProp:e=>"tagging"!==e})(({theme:e,tagging:t,size:i})=>({position:"relative",maxWidth:"100%",maxHeight:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto",img:{maxWidth:"100%",maxHeight:i.height},...t&&{cursor:"pointer"}})),A=(0,l.Ay)("div",{name:v,slot:"actionBar"})(({theme:e})=>({position:"absolute",right:0,top:0,padding:e.spacing(1),display:"inline-flex",justifyContent:"flex-end",zIndex:1,alignItems:"center"})),E=(0,l.Ay)("div",{name:v,slot:"BoxFake"})(({theme:e})=>({position:"absolute",top:0,right:0,left:0,objectFit:"cover",display:"flex",alignItems:"center",justifyContent:"center"})),k=(0,l.Ay)("img",{name:v,slot:"ImageFake"})(({theme:e})=>({width:"100%",height:"auto"})),C=(0,l.Ay)(r.A,{name:v,slot:"TagFriend"})(({theme:e})=>({color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)})),I=(0,l.Ay)(n._V,{name:v,slot:"Image",shouldForwardProp:e=>"visibleImage"!==e&&"imageHeight"!==e})(({theme:e,visibleImage:t,imageHeight:i})=>({height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,"& img":{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"},[e.breakpoints.down("sm")]:{maxHeight:"350px","& img":{maxHeight:"350px"}},...t&&{opacity:1},...i&&{maxHeight:"initial"}})),R=(0,l.Ay)("div",{name:v,slot:"ImageWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"}));function _({item:e,identity:t,imageHeightAuto:i=!1,enablePhotoTags:l=!0,taggedFriends:r=[],onAddPhotoTag:g,onRemovePhotoTag:u,onMinimizePhoto:y}){var v,_;let M=h(),{i18n:S,assetUrl:F}=(0,o.PCX)(),P=(0,o.tgz)(),B=c.useRef(),[z,H]=c.useState(!1),[T,N]=c.useState({px:0,py:0}),[W,j]=c.useState(!1),[L,O]=c.useState(!1),[$,V]=c.useState(!0),X=c.useRef(),[D,G]=c.useState({});if(c.useEffect(()=>{if(z&&(null==X?void 0:X.current)){let e=X.current.getBoundingClientRect();e.height>0&&G({height:`${e.height}px`})}},[z]),!e)return null;let q=(0,a.AE)(e.image,"origin",F("photo.no_image")),U=(0,a.AE)(e.image,"240",F("photo.no_image")),Y=(e,t)=>{e.stopPropagation(),u(t)},J=()=>{j(e=>!e),W||O(!1)},K=b()(null==e?void 0:e.mature)&&(null==e?void 0:e.mature)>0;return c.createElement(n.qB,{onClickAway:()=>{O(!1),j(!1)}},c.createElement(R,{ref:X},c.createElement(w,{tagging:W,onClick:e=>{let t=e.currentTarget.getBoundingClientRect();N({px:Math.max(Math.min(e.clientX-t.left,t.width-50),50)/t.width*100,py:Math.max(Math.min(e.clientY-t.top,t.height-50),50)/t.height*100}),W&&O(!0)},size:D},c.createElement(I,{onLoad:e=>{H(!0)},visibleImage:!0,imageHeight:i,alt:e.title,src:q,key:t,imageFit:"contain",aspectRatio:"auto",identity:t,matureProps:{color:"white",sx:{width:"100%",height:"100%"}}}),K?null:c.createElement(c.Fragment,null,z?null:c.createElement(E,null,c.createElement(k,{alt:e.title,src:U})),c.createElement(f.A,{open:W&&L,px:T.px,py:T.py,classes:M,ref:B}),W&&L?c.createElement(x.A,{onItemClick:e=>{let{px:t,py:i}=T;g({content:e,px:t,py:i}),O(!1)},classes:M,anchorRef:B,identity:t,open:!0}):null,(null==(v=e.tagged_friends)?void 0:v.length)?e.tagged_friends.map(t=>c.createElement(m.A,{extra:e.extra,tagging:W,identity:t,key:t.toString(),onRemove:Y,classes:M})):null)),c.createElement(A,null,P&&l&&!W&&!K?c.createElement(s.A,null,z&&(null==(_=e.extra)?void 0:_.can_tag_friend)&&g?c.createElement(d.A,{title:S.formatMessage({id:"start_tagging"})},c.createElement(C,{onClick:J},c.createElement(n.s4,{icon:"ico-price-tag",color:"white"}))):null,y&&c.createElement(d.A,{title:S.formatMessage({id:$?"switch_to_full_screen":"exit_full_screen"})},c.createElement(C,{onClick:()=>{V(!$),y&&y($)}},c.createElement(n.s4,{icon:$?"ico-arrow-expand":"ico-arrow-collapse",color:"white"})))):null,l&&W&&!K?c.createElement(d.A,{title:S.formatMessage({id:"done_tagging"})},c.createElement(p.A,{variant:"contained",color:"primary",size:"small",onClick:J},S.formatMessage({id:"done"}))):null)))}},96934:function(e,t,i){i.d(t,{A:function(){return f}});var o=i(43961),n=i(69508),a=i(53770),l=i(30758),r=i(20644),s=i.n(r),d=i(41349),p=i(85481),c=i(64487);let m="SuggestionList",g=(0,n.Ay)("div",{name:m,slot:"RootNoFound"})(({theme:e})=>({minHeight:"100px",textAlign:"center"})),u=(0,n.Ay)("div",{name:m,slot:"Root"})(({theme:e})=>({minHeight:"100px",margin:e.spacing(1,-1,0)}));var h=(0,o.NgA)((e,{text:t,identity:i})=>{let o=s()(e,i);return{...e.friend.suggestions[`:${t}`],item_id:null==o?void 0:o.id}})(function(e){let{dispatch:t,i18n:i}=(0,o.PCX)(),{text:n,item_id:a,data:r,loaded:s,onItemClick:m,classes:h,excludeIds:x,isFullFriend:f,postAsParent:y,parentUser:b}=e,v=l.useMemo(()=>f?{excludeIds:x}:{item_type:"photo",item_id:a},[x,a,f]);return(l.useEffect(()=>{t({type:"friend/suggestions/LOAD",payload:{text:n,...v,user_id:y&&(null==b?void 0:b.id),owner_id:null==b?void 0:b.id}})},[t,n,v]),s)?(null==r?void 0:r.length)?l.createElement(u,null,r.map(e=>l.createElement("div",{onClick:t=>{t.preventDefault(),t.stopPropagation(),m(e)},className:h.tagItem,key:e.id.toString()},l.createElement(c.A,{src:(0,d.AE)(e.image,"240"),children:(0,d.cb)(e.label),alt:e.label,className:h.smallAvatar,style:{backgroundColor:d.m6.hex((0,d.cb)(e.label))}}),l.createElement("span",{className:h.userName},e.label)))):l.createElement(g,{onClick:e=>e.stopPropagation()},l.createElement("div",{style:{padding:16}},i.formatMessage({id:"no_people_found"}))):l.createElement(g,{sx:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"default"},onClick:e=>e.stopPropagation()},l.createElement(p.A,{color:"secondary",size:32}))});let x=(0,n.Ay)("input",{name:"Text"})(({theme:e})=>({"&::placeholder":{color:e.palette.text.hint}}));function f({classes:e,onItemClick:t,anchorRef:i,identity:n,isFullFriend:r,excludeIds:s,postAsParent:d,parentUser:p}){let{i18n:c}=(0,o.PCX)(),[m,g]=l.useState("");return l.createElement(a.A,{id:"suggest-friends",open:!!i.current,disablePortal:!0,anchorEl:i.current,placement:"bottom",className:e.popper,onClick:e=>e.stopPropagation()},l.createElement("div",{className:e.inputBaseBox},l.createElement(x,{type:"text",placeholder:c.formatMessage({id:"type_any_name"}),onChange:e=>{g(e.target.value)},autoFocus:!0,onBlur:e=>e.target.focus()})),l.createElement(h,{onItemClick:t,text:m,classes:e,identity:n,isFullFriend:r,excludeIds:s,postAsParent:d,parentUser:p}))}}}]);