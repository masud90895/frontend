"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-user-blocks-UserListing-Block"],{44608:function(e,t,l){l.r(t),l.d(t,{default:function(){return k}});var a=l(43961),n=l(1530),i=l(99221),r=l(56332),s=l(63027),o=l(66521),d=l.n(o),m=l(3029),u=l.n(m),c=l(20644),g=l.n(c),f=l(30758),p=l(24009),v=l(25304),E=l(91712),y=(0,a.hS2)(function({title:e,itemView:t,itemProps:l={},gridItemProps:o={},gridContainerProps:m={spacing:2},pagingId:c,messagePagination:y,handleUpdateLastRead:k,loadMore:_,numberOfItemsPerPage:x,emptyPage:A="core.block.no_content",emptyPageProps:b,errorPage:w,hasSort:h=!1,moduleName:C,resourceName:P,actionSortName:M,handleActionItem:B,hideTopPagination:z,hideBottomPagination:S}){var D,I,L,T;let{jsxBackend:W,usePageParams:$,i18n:F}=(0,a.PCX)(),K=$(),{page:N}=K,U=W.get(t),O=W.get(`${t}.skeleton`),V=parseInt(N||1,10),[q,Q]=f.useState(V),[R,X]=f.useState("all"),j=(0,p.d4)(e=>(0,a.qRQ)(e,c))||(0,a.KCW)(),{loading:G,refreshing:H,error:J,ended:Y,initialized:Z,pagesOffset:ee,dirty:et}=null!=j?j:{},el=x||20,ea=f.useMemo(()=>{var e;let t=null==(e=j.pages[q])?void 0:e.ids;return t&&t.length>0?t:j.ids&&j.ids.length>0?j.ids:[]},[j.pages,j.ids,q]),en=(0,p.d4)(e=>ea.map(t=>(0,a.B_w)(e,t)).filter(Boolean),(e,t)=>e.length===t.length&&e.every((e,l)=>{var a;return(null==e?void 0:e._identity)===(null==(a=t[l])?void 0:a._identity)})),ei=f.useMemo(()=>"all"===R?ea:en.filter(e=>{var t,l,a;if((null==e?void 0:e.status_user)!==void 0&&(null==e?void 0:e.status_user)!==null&&(null==e?void 0:e.status_user)!==E.O.Online&&(null==e?void 0:e.status_user)!==1)return!1;let n=!1;switch(R){case"girls":n=(null==e||null==(t=e.gender)?void 0:t.id)===2;break;case"boys":n=(null==e||null==(l=e.gender)?void 0:l.id)===1;break;case"admins":n=(null==e||null==(a=e.extra)?void 0:a.has_admin_access)===!0;break;default:n=!0}return n}).map(e=>e._identity?e._identity:e.id&&e.module_name&&e.resource_name?`${e.module_name}.entities.${e.resource_name}.${e.id}`:e.id).filter(Boolean),[en,R,ea]),er=e=>{X(e)};if(f.useEffect(()=>{k&&k()},[q]),f.useEffect(()=>{let e=parseInt((null==K?void 0:K.page)||(null==ee?void 0:ee.current_page),10);Q(e),e!==(null==K?void 0:K.page)&&_&&_()},[null==K?void 0:K.page,null==ee?void 0:ee.current_page]),f.useEffect(()=>{H&&!et&&_&&_()},[Z,H]),!U)return null;if(o.xs||(o.xs=12),J){if("hide"===w)return null;let t=g()(J,"response.data.error")||g()(J,"response.data.message")||g()(J,"response.data.meta.title"),l=g()(J,"response.data.meta.description"),a=403===g()(J,"response.status")?"core.block.error403":"core.block.error404",i=W.get(a);return"default"===w?f.createElement(n.eB,null,f.createElement(n.Tw,{title:e,data:ei}),f.createElement(n.tD,null,f.createElement(i,{title:t,content:l}))):f.createElement(i,{title:t,content:l})}if(!ei.length&&Y||J){if("hide"===A)return null;if("string"!=typeof A)return A;let t=W.get(A);if(!t)return null;let{noBlock:l,contentStyle:a}=b||{};return l?f.createElement(t,b):f.createElement(n.eB,null,f.createElement(n.Tw,{title:e,data:ei},f.createElement(i.A,{sx:{display:"flex",flexDirection:"column",flex:1}},f.createElement(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1}},f.createElement(r.A,{variant:"all"===R?"contained":"outlined",size:"small",onClick:()=>er("all"),"data-testid":"filter-all"},F.formatMessage({id:"all"})),f.createElement(r.A,{variant:"girls"===R?"contained":"outlined",size:"small",onClick:()=>er("girls"),"data-testid":"filter-girls"},F.formatMessage({id:"girls"})),f.createElement(r.A,{variant:"boys"===R?"contained":"outlined",size:"small",onClick:()=>er("boys"),"data-testid":"filter-boys"},F.formatMessage({id:"boys"})),f.createElement(r.A,{variant:"admins"===R?"contained":"outlined",size:"small",onClick:()=>er("admins"),"data-testid":"filter-admins"},F.formatMessage({id:"admins"}))))),f.createElement(n.tD,a,f.createElement(t,{...b})))}return Z?f.createElement(n.eB,null,f.createElement(n.Tw,{title:e,data:ei},f.createElement(i.A,{sx:{display:"flex",flexDirection:"column",flex:1}},f.createElement(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1}},f.createElement(r.A,{variant:"all"===R?"contained":"outlined",size:"small",onClick:()=>er("all"),"data-testid":"filter-all"},F.formatMessage({id:"all"})),f.createElement(r.A,{variant:"girls"===R?"contained":"outlined",size:"small",onClick:()=>er("girls"),"data-testid":"filter-girls"},F.formatMessage({id:"girls"})),f.createElement(r.A,{variant:"boys"===R?"contained":"outlined",size:"small",onClick:()=>er("boys"),"data-testid":"filter-boys"},F.formatMessage({id:"boys"})),f.createElement(r.A,{variant:"admins"===R?"contained":"outlined",size:"small",onClick:()=>er("admins"),"data-testid":"filter-admins"},F.formatMessage({id:"admins"}))))),f.createElement(n.tD,null,z?null:f.createElement(v.dK,{currentPage:q,from:null==(D=j.pages[q])?void 0:D.from,to:null==(I=j.pages[q])?void 0:I.to,total:(null==ee?void 0:ee.total_item)||(null==ee?void 0:ee.total),itemsPerPage:el,message:y,hasSort:h,moduleName:C,resourceName:P,actionName:M}),f.createElement(s.Ay,{container:!0,...m},d()(ei)&&ei.map((e,t)=>f.createElement(U,{index:t,identity:e,itemProps:l,key:e.toString(),wrapAs:s.Ay,wrapProps:o,pagingId:c,handleActionItem:B})),G&&O?f.createElement(f.Fragment,null,u()(0,x).map(e=>f.createElement(O,{wrapAs:s.Ay,wrapProps:o,itemProps:l,key:e.toString()}))):null),S?null:f.createElement(v.dK,{currentPage:q,from:null==(L=j.pages[q])?void 0:L.from,to:null==(T=j.pages[q])?void 0:T.to,total:(null==ee?void 0:ee.total_item)||(null==ee?void 0:ee.total),itemsPerPage:el,message:y}))):O?f.createElement(n.eB,null,f.createElement(n.Tw,{title:e}),f.createElement(n.tD,null,f.createElement(s.Ay,{container:!0,sx:{"&:empty":{display:"none"}},...m},u()(0,x).map(e=>f.createElement(O,{testid:"loadingIndicator",wrapAs:s.Ay,wrapProps:o,itemProps:l,key:e.toString()}))))):f.createElement("div",{"data-testid":"loadingIndicator"},F.formatMessage({id:"loading_dots"}))}),k=(0,a.WvA)({extendBlock:y,name:"UserListingBlock",overrides:{dataSource:{apiUrl:"/user"},contentType:"user"},defaults:{title:"members",itemView:"user.itemView.mainCard",blockLayout:"Main Listings",gridLayout:"Friend - Cards",itemLayout:"Friend - Cards"}})}}]);