"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-blocks-SearchBox-Block"],{94012:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var r=a(43961),n=a(1530),l=a(25304),c=a(69508),o=a(89507),i=a(76534),m=a(30758),s=a(98982),u=a(4633),p=a.n(u),h=a(57468),f=a.n(h),d=a(41349);let g=(0,c.Ay)(l.s4,{name:"IconClearStyled"})(({theme:e})=>({marginRight:e.spacing(.5),cursor:"pointer",color:e.palette.text.hint})),x=(0,c.Ay)(l.s4,{name:"IconPlusStyled"})(({theme:e})=>({color:e.palette.text.hint,fontSize:e.mixins.pxToRem(16),marginLeft:e.spacing(2),"&:hover":{color:e.palette.primary.main}})),E=(0,c.Ay)("form",{name:"FormStyled"})(({theme:e})=>({display:"flex",alignItems:"center",zIndex:e.zIndex.appBar})),S=(0,c.Ay)(l.Gd,{name:"SearchWrapper"})(({theme:e})=>({"& input::placeholder, .ico":{color:e.palette.text.hint}})),y=(0,r.mtG)(function(e){let{eventCenter:t,usePageParams:a,navigate:l,i18n:c,compactData:u}=(0,r.PCX)(),h=a(),{search:y,appName:b,resourceName:k}=h,{icon:v,titleIcon:B,action:I}=e,A=(0,r.IgF)(b,k,"searchItem"),C=(0,r.EkY)(b,k,"search_simple"),_=m.useRef(!1),[R,z]=(0,m.useState)(""),[D,F]=(0,m.useState)({});if((0,m.useEffect)(()=>{t.dispatch("minimizeGlobalSearchForm",!0)}),(0,m.useEffect)(()=>{z(y||"")},[y]),!A)return null;let{placeholder:N,pageParams:G={},pageRules:P}=A;return C?m.createElement(n.eB,{testid:"blockSearch"},m.createElement(n.tD,null,m.createElement(s.ok,{noHeader:!0,noBreadcrumb:!0,formSchema:C,onChange:({values:e})=>{var t;if(f()(e,D)||_.current)return;let a=null!=(t=A.pageUrl)?t:"/appName/search",r=null==A?void 0:A.apiRules;if(F(e),!p()(e)){let t=(0,d.FI)(e,r);_.current=!0,l({pathname:a,search:i.stringify(t)})}}}))):m.createElement(n.eB,null,m.createElement(n.tD,null,m.createElement(E,{onSubmit:e=>{var t;e&&e.preventDefault();let a=null!=(t=A.pageUrl)?t:"/appName/search",r=p()(R)?{}:{q:R},n={...u(G,h,P,!0),...r};l({pathname:a,search:i.stringify(n)})},"data-testid":"formSearch"},m.createElement(S,{name:"search",value:R,onChange:e=>z(e.target.value),placeholder:N,endAdornment:R?m.createElement(g,{icon:"ico-close",onClick:()=>{z("")}}):null}),m.createElement("button",{type:"submit",className:"srOnly","aria-hidden":"true"}),v&&B&&m.createElement(o.A,{title:c.formatMessage({id:B})},m.createElement(r.N_E,{to:I,sx:{textDecoration:"none!important"}},m.createElement(x,{icon:v}))))))});var b=(0,r.WvA)({extendBlock:y,defaults:{placeholder:"Search",title:"Search Box",blockLayout:"sidebar search box"}})}}]);