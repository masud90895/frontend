"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["dialogs"],{588:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98791),n=a(98982),r=a(76534),l=a(30758);function s(e){let{useDialog:t,compactData:a}=(0,i.PCX)(),{dialogProps:s}=t(),c=a("item_id=:item_id&item_type=:item_type",e);return l.createElement(o.lG,{...s,maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"},l.createElement(n.aI,{keepPaginationData:!0,dialog:!0,dataSource:{apiUrl:`/report-owner/form?${r.stringify(c)}`}}))}},1036:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var i=a(43961),o=a(30758),n=a(15626);function r(e){let{i18n:t}=(0,i.PCX)();return o.createElement(n.A,{apiUrl:"/friend",apiParams:{user_id:e.user_id,view:"mutual",limit:20},pagingId:`mutualFriends/${e.user_id}`,dialogTitle:t.formatMessage({id:"mutual_friends"})})}},6600:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var i=a(43961),o=a(30758),n=a(15626);function r({item_type:e,item_id:t,excluded_ids:a}){let{i18n:r}=(0,i.PCX)();return o.createElement(n.A,{apiUrl:"/feed/tagged-friend",apiParams:{item_type:e,item_id:t,excluded_ids:a,limit:20},pagingId:`tagged-friend/${e}/${t}`,dialogTitle:r.formatMessage({id:"tagged_friends"})})}},10456:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var i=a(43961),o=a(98791),n=a(25304),r=a(89763),l=a.n(r),s=a(30758),c=a(94215),d=a(66607),m=a(13526),u=(0,d.A)(e=>{var t;return(0,c.A)({root:{borderBottom:"1px solid",borderBottomColor:null==(t=e.palette.border)?void 0:t.secondary,padding:e.spacing(2),display:"flex",alignItems:"flex-start","&:hover":{backgroundColor:e.palette.action.hover}},info:{display:"flex",flexDirection:"column"},title:{flex:1,fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary},icon:{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(2),marginTop:e.spacing(.5),color:e.palette.text.secondary},address:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginRight:e.spacing(2)},media:{},active:{color:e.palette.primary.main,"& $icon":{color:e.palette.primary.main}}})})(function({name:e,address:t,classes:a,active:i,onClick:o}){return s.createElement("div",{role:"button","aria-label":"select place","data-testid":"suggestion",className:(0,m.A)([a.root,i&&a.active]),onClick:o},s.createElement(n.s4,{icon:"ico-checkin-o",className:a.icon}),s.createElement("div",{className:a.info},s.createElement("span",{className:(0,m.A)([a.title,i&&a.active])},e),t?s.createElement("div",{className:(0,m.A)([a.address,i&&a.active]),children:t}):null))}),p=(0,a(28606).A)(e=>(0,c.A)({dialog:{},dialogContent:{height:370,padding:`${e.spacing(0,0,2,0)} !important`},inputStage:{padding:e.spacing(2)},btnCancel:{minWidth:e.spacing(3),padding:0,marginRight:e.spacing(1),color:e.palette.text.secondary},searchIcon:{color:e.palette.text.secondary},dialogTitle:{},dialogContentTitle:{color:e.palette.text.secondary,padding:e.spacing(.5,0,.5,2)},mapStage:{}})),g=a(99221),h=a(85481),f=a(1530),v=a(38955),y=a(82645),b=a.n(y);let x=(e,t,a=6)=>{var i,o,n,r;if(!e||!t)return!1;let l=parseFloat(null==e||null==(i=e.lat)?void 0:i.toFixed(a)),s=parseFloat(null==e||null==(o=e.lng)?void 0:o.toFixed(a)),c=parseFloat(null==t||null==(n=t.lat)?void 0:n.toFixed(a)),d=parseFloat(null==t||null==(r=t.lng)?void 0:r.toFixed(a));return l===c&&s===d};var E=function({defaultValue:e}){let t=p(),{useDialog:a,i18n:r}=(0,i.PCX)(),{dialogProps:c,setDialogValue:d}=a(),m=r.formatMessage({id:"search_for_location"}),y=r.formatMessage({id:"search_dots"}),E=s.useRef(),[C,A,w,S,{loading:k}]=function(e,t,a={}){let o="ready"===(0,i.T6y)(),[n,r]=s.useState([]),[l,c]=s.useState({loading:!0,error:!1}),[d,m]=s.useState(),[u,p]=s.useState(""),g=s.useRef(),h=s.useRef(),f=s.useRef(),y=(0,v.A)(),x=s.useRef(null),E=s.useRef(),C=({lat:a,lng:i})=>{if(g.current=new google.maps.Map(e.current,{zoom:15,center:{lat:a,lng:i},backgroundColor:y.palette.background.default}),h.current=new google.maps.places.PlacesService(g.current),E.current=a&&i?new google.maps.LatLng(a,i):void 0,f.current=new google.maps.Geocoder,!(null==t?void 0:t.full_address)&&((null==t?void 0:t.address)||t.name))try{let e={lat:parseFloat(a),lng:parseFloat(i)};S({location:e},e=>{if(e[0]){var a;m({name:(null==t?void 0:t.address)||t.name,full_address:null==(a=e[0])?void 0:a.formatted_address})}})}catch(e){}A()},A=()=>{if(E.current)return void h.current.nearbySearch({location:E.current,radius:50,...a},(e,t)=>{"OK"===t&&x.current&&r(e.filter(e=>e.formatted_address||e.vicinity).map(e=>({icon:e.icon,name:e.name,full_address:e.formatted_address||e.vicinity||"",lat:e.lat||e.geometry.location.lat(),lng:e.lng||e.geometry.location.lng()}))),c(e=>({...e,loading:!1}))});c(e=>({...e,loading:!1}))},w=s.useCallback(()=>{e.current&&!h.current&&o&&(c(e=>({...e,loading:!0})),navigator.geolocation.getCurrentPosition(e=>{C({lat:(null==t?void 0:t.lat)||e.coords.latitude,lng:(null==t?void 0:t.lng)||e.coords.longitude})},()=>{C({lat:(null==t?void 0:t.lat)||0,lng:(null==t?void 0:t.lng)||0})}))},[e,o]),S=s.useCallback((e,t)=>{h.current&&f.current&&f.current.geocode(e,(e,a)=>{"OK"===a&&x.current&&t(e)})},[]),k=s.useMemo(()=>b()(function(e){if(h.current){if(!(null==e?void 0:e.query))return void A();c(e=>({...e,loading:!0})),h.current.textSearch({location:E.current,...e},(e,t)=>{"OK"===t&&x.current?r(e.map(e=>({icon:e.icon,name:e.name,full_address:e.formatted_address,lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}))):c(t=>({...t,extra:e})),c(e=>({...e,loading:!1}))})}},200),[]);return(0,s.useEffect)(()=>(x.current=!0,()=>{x.current=!1}),[]),s.useEffect(()=>{setImmediate(()=>w())},[o]),[n,u,s.useCallback((e,t={})=>{p(e),k({query:e,...a,...t})},[a,k]),d,l]}(E,{...e}),P=e?(null==e?void 0:e.name)&&(null==e?void 0:e.address)&&e.name!==e.address?e:l()({},e,S):{},M=s.useCallback(e=>w(e),[w]);return s.createElement(o.lG,{className:t.dialog,maxWidth:"sm",fullWidth:!0,"data-testid":"dialogLocationPicker",...c},s.createElement(o.L3,{"data-testid":"popupTitle",enableBack:!0,disableClose:!0},m),s.createElement("div",{className:t.inputStage},s.createElement(n.rq,{autoFocus:!0,"data-testid":"searchBox",placeholder:y,onChanged:M})),s.createElement(o.Cf,{className:t.dialogContent},s.createElement(f.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},s.createElement("div",{className:t.dialogContentTitle},r.formatMessage({id:"base_on_your_location"})),s.createElement("div",{className:t.mapStage,ref:E}),(null==P?void 0:P.full_address)&&!A&&s.createElement(u,{active:!0,name:P.name||P.address,address:P.full_address,onClick:()=>{d(!1)}}),k?s.createElement(g.A,{p:2,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}},s.createElement(h.A,{size:24})):s.createElement(g.A,null,!!(null==C?void 0:C.length)&&C.map((e,t)=>{var a;return x(e,P)||x(e,P,1)&&e.name===P.name&&(null==(a=P.address)?void 0:a.includes(e.address))?null:s.createElement(u,{name:e.name,address:e.full_address||e.address,key:t.toString(),onClick:()=>{d({...e,query:A,show_map:!0})}})})))))}},15626:function(e,t,a){a.d(t,{A:function(){return l}});var i=a(43961),o=a(98791),n=a(1530),r=a(30758);function l({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:l}){let{useDialog:s,ListView:c}=(0,i.PCX)(),{dialogProps:d}=s();return r.createElement(o.lG,{...d,maxWidth:"xs",fullWidth:!0},r.createElement(o.L3,null,l),r.createElement(o.Cf,{variant:"fitScroll",sx:{height:"45vh"}},r.createElement(n.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},r.createElement(c,{dataSource:{apiUrl:e,apiParams:t},pagingId:a,canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.itemView.smallCard"}))))}},17181:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98791),n=a(98982),r=a(76534),l=a(30758);function s(e){let{useDialog:t,compactData:a}=(0,i.PCX)(),{dialogProps:s}=t(),c=a("item_id=:item_id&item_type=:item_type&report_owner=:report_owner",e);return l.createElement(o.lG,{...s,maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"},l.createElement(n.aI,{dialog:!0,keepPaginationData:!0,dataSource:{apiUrl:`/report/form?${r.stringify(c)}`}}))}},19255:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98791),n=a(98982),r=a(65663),l=a(30758);function s({id:e}){let{useDialog:t,compactUrl:a}=(0,i.PCX)(),{dialogProps:s}=t(),c=(0,i.IgF)(r.Zt,r.hO,"addItemForm");return c?l.createElement(o.lG,{...s,fullWidth:!0,maxWidth:"xs","data-testid":"addPhotoAlbum"},l.createElement(n.aI,{dialog:!0,dataSource:{apiMethod:c.apiMethod,apiUrl:a(c.apiUrl,{id:e})}})):null}},20005:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var i=a(98791),o=a(43961),n=a(65663),r=a(65888),l=a(55347),s=a(56431),c=a(56332),d=a(30758),m=a(1530),u=a(22463),p=a(52520),g=a(28017),h=a(28606),f=a(94215),v=(0,h.A)(e=>(0,f.A)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseAlbumItemDialog"});let y={spacing:1},b={xs:12,sm:6,md:4,lg:4,xl:4};var x=function({fileItems:e,uploadFiles:t,setFiles:a,isDetailAlbum:i,albumId:n,dataSource:r}){let{jsxBackend:l}=(0,o.PCX)(),s=v(),c=(0,u.A)(),h=(0,p.A)(c.breakpoints.down("sm")),f=l.get("photo.block.photoListingBlock");return d.createElement(m.P,{className:s.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:h?"90vh":352},d.createElement(f,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:r,itemView:"photo.itemView.selectPhotoProfile",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_photos_found"},gridContainerProps:y,gridItemProps:b,itemProps:{fileItems:e,isDetailAlbum:i,albumId:n,onSuccess:e=>{let i=!!t.find(t=>t.id===e.id);a((0,g.Ay)(t,a=>{if(i){let i=t.findIndex(t=>t.id===e.id);a.splice(i,1)}else a.push(e)}))},files:t},blockLayout:"Profile - Clean Body Only",itemLayout:"Photo - Main Card - Listings"}))},E=a(21818),C=a(25304),A=a(41349),w=a(69508),S=a(63027),k=a(89507);let P=(0,w.Ay)("div",{name:"MultipleUploadField",slot:"Root"})(({theme:e})=>({marginTop:e.spacing(3)})),M=(0,w.Ay)(c.A,{name:"DropButton",slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),_=(0,w.Ay)("div",{name:"MultipleUploadField",slot:"PreviewItem"})(({theme:e})=>({width:"100%",paddingBottom:"56%",borderRadius:e.shape.borderRadius,background:e.palette.grey.A700,position:"relative",overflow:"hidden","&::before":{backgroundColor:e.palette.grey.A700,content:'""',display:"block",height:"100%",position:"absolute",width:"100%",borderRadius:e.spacing(1.2)}})),R=(0,w.Ay)("video",{name:"MultipleUploadField",slot:"PreviewVideo"})({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",maxWidth:"100%"}),I=(0,w.Ay)("div",{name:"MultipleUploadField",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),W=(0,w.Ay)("div",{name:"MultipleUploadField",slot:"AddMoreBtnWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",borderColor:e.palette.border.primary,borderStyle:"solid",borderWidth:1,borderRadius:e.shape.borderRadius,height:"100%",button:{width:"100% !important",height:"100% !important"},"&:before":{content:'""',display:"block",paddingBottom:"56%"}})),z=(0,w.Ay)("div",{name:"MultipleUploadField",slot:"PreviewVideoWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"})),L=(0,w.Ay)("div",{name:"MultipleUploadField",slot:"MaskPlay"})(({theme:e})=>({position:"absolute",width:e.spacing(5),height:e.spacing(5),color:"#fff",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"50%",left:"50%",top:"50%",marginLeft:e.spacing(-2.5),marginTop:e.spacing(-2.5),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.mixins.pxToRem(24)}));var N=function({config:e,uploadFiles:t,setFiles:a,checkFilesSize:i}){let{accept:n}=e,{i18n:r,getSetting:l}=(0,o.PCX)(),s=(0,d.useRef)(),c=(0,u.A)(),g=(0,p.A)(c.breakpoints.down("sm")),h=l("photo.photo_allow_uploading_video_to_photo_album");return t=t.filter(e=>!e.id),d.createElement(m.P,{autoHide:!0,autoHeight:!0,autoHeightMax:g?"90vh":352},d.createElement(P,null,d.createElement("input",{ref:s,type:"file","aria-hidden":!0,className:"srOnly",multiple:!0,accept:n,onChange:()=>{let e=s.current.files;e.length&&i(Object.values(e))}}),d.createElement(S.Ay,{container:!0,columnSpacing:1,rowSpacing:1},d.createElement(S.Ay,{item:!0,sm:6,md:4},d.createElement(W,null,d.createElement(M,{size:"large",color:"primary",startIcon:d.createElement(C.s4,{icon:"ico-photos-plus-o"}),sx:{fontWeight:"bold"},onClick:()=>{s.current.click()}},h?r.formatMessage({id:"select_files"}):r.formatMessage({id:"add_photos"})))),null==t?void 0:t.map((e,t)=>{var i;let o=(0,A.EL)(null==e||null==(i=e.file)?void 0:i.type)||(null==e?void 0:e.module_name)==="video",n=!A.un&&o;return d.createElement(S.Ay,{item:!0,key:e.uid,sm:6,md:4,xs:6},d.createElement(_,null,o?d.createElement(z,null,n?d.createElement(R,{src:null==e?void 0:e.source,controls:!1}):d.createElement(E.A,{item:e}),d.createElement(L,null,d.createElement(C.s4,{icon:"ico-play"}))):d.createElement(E.A,{item:e}),d.createElement(k.A,{title:r.formatMessage({id:"remove"})},d.createElement(I,{onClick:()=>{let t;return t=e.uid,a(e=>e.filter(e=>e.uid!==t))}},d.createElement(C.s4,{icon:"ico-close"})))))}))))},D=a(52260);function F({config:e,fileItems:t,setFileItems:a,isDetailAlbum:m=!1,formik:u}){var p,g,h,f,y,b;let{useDialog:E,i18n:C,compactData:A}=(0,o.PCX)(),{dialogProps:w,closeDialog:S}=E(),k=v(),{dialogTitle:P,max_upload_filesize:M,upload_url:_,isVideoUploadAllowed:R,acceptFail:I,allowUploadItems:W=!0}=e||{},[z,L]=d.useState(+!W),[F,T,B]=(0,D.A)({initialValues:[],upload_url:_,maxSizeLimit:M,isAcceptVideo:R,messageAcceptFail:I}),H=(0,o.IgF)(n.Zt,"photo_album","selectFromMyPhotos"),{apiUrl:$,apiParams:O}=(0,o.IgF)(n.Zt,"photo_album","selectFromGroupPhotos");return d.createElement(i.lG,{...w,maxWidth:!1,fullWidth:!0,className:k.dialog},d.createElement(i.L3,{className:k.dialogTitle},P||C.formatMessage({id:"add_photos_video"})),d.createElement(i.Cf,{className:k.dialogContent,sx:{overflow:"hidden !important"}},d.createElement(r.A,{value:z,onChange:(e,t)=>{L(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},W?d.createElement(l.A,{value:0,className:k.tab,disableRipple:!0,label:C.formatMessage({id:"upload"})}):null,d.createElement(l.A,{value:1,className:k.tab,disableRipple:!0,label:C.formatMessage({id:"select_from_my_photos"})}),u&&((null==u||null==(p=u.values)?void 0:p.owner_type)==="group"||(null==u||null==(g=u.values)?void 0:g.owner_type)==="page")&&d.createElement(l.A,{value:2,className:k.tab,disableRipple:!0,label:C.formatMessage({id:"select_from_owner_type_photos"},{owner_type:null==u||null==(h=u.values)?void 0:h.owner_type})})),0===z&&d.createElement(N,{config:e,uploadFiles:F,setFiles:T,checkFilesSize:e=>B(e,F)}),1===z&&d.createElement(x,{fileItems:t,uploadFiles:F,setFiles:T,isDetailAlbum:m,albumId:null==u||null==(f=u.values)?void 0:f.album,dataSource:H}),2===z&&d.createElement(x,{fileItems:t,uploadFiles:F,setFiles:T,isDetailAlbum:m,albumId:null==u||null==(y=u.values)?void 0:y.album,dataSource:{apiUrl:$,apiParams:A(O,{user_id:null==u||null==(b=u.values)?void 0:b.owner_id})}})),d.createElement(s.A,null,d.createElement(c.A,{"data-testid":"buttonSubmit",role:"button",id:"buttonSubmit",autoFocus:!0,color:"primary",size:"medium",variant:"contained",onClick:()=>{a([...t,...F.map(e=>({...e,status:e.status||"update"}))]),S(),m&&setImmediate(u.submitForm)},sx:{minWidth:120},disabled:!F.length},C.formatMessage({id:"add_to_album"}))))}},21190:function(e,t,a){a.r(t);var i=a(43961),o=a(25304),n=a(30758);t.default=function(e){let{i18n:t}=(0,i.PCX)(),[a,r]=(0,i.Pth)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[l,s]=n.useState(e.value),c=n.useCallback(e=>{s(e)},[]);return n.createElement(o._Q,{placeholder:t.formatMessage({id:"search_friend"}),dialogTitle:t.formatMessage({id:"select_friend"}),items:a.items,loading:a.loading,onSelectItem:c,selectedItem:l,onChanged:r,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},"data-testid":"popupFriendPicker",...e})}},21818:function(e,t,a){var i=a(41349),o=a(69508),n=a(30758);let r=(0,o.Ay)("div",{name:"MultipleUploadField",slot:"PreviewImg",shouldForwardProp:e=>"radio"!==e})(({theme:e,radio:t})=>({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:e.palette.grey.A700,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"auto 100%",maxWidth:"100%",...t&&"horizontal"===t&&{backgroundSize:"cover"}}));t.A=({item:e})=>{let[t,a]=n.useState({}),o=(null==e?void 0:e.source)||e.image_url||(0,i.AE)(null==e?void 0:e.image,"1024");n.useEffect(()=>{try{let e=new Image;e.src=o,e.onload=()=>{a({height:e.height,width:e.width})},e.onerror=e=>{}}catch(e){}},[]);let l="horizontal";return l=t&&t.width/t.height<=1?"vertical":"horizontal",n.createElement(r,{radio:l,style:{backgroundImage:`url(${o})`}})}},25829:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=a(43961),o=a(98791),n=a(30758),r=a(25304),l=a(69508);let s="MenuItem",c=(0,l.Ay)("div",{name:s,slot:"itemRoot"})(({theme:e})=>({fontSize:"1rem",padding:e.spacing(1,2),cursor:"pointer","&:hover":{backgroundColor:e.palette.action.selected}})),d=(0,l.Ay)(r.s4,{name:s,slot:"itemIcon"})(({theme:e})=>({width:e.spacing(4),display:"inline-block"}));function m({item:e,onClick:t}){return n.createElement(c,{onClick:t},n.createElement(d,{icon:e.icon}),n.createElement("span",null,e.label))}function u(e){let{i18n:t,dispatch:a}=(0,i.PCX)(),{dialogProps:r,closeDialog:l}=(0,o.sp)(),{shareOptions:s,identity:c}=e,d=n.useCallback(e=>{a({type:e,payload:{identity:c}}),l()},[l,a,c]);return n.createElement(o.lG,r,n.createElement(o.L3,null,t.formatMessage({id:"share"})),n.createElement(o.Cf,{sx:{minWidth:360,px:0,py:1}},s.map((e,t)=>n.createElement(m,{item:e,onClick:()=>d(e.value),key:t.toString()}))))}},26342:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(43961),o=a(98791),n=a(30758),r=a(54879),l=a(99221),s=a(86725),c=a(25304);function d({title:e,formName:t="login_popup"}){let{useDialog:a}=(0,i.PCX)(),{dialogProps:d,closeDialog:m}=a();return n.createElement(o.lG,{...d,maxWidth:"xs",fullWidth:!0},n.createElement(l.A,{py:3},n.createElement(s.A,{sx:{position:"absolute",top:8,right:8},onClick:m},n.createElement(c.s4,{icon:"ico-close"})),n.createElement(r.A,{submitAction:"@loginFromDialog",formName:t,title:e})))}},28016:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var i=a(43961),o=a(98791),n=a(90673),r=a(22721),l=a(72735),s=a(56431),c=a(56332),d=a(89763),m=a.n(d),u=a(4239),p=a.n(u),g=a(30758),h=a(32758),f=a(25304);function v({title:e,message:t,positiveButton:a,maxWidth:d="sm",disableClose:u=!1,onClose:v}){let{useDialog:y,i18n:b}=(0,i.PCX)(),{setDialogValue:x,disableBackdropClick:E,dialogProps:C,closeDialog:A}=y();g.useEffect(()=>{E(!0)},[]);let{label:w,...S}=m()({label:b.formatMessage({id:"ok"}),color:"primary"},a);return e=null!=e?e:b.formatMessage({id:"alert"}),g.createElement(n.A,{...C,fullScreen:!1,"data-testid":"popupAlert",role:"alertdialog",maxWidth:d,fullWidth:!0,"aria-modal":!0,disableEscapeKeyDown:!0,variant:"alert"},g.createElement(o.L3,{children:null!=e?e:"Alert",disableClose:u,onCancel:()=>{A(),v&&v()}}),g.createElement(r.A,{dividers:!1},p()(t)?g.createElement(l.A,{id:"dialogDescription","data-testid":"popupMessage",paragraph:!1},g.createElement(f.np,{mt:0},g.createElement(h.Ay,{html:t}))):t),g.createElement(s.A,null,g.createElement(c.A,{"data-testid":"buttonSubmit",role:"button",id:"buttonSubmit",autoFocus:!0,color:"primary",size:"medium",variant:"contained",onClick:()=>x(!0),sx:{minWidth:120},disableRipple:!0,...S},w)))}},28711:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var i=a(43961),o=a(98791),n=a(98982),r=a(30758);function l({title:e="Edit",maxWidth:t="sm",fullWidth:a=!0,...l}){let{useDialog:s}=(0,i.PCX)(),c=s(),{dialogProps:d}=c;return r.createElement(o.lG,{...d,maxWidth:t,fullWidth:a,"data-testid":"multiStepFormDialog"},r.createElement(n.FF,{dialog:!0,dialogTitle:e,dialogItem:c,...l}))}},30685:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=a(43961),o=a(98791),n=a(98982),r=a(35797),l=a.n(r),s=a(2687),c=a.n(s),d=a(30758);function m({initialValues:e,formUrl:t,isEdit:a}){let{useDialog:r}=(0,i.PCX)(),{dialogProps:s,setDialogValue:m}=r(),u=c()(e);return l()(u,"submit"),d.createElement(o.lG,{...s,maxWidth:"sm",fullWidth:!0},d.createElement(n.aI,{initialValues:u,dataSource:{apiUrl:t||"/poll/status-form",apiParams:{is_edit:a}},onSubmit:m,dialog:!0}))}},32183:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var i=a(43961),o=a(90673),n=a(30758),r=a(98982);function l({config:e}){let{action_name:t,onSubmit:a,formValues:l={},onCancel:s}=e||{},{useDialog:c,dispatch:d}=(0,i.PCX)(),{setDialogResolveValue:m,setDialogValue:u,dialogProps:p,forceClose:g,disableBackdropClick:h}=c(),f=(0,i.IgF)("captcha","captcha","getVerifyForm"),v=n.useMemo(()=>l,[]);n.useEffect(()=>{h(!0)},[]);let y=()=>{u(null),s&&s()};return n.createElement(o.A,{...p,fullScreen:!1,"data-testid":"dialogCaptchaImage",maxWidth:"xs",fullWidth:!0,"aria-modal":!0,onCancel:y},n.createElement(r.aI,{dataSource:f,onSubmit:a||((e,t)=>{m({...e,formValues:v}),d({type:"@waitingCaptchaImage/start",payload:{form:t,forceClose:g}})}),onCancel:y,pageParams:{action_name:t,auto_focus:!0},navigationConfirmWhenDirty:!1,dialog:!0}))}},33587:function(e,t,a){a.r(t);var i=a(43961),o=a(98791),n=a(69508),r=a(30758);let l="BlogViewDialog",s=(0,n.Ay)(o.Cf,{name:l,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),c=(0,n.Ay)("div",{name:l,slot:"root"})(({theme:e})=>({width:"100%",maxWidth:"100%"}));t.default=(0,i.G5k)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:n,useIsMobile:l,i18n:d}=(0,i.PCX)(),{dialogProps:m}=a(),u=n.get("blog.block.blogView"),p=l();return e?r.createElement(o.lG,{...m,maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"},r.createElement(o.L3,{enableBack:p,disableClose:p},d.formatMessage({id:"blog"})),r.createElement(s,null,r.createElement(c,null,r.createElement(u,{item:e,identity:t,isModalView:!0})))):null})},37510:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98791),n=a(30758),r=a(99221),l=a(56332);function s({id:e}){let{useDialog:t,i18n:a}=(0,i.PCX)(),{setDialogValue:s,dialogProps:c}=t();return n.createElement(o.lG,{...c,fullWidth:!0,maxWidth:"xs","data-testid":"androidSupportChoosePhoto"},n.createElement(o.L3,null,a.formatMessage({id:"choose"})),n.createElement(o.Cf,null,n.createElement(r.A,{sx:{display:"flex",flexDirection:"column","& > button:not(:last-of-type)":{marginBottom:e=>e.spacing(2)}}},n.createElement(l.A,{role:"button",autoFocus:!0,variant:"contained",disableRipple:!0,size:"medium",color:"primary",onClick:()=>{s("photo")}},a.formatMessage({id:"choose_from_library"})),n.createElement(l.A,{role:"button",autoFocus:!0,variant:"outlined",disableRipple:!0,size:"medium",color:"primary",onClick:()=>{s("camera")}},a.formatMessage({id:"take_a_photo"})))))}},39972:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var i=a(94215),o=a(66607),n=a(43961),r=a(98791),l=a(1530),s=a(22721),c=a(99221),d=a(56332),m=a(28017),u=a(20644),p=a.n(u),g=a(30758),h=a(25304),f=a(52065),v=a(63383);function y({variant:e="outlined",setItems:t,items:a,parentUser:i,icon:o="ico-photos-plus-o"}){let{i18n:r}=(0,n.PCX)(),l=g.useRef(),[s]=(0,f.A)({parentUser:i}),{acceptTypes:c}=(0,v.A)({parentUser:i}),m=g.useCallback(()=>{var e;null==l||null==(e=l.current)||e.click()},[l]);return g.createElement(g.Fragment,null,g.createElement(d.A,{color:"primary",onClick:m,variant:e,startIcon:g.createElement(h.s4,{icon:o})},r.formatMessage({id:"add_photos"})),g.createElement("input",{onChange:()=>{var e;s(null==l||null==(e=l.current)?void 0:e.files,a,e=>{t(e)}),(null==l?void 0:l.current)&&(l.current.value=null)},multiple:!0,ref:l,className:"srOnly",type:"file",accept:c}))}var b=a(41349),x=a(69508),E=a(36694),C=a(13526),A=a(45940),w=a(32501);let S="photo";var k=a(85333);let P=(0,x.Ay)(h.s4,{name:"PreviewPhotosDialogItemPhoto",slot:"CustomPlayButton"})(({theme:e})=>({position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fontSize:"64px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.3)",color:"#fff",borderTopLeftRadius:e.spacing(1),borderTopRightRadius:e.spacing(1)}));function M({id:e,index:t,item:a,movePhoto:i,editItem:o,editPhoto:r,removeItem:l,tagItem:s,editTextPhoto:d,classes:m,hideRemove:u,isEdit:p}){var f,v,y,x,M,_;let{i18n:R,useSession:I,ParserPreviewPhoto:W}=(0,n.PCX)(),z=g.useRef(null),{user:L}=I(),[N,D]=g.useState(null!=(_=null==a?void 0:a.text)?_:""),[F,T]=g.useState(!1),B=g.useMemo(()=>{let e=null==a?void 0:a.thumbnail;if(null==e?void 0:e.image)return(0,b.AE)(null==e?void 0:e.image,"500")},[null==a?void 0:a.thumbnail]),[H,$]=g.useState(B);g.useEffect(()=>{let e=null==a?void 0:a.thumbnail;if(!(null==e?void 0:e.file))return void $((null==e?void 0:e.image)?(0,b.AE)(null==e?void 0:e.image,"500"):void 0);(0,k.t)(null==e?void 0:e.file,e=>{$(e)})},[null==a||null==(f=a.thumbnail)?void 0:f.file,null==a||null==(v=a.thumbnail)?void 0:v.image]);let[,O]=(0,A.H)({accept:S,hover(e,a){var o;if(!z.current)return;let n=e.index;if(n===t)return;let r=null==(o=z.current)?void 0:o.getBoundingClientRect(),l=(r.bottom-r.top)/2,s=a.getClientOffset().y-r.top;(!(n<t)||!(s<l))&&(n>t&&s>l||(i(n,t),e.index=t))}}),X=g.useCallback(e=>{D(e.target.value)},[]),V=g.useCallback(e=>{d(a,e.target.value)},[d,a]),[j,U]=(0,w.i)({type:S,item:{type:S,id:e,index:t},collect:e=>({isDragging:e.isDragging()})}),G=j.isDragging?.5:.9999,Z=j.isDragging?"isDragging":"";U(O(z));let Y=g.useCallback(()=>{T(!0)},[]),q=g.useCallback(e=>{r(a,e),T(!1)},[a,r]),J=g.useCallback(e=>{D(null==e?void 0:e.text)},[]);if(!a)return;let K=(null==a?void 0:a.uid)?null==L||null==(y=L.extra)?void 0:y.can_tag_friend_on_photo:null==a||null==(x=a.extra)?void 0:x.can_tag_friend,Q=(0,b.EL)(null==(M=a.file)?void 0:M.type)||(null==a?void 0:a.type)==="video"||(null==a?void 0:a.resource_name)==="video",ee=!b.un&&Q&&!H;return g.createElement("div",{"data-uid":a.uid,style:{cursor:p?"default":"move",opacity:G},ref:p?null:z,className:(0,C.A)(m.itemRoot,Z?m.isDragging:"")},g.createElement("div",{className:m.itemMediaContainer},g.createElement("div",{className:m.itemMediaBackdrop},Q?ee?g.createElement(g.Fragment,null,g.createElement("div",{className:m.itemBlur},g.createElement("video",{src:a.source||a.destination,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:m.itemBlurImg})),g.createElement("video",{src:a.source||a.destination,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:m.itemMedia}),g.createElement(P,{icon:"ico-play-circle-o"})):g.createElement(g.Fragment,null,g.createElement("div",{className:m.itemBlur},g.createElement("img",{draggable:!1,src:H||a.source||a.destination,className:m.itemBlurImg,alt:a.uid})),g.createElement(c.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderTopLeftRadius:e=>e.shape.borderRadius,borderTopRightRadius:e=>e.shape.borderRadius,overflow:"hidden"}},g.createElement("img",{draggable:!1,src:H||a.source||a.destination,className:m.itemMedia,alt:a.uid}),g.createElement(P,{icon:"ico-play-circle-o"}))):g.createElement(g.Fragment,null,g.createElement("div",{className:m.itemBlur},g.createElement("img",{draggable:!1,src:a.base64||a.source||(0,b.AE)(null==a?void 0:a.image),className:m.itemBlurImg,alt:a.uid})),g.createElement(W,{item:a,onParse:q,onError:()=>l(a),onStartParseFile:Y,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderTopLeftRadius:e=>e.shape.borderRadius,borderTopRightRadius:e=>e.shape.borderRadius,overflow:"hidden"}},g.createElement("img",{draggable:!1,src:a.base64||a.source||(0,b.AE)(null==a?void 0:a.image),className:m.itemMedia,alt:a.uid}))),F?null:g.createElement(g.Fragment,null,g.createElement(c.A,{className:(0,C.A)(m.editButton,m.autoHideButton)},g.createElement(h.Bj,{size:"small",color:"primary",icon:"ico-pencil",onClick:()=>o(a,J),title:R.formatMessage({id:"edit"})})),K&&!Q?g.createElement(c.A,{className:(0,C.A)(m.tagButton)},g.createElement(h.Bj,{onClick:()=>s(a),size:"small",color:"primary",icon:"ico-price-tag",title:R.formatMessage({id:"tag_friends"})})):null),u?null:g.createElement(c.A,{className:(0,C.A)(m.closeButton,m.autoHideButton)},g.createElement(h.Bj,{size:"small",onClick:()=>l(a),color:"primary",icon:"ico-close",title:R.formatMessage({id:"remove"})})))),g.createElement("div",{className:m.itemComposerContainer},g.createElement(E.A,{value:N,variant:"outlined",placeholder:R.formatMessage({id:"caption"}),fullWidth:!0,disabled:F,InputLabelProps:{shrink:!0},className:m.itemComposer,onChange:X,onBlur:V})))}var _=(0,o.A)(e=>(0,i.A)({dialogTitle:{},dialogContent:{backgroundColor:e.palette.background.default,minWidth:550,minHeight:500},dialogActions:{},itemListContainer:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),justifyContent:"space-between"},isDragging:{},itemRoot:{width:"calc(50% - 8px)",backgroundColor:e.mixins.backgroundColor("paper"),marginBottom:e.spacing(2),borderRadius:e.shape.borderRadius,boxShadow:e.shadows[2],"&:hover $autoHideButton":{visibility:"visible"},"&$isDragging":{border:"dashed 2px",borderColor:e.palette.primary.main}},itemMediaBackdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",height:"33vh",borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},itemBlur:{width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"},itemBlurImg:{objectFit:"cover",width:"100%",height:"100%",border:0},itemMediaContainer:{position:"relative",textAlign:"center"},itemMedia:{position:"absolute",objectFit:"contain",left:0,top:0,width:"100%",height:"100%"},itemComposerContainer:{padding:e.spacing(1)},itemComposer:{},autoHideButton:{visibility:"hidden"},closeButton:{position:"absolute",top:e.spacing(2),right:e.spacing(2)},tagButton:{position:"absolute",bottom:e.spacing(2),left:e.spacing(2)},editButton:{position:"absolute",left:e.spacing(2),top:e.spacing(2)}}))(function({composerRef:e,classes:t,dialogTitle:a="edit_media",isEdit:i,parentUser:o,postAsParent:u}){let{useDialog:h,i18n:f,dialogBackend:v,useIsMobile:b}=(0,n.PCX)(),{dialogProps:x,closeDialog:E}=h(),[C,A]=g.useState(p()(e.current.state,"attachments.photo.value")),w=C.length,S=b();g.useEffect(()=>{C.length?e.current.setAttachments("photo","photo",{as:"StatusComposerControlAttachedPhotos",value:C}):e.current.removeAttachments()},[e,C]);let k=g.useCallback((e,t)=>{A((0,m.Ay)(C,a=>{let i=a.find(t=>(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id));i&&Object.assign(i,t)}))},[C]),P=g.useCallback((e,t)=>{v.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!1,postAsParent:u,parentUser:o}}).then(a=>{a&&(t&&t(a),k(e,a))})},[v,k]),_=g.useCallback(e=>{A(t=>t.filter(t=>t.uid!==e.uid||t.id!==e.id))},[]),R=g.useCallback(e=>{v.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!0,postAsParent:u,parentUser:o}}).then(t=>{t&&k(e,t)})},[v,k]),I=g.useCallback((e,t)=>{let a=C[e];A((0,m.Ay)(C,i=>{i.splice(e,1),i.splice(t,0,a)}))},[C]),W=g.useCallback((e,t)=>{A(a=>(0,m.Ay)(a,a=>{let i=a.find(t=>(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id));i&&(i.text=t)}))},[]);return g.createElement(r.lG,{...x,fullWidth:!0},g.createElement(r.L3,{className:t.dialogTitle},f.formatMessage({id:a})),g.createElement(s.A,{dividers:!0,sx:{p:0}},g.createElement(l.P,{autoHide:!0,autoHeight:!0,autoHeightMax:S?"100%":"400px",className:t.dialogContent},g.createElement("div",{className:t.itemListContainer},w?C.map((e,a)=>g.createElement(M,{key:e.uid||`k${null==e?void 0:e.id}`,index:a,id:e.uid,movePhoto:I,item:e,editItem:P,editPhoto:k,removeItem:_,tagItem:R,classes:t,editTextPhoto:W,hideRemove:!!i&&1===w,isEdit:i})):g.createElement(c.A,{p:3,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},g.createElement(y,{setItems:A,items:C,parentUser:o}))))),g.createElement(r.ii,{className:t.dialogActions},g.createElement(d.A,{variant:"contained",color:"primary",onClick:E},f.formatMessage({id:"done"})),g.createElement(y,{setItems:A,items:C,parentUser:o,icon:"ico-plus"})))})},41477:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98791),n=a(25304),r=a(56332),l=a(30758);function s(e){let{i18n:t,useSession:a}=(0,i.PCX)(),{user:s}=a(),{dialogProps:c}=(0,o.sp)();return l.createElement(o.lG,c,l.createElement(o.L3,null,t.formatMessage({id:"share"})),l.createElement(o.Cf,{sx:{minWidth:600,maxWidth:"100%"}},l.createElement("div",null,l.createElement(n.H8,{user:s,size:40,noLink:!0})),"This features is coming soon!"),l.createElement(o.ii,null,l.createElement(r.A,{style:{minWidth:160},variant:"contained",color:"primary",size:"medium"},t.formatMessage({id:"share"}))))}},41509:function(e,t,a){a.r(t);var i=a(98791),o=a(43961),n=a(99221),r=a(85481),l=a(69508),s=a(30758);let c=(0,l.Ay)(i.Cf,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}}));t.default=({dataSource:e,pageParams:t})=>{let{useDialog:a,i18n:l,useFetchItems:d,jsxBackend:m}=(0,o.PCX)(),u=m.get("FeedHistoryItem"),{dialogProps:p}=a(),[g,h]=d({dataSource:e,pageParams:t,data:[]});return s.createElement(i.lG,{...p,"data-testid":"dialogStatusComposer",maxWidth:"sm",fullWidth:!0},s.createElement(i.L3,null,l.formatMessage({id:"edit_history"})),s.createElement(c,null,h?s.createElement(n.A,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(r.A,{size:16})):null,g&&g.length?s.createElement(n.A,{mt:2},g.map(e=>s.createElement(n.A,{mb:3,key:`k${e.id}`},s.createElement(u,{item:e})))):null))}},44686:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(43961),o=a(30758),n=a(98791),r=a(1530),l=a(41349),s=a(3635);function c(e){let{i18n:t,useDialog:a,ListView:c,useIsMobile:d}=(0,i.PCX)(),m=d(),{dialogProps:u}=a(),p=(0,i.IgF)(s.RO,s.RO,"taggedFriends");if(!p)return null;let g={apiParams:(0,l.A8)(e,p.apiParams),apiUrl:p.apiUrl};return o.createElement(n.lG,{...u,maxWidth:"xs",fullWidth:!0},o.createElement(n.L3,null,t.formatMessage({id:"tagged_friends"})),o.createElement(n.Cf,null,o.createElement(r.P,{autoHide:!0,autoHeight:!0,autoHeightMax:m?"100%":300},o.createElement(c,{dataSource:g,canLoadMore:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.itemView.smallCard",canLoadSmooth:!0,numberOfItemsPerPage:10}))))}},48090:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(98791),o=a(43961),n=a(1530),r=a(25304),l=a(52520),s=a(86725),c=a(65888),d=a(55347),m=a(22463),u=a(30758),p=a(28606),g=a(94215),h=(0,p.A)(e=>(0,g.A)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseCoverPhoto"}),f=a(65663);let v={spacing:1},y={xs:12,sm:6,md:4,lg:4,xl:4};function b({identity:e,onSuccess:t,onFailure:a}){let{useDialog:p,i18n:g,jsxBackend:b,compactData:x}=(0,o.PCX)(),{dialogProps:E,closeDialog:C}=p(),A=h(),w=u.useRef(),S=b.get("photo.block.photoListingBlock"),[k,P]=u.useState(50);u.useEffect(()=>{setTimeout(()=>{var e,t;let a=null==(t=w.current)||null==(e=t.getBoundingClientRect())?void 0:e.height;a&&P(a)},100)},[]);let[M,_]=u.useState(0),[R,I]=u.useState(0),[W,z]=u.useState(""),[L,N]=u.useState(""),D=(0,m.A)(),F=(0,l.A)(D.breakpoints.down("sm")),T=(0,o.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhoto")||{},B=(0,o.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhotoFromAlbum")||{},H=(0,o.IgF)(f.Zt,f.hO,"chooseAvatarCoverAlbum")||{apiUrl:"/photo-album"},$=e.split(".")[0],O=e.split(".")[3],X={close:C,onSuccess:t,onFailure:a,resource_name:$},V=`setCover/photo/${$}/${O}`,j={...T,apiParams:x(T.apiParams,{user_id:O})},U=`setCover/album/${$}/${O}`,G={...H,apiParams:x(H.apiParams,{user_id:O})},Z=`setCover/photo-album/${$}/${L}/${O}`,Y={...B,apiParams:x(B.apiParams,{album_id:L})};return u.createElement(i.lG,{...E,maxWidth:!1,fullWidth:!0,className:A.dialog},u.createElement(i.L3,{className:A.dialogTitle},1===R&&u.createElement(s.A,{size:"small",className:A.btnBack},u.createElement(r.s4,{icon:"ico-arrow-left",onClick:()=>I(0)})),0===R?g.formatMessage({id:"choose_from_photos"}):W),0===R&&u.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(c.A,{value:M,ref:w,onChange:(e,t)=>{_(t)},indicatorColor:"primary",textColor:"primary"},u.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"latest_photos"})}),u.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"albums"})})),0===M&&u.createElement(n.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:F?"100%":352,style:{height:F?`calc(100% - ${k}px)`:"auto"}},u.createElement(S,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:j,pagingId:V,itemView:"photo.itemView.choosePhoto",emptyPageProps:{title:"no_all_photo_found"},emptyPage:"core.block.no_content",gridContainerProps:v,gridItemProps:y,itemProps:X,blockLayout:"Profile - Clean Body Only"})),1===M&&u.createElement(n.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:F?"100%":352,style:{height:F?`calc(100% - ${k}px)`:"auto"}},u.createElement(S,{canLoadMore:!0,canLoadSmooth:!0,dataSource:G,clearDataOnUnMount:!0,pagingId:U,emptyPage:"core.block.no_content",itemView:"photo_album.itemView.chooseCoverPhoto",emptyPageProps:{title:"no_albums_found"},gridContainerProps:v,gridItemProps:y,itemProps:{setId:e=>N(e),setStep:e=>I(e),setName:e=>z(e)},blockLayout:"Profile - Clean Body Only"}))),1===R&&u.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(n.P,{className:A.scrollAlbum,autoHide:!0,autoHeight:!0,autoHeightMax:F?"100%":400,style:{height:F?"100%":"auto"}},u.createElement(S,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:Y,pagingId:Z,emptyPage:"core.block.no_content",itemView:"photo.itemView.choosePhoto",emptyPageProps:{title:"no_all_photo_found"},gridContainerProps:v,gridItemProps:y,itemProps:X,blockLayout:"Profile - Clean Body Only"}))))}},51411:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var i=a(43961),o=a(98791),n=a(56332),r=a(30758);function l(){let{i18n:e,theme:t,useDialog:a}=(0,i.PCX)(),{closeDialog:l,dialogProps:s}=a();return r.createElement(o.lG,{...s,maxWidth:"sm",fullWidth:!0},r.createElement(o.L3,{id:"alert-dialog-title"},e.formatMessage({id:"layout_inspect_theme"})),r.createElement(o.Cf,null,r.createElement("pre",null,JSON.stringify(t,null,"  "))),r.createElement(o.ii,null,r.createElement(n.A,{onClick:l,color:"primary",autoFocus:!0,children:e.formatMessage({id:"ok"})})))}},51889:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=a(43961),o=a(98791),n=a(25304),r=a(69508),l=a(12695),s=a(13526),c=a(30758),d=a(28606),m=a(94215);let u=(0,d.A)(e=>(0,m.A)({root:{display:"flex",position:"relative"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},searchFocused:{border:e.mixins.border("primary"),background:"none"},searchIcon:{top:0,width:e.mixins.pxToRem(32),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"all .2s ease",cursor:"pointer"},searchIconFocused:{color:e.palette.primary.main},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,2,1,0),boxSizing:"border-box",paddingLeft:"30px !important",transition:"all .2s ease",width:"100%",height:e.mixins.pxToRem(32)}}),{name:"SearchInModule"});var p=a(76534);let g=(0,r.Ay)(l.Ay)(({theme:e})=>({"& input":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));function h({title:e,placeholder:t,item:a,params:r}){let{useDialog:l,navigate:d}=(0,i.PCX)(),{dialogProps:m,closeDialog:h}=l(),f=u(),[v,y]=(0,c.useState)(!1),[b,x]=(0,c.useState)("");return c.createElement(o.lG,{...m,maxWidth:"sm",fullWidth:!0,fullScreen:!1,"data-testid":"dialogSearchInApp"},c.createElement(o.L3,null,c.createElement("div",{className:f.titleDialog},e)),c.createElement(o.Cf,{className:f.root},c.createElement("div",{className:(0,s.A)(f.searchIcon,v&&f.searchIconFocused)},c.createElement(n.s4,{icon:"ico-search-o"})),c.createElement(g,{placeholder:t,classes:{root:f.inputRoot,input:f.inputInput},value:b,name:"searchBox",autoComplete:"off",autoCapitalize:"off",inputProps:{"aria-label":"search","data-testid":"search_box_in_module"},onFocus:()=>{y(!0)},onChange:e=>{let{value:t}=e.target;x(t)},onKeyDown:e=>{13===(null==e?void 0:e.keyCode)&&(e.preventDefault(),(()=>{let e=b.trim();if(!e)return;let{id:t,module_name:i}=a;d({pathname:`/${i}/search/${t}`,search:p.stringify({q:e,...r})}),h()})())},onBlur:()=>{y(!1)}})))}},52179:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(43961),o=a(98791),n=a(30758),r=a(28606),l=a(94215);let s=(0,r.A)(e=>(0,l.A)({root:{padding:"0 !important",overflowY:"visible",display:"flex"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},contentWrapper:{width:"100%",maxWidth:"100%"}}),{name:"MuiPollViewModal"});var c=(0,i.G5k)(function({item:e,identity:t}){let a=s(),{useDialog:r,jsxBackend:l,useIsMobile:c,i18n:d}=(0,i.PCX)(),{dialogProps:m}=r(),u=l.get("poll.block.pollView"),p=c();return e?n.createElement(o.lG,{...m,maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"},n.createElement(o.L3,{enableBack:p,disableClose:p},d.formatMessage({id:"poll"})),n.createElement(o.Cf,{className:a.root},n.createElement("div",{className:a.contentWrapper},n.createElement(u,{item:e,identity:t,isModalView:!0})))):null})},52260:function(e,t,a){a.d(t,{A:function(){return d}});var i=a(43961),o=a(30758),n=a(4633),r=a.n(n),l=a(1384),s=a.n(l),c=a(41349);function d({initialValues:e,upload_url:t="",maxSizeLimit:a,isAcceptVideo:n=!0,messageAcceptFail:l,accept:d,inputRef:m,storage_id:u}){var p,g,h,f;let{dialogBackend:v,i18n:y}=(0,i.PCX)(),[b,x]=o.useState(e||[]),E=null!=(g=null!=(p=null==a?void 0:a.photo)?p:null==a?void 0:a.other)?g:0,C=null!=(f=null!=(h=null==a?void 0:a.video)?h:null==a?void 0:a.other)?f:0;return[b,x,(e,a)=>{let i=[];if(r()(e))return;let o=[];for(let a=0;a<e.length;++a){let r=e[a],p=r.size,g=(0,c.EL)(null==r?void 0:r.type)?C:E,h=(0,c.ti)(r),f={id:0,uid:s()(),source:URL.createObjectURL(r),file_name:r.name,file_size:r.size,file_type:r.type,file:r,upload_url:t,storage_id:u,type:h.match("image/*")?"photo":"video",status:"new"};if("video"===f.type&&!n||!(0,c.HH)((0,c.ti)(r),d)){v.alert({message:l||y.formatMessage({id:"file_accept_type_fail"})}),(null==m?void 0:m.current)&&(m.current.value=null);break}p>g&&0!==g?(f.max_size=g,o.push(f)):i.push(f)}if(i.length&&x(e=>[...a||e,...i]),o.length>0){var p;v.alert({message:1===o.length?y.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,c.Tu)(o[0].file_name,30),fileSize:(0,c.lT)(o[0].file_size),maxSize:(0,c.lT)(null==(p=o[0])?void 0:p.max_size)}):y.formatMessage({id:"warning_upload_limit_multi_file"},{numberFile:o.length,photoMaxSize:(0,c.lT)(E),videoMaxSize:(0,c.lT)(C)})})}}]}},54879:function(e,t,a){a.d(t,{A:function(){return l}});var i=a(43961),o=a(98982),n=a(16794),r=a(30758);function l({user:e,submitAction:t="@login",formName:a="login",title:l}){let[s,c]=r.useState(),d=(0,i.EkY)("user","user",a);r.useEffect(()=>{e&&c(e)},[e]);let m={email:(null==s?void 0:s.email)||(null==s?void 0:s.phone_number)||(null==s?void 0:s.user_name),password:null==s?void 0:s.password};return r.createElement(n.A,{component:"main",maxWidth:"xs"},r.createElement(o.ok,{key:(null==s?void 0:s.id)||"none",submitAction:t,initialValues:m,formSchema:l?{...d,title:l}:d,navigationConfirmWhenDirty:!1}))}},54909:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var i=a(98791),o=a(43961),n=a(25304),r=a(56332),l=a(99221),s=a(18851),c=a(58875),d=a(69508),m=a(30758),u=a(24009);let p="CommentDialog",g=(0,d.Ay)(i.lG,{name:p,slot:"DialogStyled"})(({theme:e})=>({[e.breakpoints.down("sm")]:{"& .MuiDialog-container":{position:"fixed",zIndex:1300,right:0,bottom:0,top:0,left:0}}})),h=(0,d.Ay)(r.A,{name:p,slot:"btnBack"})(({theme:e})=>({color:`${e.palette.text.hint} !important`,[e.breakpoints.down("sm")]:{paddingRight:`${e.spacing(2.5)} !important`}})),f=(0,d.Ay)(i.Cf,{name:p,slot:"DialogContentStyled"})(({theme:e})=>({display:"flex",flexDirection:"column",borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),v=(0,d.Ay)(l.A,{name:p,slot:"CommentBoxWrapper"})(({theme:e})=>({backgroundColor:e.palette.background.paper,display:"block",left:0,right:0,bottom:0,zIndex:e.zIndex.modal})),y=(0,d.Ay)(l.A,{name:p,slot:"actionButtonStaticsWrapper"})(({theme:e})=>{var t;return{display:"flex",alignItems:"center",borderBottom:"solid 1px",borderBottomColor:null==(t=e.palette.border)?void 0:t.secondary,padding:0,[e.breakpoints.down("sm")]:{flexDirection:"column-reverse"}}}),b=(0,d.Ay)(l.A,{name:p,slot:"reactionWrapper"})(({theme:e})=>({padding:0,"& .MuiFeedCommentBlock-itemOuter":{border:"none"},[e.breakpoints.down("sm")]:{width:"100%"}})),x=(0,d.Ay)(l.A,{name:p,slot:"FeedStatisticWrapper"})(({theme:e})=>{var t;return{flex:1,display:"flex",justifyContent:"flex-end",padding:"8px 0",[e.breakpoints.down("sm")]:{width:"100%",fontWeight:e.typography.fontWeightBold,borderBottom:"solid 1px",borderBottomColor:null==(t=e.palette.border)?void 0:t.secondary}}});function E({identity:e,handleAction:t,isFocus:a,viewMoreComments:r}){var d,p;let E=(0,m.useRef)(null),C=(0,m.useRef)(null),A=(0,m.useRef)(null),{dialogProps:w,closeDialog:S}=(0,i.sp)(),{i18n:k,CommentList:P,CommentActButton:M,ShareActButton:_,ReactionActButton:R,CommentReaction:I,useSession:W,useTheme:z,jsxBackend:L,useSortComment:N}=(0,o.PCX)(),D=z(),F=W(),[T,B]=N(),H=L.get("CommentComposer"),$=(0,u.d4)(t=>(0,o.B_w)(t,e)),{statistic:O,most_reactions_information:X,like_phrase:V}=$;return m.createElement(g,{...w,scroll:"body"},m.createElement(l.A,{sx:{height:"100%",display:"flex",flexDirection:"column"}},m.createElement(i.L3,{ref:C,disableClose:!0},m.createElement("div",null,m.createElement(h,{onClick:S,sx:{minWidth:0,paddingRight:D.spacing(2.5)},color:"secondary",size:"medium"},m.createElement(n.s4,{icon:"ico-angle-left"})),m.createElement(s.A,{component:"span",fontWeight:"bold"},k.formatMessage({id:"comments"})))),m.createElement(f,{ref:A},m.createElement(y,{ref:E},m.createElement(b,null,I?m.createElement(I,null,F.loggedIn&&(null==(d=$.extra)?void 0:d.can_like)&&R?m.createElement(R,{reacted:$.user_reacted,identity:e,handleAction:t}):null,F.loggedIn&&(null==(p=$.extra)?void 0:p.can_comment)&&M?m.createElement(M,{identity:e,handleAction:t}):null,F.loggedIn&&$.extra.can_share&&_?m.createElement(_,{handleAction:t,identity:e}):null):null),m.createElement(x,null,m.createElement(n.DN,{handleActionCommentStatistic:!1,handleAction:t,identity:e,reactions:X,message:V,statistic:O}))),m.createElement("div",{style:{flex:1,minHeight:0}},m.createElement(l.A,{sx:{maxHeight:"100%",overflow:"auto"}},m.createElement(P,{identity:e,handleAction:t,data:$.related_comments,viewMoreComments:r,total_comment:null==O?void 0:O.total_comment,total_reply:null==O?void 0:O.total_reply,setSortType:B,sortType:T,isDetailPage:!0}))),F.loggedIn&&$.extra.can_comment&&H?m.createElement(v,null,m.createElement(c.A,{sx:{display:{xs:"block",md:"none"}}}),m.createElement(H,{identity:e,open:!0})):null)))}},56089:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(43961),o=a(25304),n=a(41349),r=a(90673),l=a(72979),s=a(22721),c=a(56431),d=a(56332),m=a(36694),u=a(28017),p=a(30758),g=a(28606),h=a(94215),f=(0,g.A)(e=>(0,h.A)({root:{},actionWrapper:{marginBottom:e.spacing(2),paddingRight:e.spacing(2),"& .MuiButton-root":{marginLeft:e.spacing(1.5)}},suggestionsWrapper:{position:"fixed",zIndex:1,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(2),borderRadius:"4px",boxShadow:e.shadows[2]},userWrapper:{margin:e.spacing(1,0),minWidth:"385px"},userOuter:{display:"inline-flex",alignItems:"center",padding:e.spacing(.5),color:e.palette.primary.main,border:e.mixins.border("primary"),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),"&:hover":{background:e.palette.primary.main,color:"#fff","& $removeBtn":{color:"#fff"}}},removeBtn:{color:e.palette.primary.main,fontSize:11,margin:e.spacing(0,.5,0,1),cursor:"pointer"},name:{fontSize:e.mixins.pxToRem(13)}}),{name:"DialogCreateCustomListPrivacy"});let v=(0,g.A)(e=>(0,h.A)({root:{},mentionSuggestionsWrapper:{position:"absolute",backgroundColor:e.mixins.backgroundColor("paper"),borderRadius:4},mentionOptionWrapper:{display:"flex",alignItems:"center",padding:e.spacing(.5,0),cursor:"pointer"},avatar:{width:32,height:32,borderRadius:"50%"},name:{marginLeft:e.spacing(1),color:e.palette.text.primary,fontSize:e.mixins.pxToRem(13)}}));function y({user:e,...t}){let a=v();return p.createElement("div",{className:a.root,...t},p.createElement("div",{className:a.mentionOptionWrapper},p.createElement("img",{src:e.avatar,alt:e.name,className:a.avatar}),p.createElement("span",{className:a.name},e.name)))}function b(e){let{customList:t}=e,a=f(),{useDialog:g,i18n:h,apiClient:v}=(0,i.PCX)(),{dialogProps:b,closeDialog:x,setDialogValue:E}=g(),[C,A]=p.useState(""),[w,S]=p.useState([]),[k,P]=p.useState([]),[M,_]=p.useState({listName:!1,friends:!1}),[R,I]=p.useState(!1),[W,z]=p.useState([]),L=p.useRef(),N=p.useCallback(({value:e})=>{v.request({method:"get",url:"/friend",params:{q:e,limit:6}}).then(e=>{var t,a,i;return(null==(a=e.data)||null==(t=a.data)?void 0:t.length)?null==(i=e.data)?void 0:i.data:[]}).then(e=>e.map(e=>({avatar:(0,n.AE)(e.avatar,"240"),name:e.full_name,link:`/${e.resource_name}/${e.id}`}))).then(e=>z(e))},[v]),D=e=>t.includes(e);return p.createElement(r.A,b,p.createElement(l.A,null,h.formatMessage({id:"create_friends_list"})),p.createElement(s.A,null,p.createElement(m.A,{error:M.listName,placeholder:h.formatMessage({id:"list_name"}),label:h.formatMessage({id:"list_name"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",value:C,onChange:e=>(e=>{_(e=>({...e,listName:!1}));let t=e.target.value;A(t),D(t)&&_(e=>({...e,listName:!0}))})(e),autoFocus:!0}),k&&0<k.length?p.createElement("div",{className:a.userWrapper},k.map((e,t)=>p.createElement("div",{key:t.toString(),className:a.userOuter},p.createElement("span",{className:a.name},e.name),p.createElement(o.s4,{icon:"ico-close",className:a.removeBtn,onClick:()=>{P((0,u.Ay)(k,e=>{e.splice(t,1)})),0===k.length&&_(e=>({...e,friends:!0}))}})))):null,p.createElement(m.A,{error:M.friends,placeholder:h.formatMessage({id:"add_friend"}),label:h.formatMessage({id:"add_friend"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",multiline:!0,value:w,onChange:e=>(e=>{_(e=>({...e,friends:!1}));let t=e.target.value;S(t),N({value:t}),I(!0)})(e),inputRef:L}),R&&p.createElement("div",{className:a.suggestionsWrapper},W?W.map((e,t)=>p.createElement(y,{key:t.toString(),user:e,onClick:()=>(e=>{if(P(t=>[...t,e]),S([]),I(!1),L){var t;null==L||null==(t=L.current)||t.focus()}_(e=>({...e,friends:!1}))})(e)})):null)),p.createElement(c.A,null,p.createElement("div",{className:a.actionWrapper},p.createElement(d.A,{variant:"outlined",onClick:x,size:"small"},h.formatMessage({id:"back"})),p.createElement(d.A,{variant:"contained",onClick:()=>{let e=!1;(D(C)||""===C)&&(_(e=>({...e,listName:!0})),e=!0),0===k.length&&(_(e=>({...e,friends:!0})),e=!0),e||(x(),E(C))},size:"small",color:"primary"},h.formatMessage({id:"create"})))))}},56174:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(43961),o=a(98791),n=a(41349),r=a(99221),l=a(9447),s=a(36694),c=a(69508),d=a(30758),m=a(75969),u=a(18851),p=a(56332),g=a(58875);function h({item:{title:e,keywords:t,description:a,previewImage:o,name:n},onItemSelected:l,onKeyWorkClicked:s}){let{i18n:c}=(0,i.PCX)();return d.createElement(d.Fragment,null,d.createElement(r.A,{component:"div",flexDirection:"row",display:"flex"},d.createElement(r.A,{component:"div",mr:"16px"},d.createElement(m.A,{component:"div",variant:"rectangular",width:"120px",height:"80px",animation:!1})),d.createElement(r.A,{sx:{flex:1}},d.createElement(u.A,{variant:"h4"},null!=e?e:n),d.createElement(u.A,{variant:"body1"},t),d.createElement(u.A,{variant:"body1"},a)),d.createElement(r.A,{sx:{mt:1.5}},d.createElement(p.A,{onClick:()=>l(n)},c.formatMessage({id:"create_layout_block"})))),d.createElement(g.A,{style:{margin:"12px 0"}}))}var f=a(51703),v=a.n(f);let y=(0,c.Ay)(r.A,{name:"Editor",slot:"Tag"})(({theme:e})=>({display:"inline-block",color:e.palette.primary.main,cursor:"pointer",fontSize:e.typography.body1.fontSize,background:"#2682d511",margin:"2px",padding:"0 4px",borderRadius:"4px"}));function b(e){let{parentBlockId:t,slotName:a,pageName:c,pageSize:m}=e,{useDialog:u,layoutBackend:p,dispatch:g,i18n:f}=(0,i.PCX)(),{dialogProps:b,closeDialog:x}=u(),[E,C]=d.useState(""),A=p.getAllBlockView(),w=i.SDN,S=d.useMemo(()=>{let e=[];return Object.values(A).filter(e=>!e.experiment).filter(e=>!w&&!e.admincp||w&&e.admincp).filter(e=>!e.hiddenOnEditorMode).forEach(({keywords:t})=>{t&&t.split(",").map(e=>e.trim().toLowerCase()).forEach(t=>e.push(t))}),v()(e).filter(Boolean).sort()},[]),k=e=>{(0,n.yy)(150).then(()=>{g({type:"@layout/editBlock",payload:{parentBlockId:t,pageName:c,slotName:a,blockName:e,pageSize:m}})}),x()},P=d.useMemo(()=>Object.values(A).map(e=>({...e})).filter(e=>!e.experiment).filter(e=>!w&&!e.admincp||w&&e.admincp).filter(e=>!e.hiddenOnEditorMode).filter(Boolean),[]),M=d.useMemo(()=>{if(!E)return P;let e=RegExp((0,n.Nt)(E),"i");return P.filter(t=>e.test(t.keywords)||e.test(t.title))},[P,E]);return d.createElement(o.lG,{...b,maxWidth:"md",fullWidth:!0},d.createElement(o.L3,{id:"alert-dialog-title"},f.formatMessage({id:"create_layout_block"})),d.createElement(o.Cf,{sx:{height:"50vh"}},d.createElement(r.A,{sx:{display:"flex",flexDirection:"row"}},d.createElement(r.A,{sx:{width:220,mr:2}},d.createElement(l.A,{sx:{mb:2},freeSolo:!0,options:S,getOptionLabel:e=>e,onChange:(e,t)=>{C(t)},value:E,renderInput:e=>d.createElement(s.A,{...e,hiddenLabel:!0,autoFocus:!0,fullWidth:!0,size:"small",variant:"outlined",placeholder:f.formatMessage({id:"search"})})}),S.map(e=>d.createElement(y,{key:e,onClick:()=>C(e)},e))),d.createElement(r.A,{sx:{flex:1}},M.map((e,t)=>d.createElement(h,{key:t.toString(),item:e,onItemSelected:k,onKeyWorkClicked:C}))))))}},58458:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(98791),o=a(43961),n=a(99221),r=a(85481),l=a(69508),s=a(30758);let c=(0,l.Ay)(i.Cf,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,maxHeight:290,[e.breakpoints.down("sm")]:{borderRadius:0}}));function d({dataSource:e,pageParams:t}){let{dialogProps:a}=(0,i.sp)(),{i18n:l,useFetchItems:d,jsxBackend:m}=(0,o.PCX)(),u=m.get("CommentHistoryItem"),[p,g]=d({dataSource:e,pageParams:t,data:[]});return s.createElement(i.lG,{...a,fullWidth:!0,scroll:"body"},s.createElement(i.L3,null,l.formatMessage({id:"edit_history"})),s.createElement(c,null,g?s.createElement(n.A,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(r.A,{size:16})):null,p&&p.length?s.createElement(n.A,{mt:2},p.map(e=>s.createElement(n.A,{mb:2,key:`k${e.id}`},s.createElement(u,{item:e})))):null))}},58564:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(98791),o=a(43961),n=a(69508),r=a(99221),l=a(30758),s=a(45126);let c=(0,n.Ay)(i.Cf,{name:"ViewMediaModal",slot:"root"})(({theme:e})=>({height:"100%",padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("md")]:{height:"auto",flexFlow:"column",flexDirection:"column","& > div":{overflow:"inherit"}}}));var d=function(e){let{identity:t,photo_set:a,photo_album:n,photo_id:d,media_type:m,error:u}=e,{jsxBackend:p,useDialog:g,i18n:h,useIsMobile:f,useGetItem:v}=(0,o.PCX)(),y=v(t),b=f(!0),x=p.get("media.ui.viewBlockMobileModal"),E=p.get("media.ui.viewBlock"),{dialogProps:C}=g();return y?b?l.createElement(i.lG,{...C,fullScreen:!u,scroll:"body","data-testid":"popupViewPhoto"},l.createElement(i.L3,{enableBack:!u&&b,disableClose:b},h.formatMessage({id:"photo"})),l.createElement(s.A,{error:u},l.createElement(r.A,{pb:2},l.createElement(x,e)))):l.createElement(i.lG,{scroll:"body",...C,fullScreen:!u,"data-testid":"popupDetailPhoto"},u?l.createElement(i.L3,{backIcon:"ico-close",enableBack:!u},h.formatMessage({id:"photo"})):null,l.createElement(s.A,{error:u},l.createElement(c,{dividers:!1},l.createElement(E,{photo_set:a,photo_album:n,identity:t,photo_id:d,media_type:m})))):null}},63077:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(98791),o=a(43961),n=a(1530),r=a(25304),l=a(52520),s=a(86725),c=a(65888),d=a(55347),m=a(22463),u=a(30758),p=a(28606),g=a(94215),h=(0,p.A)(e=>(0,g.A)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseCoverPhoto"}),f=a(65663);let v={spacing:1},y={xs:12,sm:6,md:4,lg:4,xl:4};function b({identity:e,onSuccess:t,onFailure:a}){let{useDialog:p,i18n:g,jsxBackend:b,compactData:x}=(0,o.PCX)(),{dialogProps:E,closeDialog:C}=p(),A=h(),w=b.get("photo.block.photoListingBlock"),[S,k]=u.useState(0),[P,M]=u.useState(0),[_,R]=u.useState(""),[I,W]=u.useState(""),z=(0,m.A)(),L=(0,l.A)(z.breakpoints.down("sm")),N=(0,o.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhoto")||{},D=(0,o.IgF)(f.Zt,f.i3,"chooseAvatarCoverPhotoFromAlbum")||{},F=(0,o.IgF)(f.Zt,f.hO,"chooseAvatarCoverAlbum")||{apiUrl:"/photo-album"},T=e.split(".")[0],B=e.split(".")[3],H={close:C,onSuccess:t,onFailure:a,resource_name:T},$=`setCover/photo/${T}/${B}`,O={...N,apiParams:x(N.apiParams,{user_id:B})},X=`setCover/album/${T}/${B}`,V={...F,apiParams:x(F.apiParams,{user_id:B})},j=`setCover/photo-album/${T}/${I}/${B}`,U={...D,apiParams:x(D.apiParams,{album_id:I})};return u.createElement(i.lG,{...E,maxWidth:!1,fullWidth:!0,className:A.dialog},u.createElement(i.L3,{className:A.dialogTitle},1===P&&u.createElement(s.A,{size:"small",className:A.btnBack},u.createElement(r.s4,{icon:"ico-arrow-left",onClick:()=>M(0)})),0===P?g.formatMessage({id:"choose_cover_photo"}):_),0===P&&u.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(c.A,{value:S,onChange:(e,t)=>{k(t)},indicatorColor:"primary",textColor:"primary"},u.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"latest_photos"})}),u.createElement(d.A,{className:A.tab,disableRipple:!0,label:g.formatMessage({id:"albums"})})),0===S&&u.createElement(n.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:L?"90vh":352,style:{height:"auto"}},u.createElement(w,{canLoadMore:!0,canLoadSmooth:!0,clearDataOnUnMount:!0,dataSource:O,pagingId:$,itemView:"photo.itemView.choosePhoto",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_all_photo_found"},gridContainerProps:v,gridItemProps:y,itemProps:H,blockLayout:"Profile - Clean Body Only"})),1===S&&u.createElement(n.P,{className:A.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:L?"90vh":352,style:{height:"auto"}},u.createElement(w,{canLoadMore:!0,canLoadSmooth:!0,dataSource:V,clearDataOnUnMount:!0,pagingId:X,emptyPage:"core.block.no_content",emptyPageProps:{title:"no_albums_found"},itemView:"photo_album.itemView.chooseCoverPhoto",gridContainerProps:v,gridItemProps:y,itemProps:{setId:e=>W(e),setStep:e=>M(e),setName:e=>R(e)},blockLayout:"Profile - Clean Body Only"}))),1===P&&u.createElement(i.Cf,{className:A.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(n.P,{className:A.scrollAlbum,autoHide:!0,autoHeight:!0,autoHeightMax:L?"90vh":400,style:{height:"auto"}},u.createElement(w,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:U,pagingId:j,emptyPage:"core.block.no_content",itemView:"photo.itemView.choosePhoto",gridContainerProps:v,gridItemProps:y,itemProps:H,blockLayout:"Profile - Clean Body Only",emptyPageProps:{title:"no_all_photo_found"}}))))}},63475:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var i=a(98791),o=a(43961),n=a(56332),r=a(30758);function l(){let{useDialog:e}=(0,o.PCX)(),{pathname:t}=(0,o.zy2)(),{dialogProps:a,setDialogValue:l}=e(),s=({payload:e,type:t="@core/codeGenerate/make",children:a})=>r.createElement(n.A,{onClick:()=>l({type:t,payload:e})},a);return r.createElement(i.lG,{...a,maxWidth:"xs",fullWidth:!0},r.createElement(i.L3,null,"Code Generator"),r.createElement(i.Cf,null,r.createElement(s,{payload:"package"},"New App"),r.createElement(s,{payload:"migration"},"Migration"),r.createElement(s,{payload:"model"},"Model"),r.createElement(s,{payload:"web-api"},"Web API"),r.createElement(s,{payload:"admin-api"},"Admin API"),r.createElement(s,{payload:"form"},"Forms"),r.createElement(s,{payload:"request"},"Request"),r.createElement(s,{payload:"category"},"Category"),r.createElement(s,{payload:"data-grid"},"DataGrid"),r.createElement(s,{payload:"listener"},"Listener"),r.createElement(s,{payload:"notification"},"Notification"),r.createElement(s,{payload:"job"},"Job"),r.createElement(s,{payload:"mail"},"Mail"),r.createElement(s,{payload:"export"},"Export"),r.createElement(s,{payload:"inspect"},"Inspect"),r.createElement(s,{payload:"importer"},"Importer"),r.createElement(n.A,{onClick:()=>l({type:"@core/codeGenerate/editCurrentSeo",payload:{url:t.replace(/^\/|\/$/g,"")}})},"Edit Meta"),r.createElement(n.A,{onClick:()=>l({type:"@core/codeGenerate/ideFix"})},"IDE Fix")))}},66306:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98982),n=a(90673),r=a(30758),l=a(71827);function s(){let{useDialog:e,i18n:t}=(0,i.PCX)(),{closeDialog:a,dialogProps:s}=e(),c=t.formatMessage({id:"add_new_template"}),d=(0,l.pJ)(c);return d.elements.content.elements.name={component:"Text",name:"name",variant:"outlined",margin:"normal",required:!0,defaultValue:"",label:"Template Name",fullWidth:!0},d.elements.footer.elements={cancel:{component:"Button",label:"Cancel",color:"primary",type:"cancel",onClick:a},submit:{component:"Button",label:"Submit",color:"primary",type:"cancel",onClick:a}},r.createElement(n.A,s,r.createElement(o.ok,{dialog:!0,initialValues:{},formSchema:d,onSubmit:()=>{}}))}},68639:function(e,t,a){a.r(t),a.d(t,{default:function(){return ef}});var i=a(43961),o=a(98791),n=a(25304),r=a(69508),l=a(99221),s=a(36694),c=a(56332),d=a(30758),m=a(13526),u=a(28606),p=a(94215),g=(0,u.A)(e=>(0,p.A)({root:{top:200,left:200,width:200,height:200,position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",boxShadow:"0 0 0 9999em rgba(0, 0, 0, 0.5)",touchAction:"manipulation",border:"1px solid rgba(255,255,255, 0.9)"},disabled:{cursor:"inherit","& $dragHandle":{cursor:"inherit"}},circular:{borderRadius:"50%",boxShadow:"0px 0px 1px 1px white, 0 0 0 9999em rgba(0, 0, 0, 0.5)"},rootInvisible:{display:"none"},dragHandle:{position:"absolute","&::after":{position:"absolute",content:"''",display:"block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"rgba(255,255,255, 0.5)",border:"1px solid rgba(255, 255, 255, 0.7)",boxSizing:"border-box",outline:"1px solid transparent"}},ordNW:{top:"0",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"nw-resize","&::after":{top:0,left:0}},ordN:{top:"0",left:"50%",marginTop:"-5px",marginLeft:"-5px",cursor:"n-resize","&::after":{top:"0"}},ordNE:{top:"0",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"ne-resize","&::after":{top:"0",right:"0"}},ordE:{top:"50%",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"e-resize","&::after":{right:"0"}},ordSE:{bottom:"0",right:"0",marginBottom:"-5px",marginRight:"-5px",cursor:"se-resize","&::after":{bottom:"0",right:"0"}},ordS:{bottom:"0",left:"50%",marginBottom:"-5px",marginLeft:"-5px",cursor:"s-resize","&::after":{bottom:"0"}},ordSW:{bottom:"0",left:"0",marginBottom:"-5px",marginLeft:"-5px",cursor:"sw-resize","&::after":{bottom:"0",left:"0"}},ordW:{top:"50%",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"w-resize","&::after":{left:"0"}},dragBar:{position:"absolute","& $ordN":{top:"0",left:"0",width:"100%",height:"6px",marginTop:"-3px"},"& $ordE":{right:"0",top:"0",width:"6px",height:"100%",marginRight:"-3px"},"& $ordS":{bottom:"0",left:"0",width:"100%",height:"6px",marginBottom:"-3px"},"& $ordW":{top:"0",left:"0",width:"6px",height:"100%",marginLeft:"-3px"}},fixedAspect:{"& $dragHandle.$ordN":{display:"none"},"& $dragHandle.$ordE":{display:"none"},"& $dragHandle.$ordS":{display:"none"},"& $dragHandle.$ordW":{display:"none"}},"@media (pointer: coarse)":{ordN:{display:"none"},ordE:{display:"none"},ordS:{display:"none"},ordW:{display:"none"},dragHandle:{width:"24px",height:"24px"}}}),{name:"ImageCropperSelection"}),h=d.forwardRef(function({onMounted:e,onMouseDown:t,onTouchStart:a,style:i},o){let n=g();return d.useEffect(()=>{e&&e()},[]),d.createElement("div",{onMouseDown:t,onTouchStart:a,className:n.root,style:i,ref:o},d.createElement("div",{className:(0,m.A)(n.dragBar,n.ordN),"data-ord":"n"}),d.createElement("div",{className:(0,m.A)(n.dragBar,n.ordE),"data-ord":"e"}),d.createElement("div",{className:(0,m.A)(n.dragBar,n.ordS),"data-ord":"s"}),d.createElement("div",{className:(0,m.A)(n.dragBar,n.ordW),"data-ord":"w"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordNW),"data-ord":"nw"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordN),"data-ord":"n"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordNE),"data-ord":"ne"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordE),"data-ord":"e"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordSE),"data-ord":"se"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordS),"data-ord":"s"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordSW),"data-ord":"sw"}),d.createElement("div",{className:(0,m.A)(n.dragHandle,n.ordW),"data-ord":"w"}))});function f(e){let t,a;return e.touches?[{pageX:t,pageY:a}]=e.touches:{pageX:t,pageY:a}=e,{x:t,y:a}}function v(e,t,a){return Math.min(Math.max(e,t),a)}function y(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function b(e,t,a){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/a*100,width:e.width?e.width/t*100:100,height:e.height?e.height/a*100:100}}function x(e,t,a){return"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*a/100,width:e.width?e.width*t/100:t,height:e.height?e.height*a/100:a}}let E={x:0,y:0,unit:"px",aspect:0},C=["e","w"],A=["n","s"],w=["nw","ne","se","sw"];var S=(0,a(66607).A)(e=>(0,p.A)({root:{fontSize:"1rem",justifyContent:"flex-start !important",marginBottom:"12px !important","&.Mui-disabled":{"& .MuiButton-startIcon":{borderColor:`${e.palette.action.disabled} !important`}}},startIcon:{width:"32px",height:"32px",fontSize:"15px",borderRadius:"50%",alignItems:"center",textAlign:"center",lineHeight:"32px",justifyContent:"center",border:`1px solid ${e.palette.primary.main}`},label:{}}))(c.A),k=a(41349),P=a(72099),M=a(96934);let _="PhotoTag",R=(0,r.Ay)("div",{name:_,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:i,hovering:o,forceShow:n})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||n)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:o?10:"auto",...a&&i&&{left:`${a}%`,top:`${i}%`}})),I=(0,r.Ay)("div",{name:_,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"dark"===e.palette.mode?"rgba(0,0,0,.6)":"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),W=(0,r.Ay)(c.A,{name:_,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),z=(0,r.Ay)("span",{name:_,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"}));function L({content:e,px:t,py:a,tagging:i,onRemove:o,forceShow:r,user:l}){let[s,c]=d.useState(!1);return d.createElement(R,{px:t,py:a,tagging:i,hovering:s,forceShow:r},d.createElement(I,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},d.createElement(z,null,(null==e?void 0:e.label)||(null==l?void 0:l.full_name)),i?d.createElement(W,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>o(t,null==e?void 0:e.id)},d.createElement(n.s4,{icon:"ico-close"})):null))}var N=a(69404);let D=(0,u.A)(e=>(0,p.A)({root:{},image:{maxWidth:"100%",maxHeight:"100vh",float:"left",opacity:0,[e.breakpoints.down("sm")]:{maxHeight:"350px"}},imageHeightAuto:{maxHeight:"initial",[e.breakpoints.down("sm")]:{maxHeight:"350px"}},visibleImage:{opacity:1},boxFake:{position:"absolute",top:0,right:0,left:0,objectFit:"cover",display:"flex",alignItems:"center",justifyContent:"center"},imageFake:{width:"100%",height:"auto"},actionBar:{position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"flex-end",zIndex:1,alignItems:"center"},tagFriend:{color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)},dropDown:{color:"#fff",minWidth:"32px",height:"32px",fontSize:e.mixins.pxToRem(15)},taggedBox:{position:"absolute",left:0,top:0,width:"100px",height:"100px",border:"2px solid",borderColor:e.palette.background.paper,boxShadow:e.shadows[20],transform:"translate(-50%,-50%)"},suggestFriend:{backgroundColor:e.mixins.backgroundColor("paper"),marginTop:"10px",marginLeft:"-70px",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,"&  .MuiFilledInput-root":{background:"none"}},smallAvatar:{width:"24px",height:"24px",marginRight:e.spacing(1)},whoIsThis:{height:"100px",width:"100%"},popper:{zIndex:e.zIndex.snackbar,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(1),boxShadow:e.shadows[20],borderRadius:e.shape.borderRadius,margin:e.spacing(1,0),width:"240px","& .MuiAutocomplete-paper":{boxShadow:"none"},"& .MuiAutocomplete-listbox":{padding:0},"& .MuiAutocomplete-option":{borderRadius:e.shape.borderRadius,padding:"6px 8px"},"& .MuiAutocomplete-root":{maxWidth:"224px"},"& .MuiFilledInput-underline:after":{display:"none"},"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiFilledInput-underline:before":{display:"none"},"& .MuiFilledInput-root":{background:"none",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius},"& .MuiAutocomplete-noOptions":{padding:e.spacing(1.5,1)}},tagItem:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(.5,1),textAlign:"left",cursor:"pointer","&:hover":{background:e.palette.action.selected,borderRadius:e.shape.borderRadius/2}},userName:{flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:e.mixins.pxToRem(14)},inputBaseBox:{"& input":{width:"100%",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,padding:e.spacing(1),fontSize:e.mixins.pxToRem(15),"&:focus":{border:e.mixins.border("secondary"),outline:"none"}}},message:{color:"#fff",margin:e.spacing(0,1)},iconButton:{color:"white"},clear:{clear:"both"}}),{name:"EditPreviewPhotoTag"});var F=a(5114),T=a(85333),B=a(32367),H=a(89507),$=a(78613),O=a(98002),X=a.n(O),V=a(1384),j=a.n(V);let U="UploadThumbnail",G={width:2,right:0,position:"absolute",opacity:0,display:"none"},Z=(0,r.Ay)(c.A,{name:"AddPhotoButton"})(({theme:e})=>({fontWeight:"bold",margin:e.spacing(0,2),height:"auto"})),Y=(0,r.Ay)(B.A,{name:"Root"})(({theme:e})=>({margin:e.spacing(2,0,1),overflow:"hidden"})),q=(0,r.Ay)("div",{name:"Preview"})(({theme:e})=>({marginTop:-5,borderRadius:4,width:"100%",maxWidth:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","& button":{"& + button":{marginLeft:e.spacing(1)}}})),J=(0,r.Ay)("div",{name:"RemoveBtn",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),K=(0,r.Ay)("div",{name:"Controls",slot:"Controls"})(({theme:e})=>({borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%"})),Q=(0,r.Ay)("div",{name:"ImageWrapper",slot:"ImageWrapper",shouldForwardProp:e=>"haveError"!==e&&"hoverState"!==e})(({theme:e,haveError:t,hoverState:a})=>({height:"150px",width:"100%",maxWidth:"100%",overflow:"hidden",position:"relative",borderStyle:"solid",borderWidth:"1px",borderColor:"light"===e.palette.mode?"#0000003b":"rgba(255, 255, 255, 0.23)",borderRadius:4,...a&&{borderColor:"light"===e.palette.mode?"#000":"#fff"},...t&&{borderColor:e.palette.error.main}})),ee=(0,r.Ay)("div",{name:"LinkChange"})(({theme:e})=>({marginTop:e.spacing(1),marginBottom:e.spacing(1),cursor:"pointer"}));function et({config:e,value:t,setValue:a}){let{preview_url:o,aspectRatio:r="169",accept:l="image/*",isDropFile:s=!1}=e||{},{dialogBackend:c,i18n:m,useIsMobile:u,ParserPreviewPhoto:p,getSetting:g}=(0,i.PCX)(),h=g("core.attachment.maximum_file_size_each_attachment_can_be_uploaded")||0,f=d.useMemo(()=>{if(null==o?void 0:o.image)return(0,k.AE)(null==o?void 0:o.image,"500")},[o]),[v,y]=(0,d.useState)(f),[b,x]=(0,d.useState)(!!v),E=(0,d.useRef)(),[C,A]=(0,d.useState)(!1),w=r.replace(":",""),S=u();d.useEffect(()=>{(null==o?void 0:o.file)&&(0,T.t)(null==o?void 0:o.file,e=>{y(e),x(!0)})},[null==o?void 0:o.file]);let P=()=>{E.current.click()},M=(e,t)=>{var i;let o=t||E.current.files;if(!o&&!o.length)return;let n=(0,k.EL)(o[0].type)?"video":"photo",r={id:0,uid:j()("file"),source:URL.createObjectURL(o[0]),file:o[0],file_name:o[0].name,file_size:o[0].size,file_type:n,fileItemType:"photo",status:"new",upload_url:"/file",extension:(0,k.QC)(o[0].name),thumbnail_sizes:["150","240","500"]};if(r.file.size>h&&0!==h)return void c.alert({message:m.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,k.Tu)(r.file_name,30),fileSize:(0,k.lT)(r.file.size),maxSize:(0,k.lT)(h)})});if(!(0,k.HH)(null==r||null==(i=r.file)?void 0:i.type,l)){c.alert({message:m.formatMessage({id:"file_accept_type_fail"})}),(null==E?void 0:E.current)&&(E.current.value=null);return}r&&(y(r.source),x(!0),a(r))},_=e=>{e.currentTarget.value=null};return b?d.createElement(d.Fragment,null,d.createElement(Y,{fullWidth:!0,variant:"outlined",margin:"normal","data-testid":X()(`field ${U}`)},d.createElement(Q,{hoverState:C,isMobile:S},d.createElement(p,{item:t,onParse:e=>{var t;a({...e.preUploadFile,status:"new"}),y(null==e||null==(t=e.preUploadFile)?void 0:t.url),x(!0)}},d.createElement(q,{onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1)},d.createElement(n._V,{src:v,aspectRatio:w,backgroundImage:!0}),d.createElement(H.A,{title:m.formatMessage({id:"remove"})},d.createElement(J,{onClick:()=>{y(null),x(!1),a("new"===t.status?void 0:{status:"remove"})},"data-testid":X()(`button_remove ${U}`)},d.createElement(n.s4,{icon:"ico-close"})))))),d.createElement(ee,null,d.createElement($.A,{onClick:P,color:"primary","data-testid":X()(`button add ${U}`)},m.formatMessage({id:"change"})))),d.createElement("input",{onClick:_,ref:E,type:"file","aria-hidden":!0,accept:l,style:G,"data-testid":X()(`input ${U}`),onChange:M})):d.createElement(Y,{variant:"outlined",margin:"normal","data-testid":X()(`field ${U}`)},s?d.createElement(n.dl,{onDrop:e=>(e=>{if(!e.length)return;let t=Object.assign({length:e.length},e);t&&M(null,t)})(e),render:({canDrop:e,isOver:t})=>d.createElement(Q,{hoverState:C,isMobile:S},d.createElement(n._V,{src:v,aspectRatio:w,backgroundImage:!0}),d.createElement(K,{role:"button",onClick:P,onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1)},d.createElement(Z,{size:"small",color:"primary",variant:"outlined","data-testid":X()(`button add ${U}`),startIcon:d.createElement(n.s4,{icon:"ico-photo-plus-o"})},m.formatMessage({id:"choose_a_thumbnail"}))))}):d.createElement(Q,{hoverState:C,isMobile:S},d.createElement(n._V,{src:v,aspectRatio:w,backgroundImage:!0}),d.createElement(K,{role:"button",onClick:P,onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1)},d.createElement(Z,{size:"small",color:"primary",variant:"outlined","data-testid":X()(`button add ${U}`),startIcon:d.createElement(n.s4,{icon:"ico-photo-plus-o"})},m.formatMessage({id:"choose_a_thumbnail"})))),d.createElement("input",{onClick:_,ref:E,type:"file","aria-hidden":!0,accept:l,"data-testid":X()(`input ${U}`),onChange:M,style:G}))}let ea=(0,r.Ay)(o.Cf,{name:"DialogContentWrapper"})(({theme:e})=>({display:"flex",flexDirection:"row",[e.breakpoints.down("sm")]:{flexDirection:"column-reverse"}})),ei=(0,r.Ay)("div",{name:"LeftSide"})(({theme:e})=>({width:360,maxWidth:"100%",display:"flex",flexDirection:"column",paddingRight:e.spacing(2),[e.breakpoints.down("sm")]:{width:"100%",padding:0,marginTop:e.spacing(2)}})),eo=(0,r.Ay)("div",{name:"LeftSideActions"})(({theme:e})=>({display:"flex",flex:1,flexDirection:"column",marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{flexDirection:"row",marginBottom:e.spacing(1),justifyContent:"center","& button":{minWidth:"auto"}}})),en=(0,r.Ay)("div",{name:"MainContent"})(({theme:e})=>({display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,maxWidth:"100%",position:"relative",textAlign:"center",flex:1,minWidth:0,height:"auto",aspectRatio:"1"})),er=(0,r.Ay)("div",{name:"LeftSideBottom"})(({theme:e})=>({display:"flex",flexDirection:"row","& > :first-of-type":{marginRight:e.spacing(1)},[e.breakpoints.down("sm")]:{justifyContent:"end"}})),el=(0,r.Ay)("div",{name:"Backdrop"})(({theme:e})=>({backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,right:0,top:0,bottom:0})),es=(0,r.Ay)("div",{name:"BlurContainer"})(({theme:e})=>({width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"})),ec=(0,r.Ay)("img",{name:"BlurImg"})(({theme:e})=>({objectFit:"cover",width:"100%",height:"100%",border:0})),ed=(0,r.Ay)("div",{name:"Mask"})(({theme:e})=>({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)"})),em=(0,r.Ay)("div",{name:"MediaContainer"})(({theme:e})=>({position:"relative",maxWidth:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(2),flexGrow:1})),eu=(0,r.Ay)("div",{name:"MediaWrapper"})(({theme:e})=>({maxHeight:"100%",position:"relative",justifyContent:"center",alignItems:"center",display:"flex"})),ep=(0,r.Ay)("div",{name:"ImageError"})(({theme:e})=>({color:"white",fontSize:e.mixins.pxToRem(20)})),eg=(0,r.Ay)("img",{name:"LargeImage"})(({theme:e})=>({maxWidth:"100%",maxHeight:"100%",objectFit:"contain",position:"relative",pointerEvents:"none"})),eh={top:0,left:0,width:"100%",height:"100%"};var ef=function({classes:e,dialogTitle:t="edit_photos",item:a,hideTextField:r=!1,tagging:m,postAsParent:u,parentUser:p}){var g,_,R,I;let{useDialog:W,i18n:z}=(0,i.PCX)(),{dialogProps:T,closeDialog:B,setDialogValue:H}=W(),[$]=d.useState(a),[O,X]=d.useState("loading"),[V,j]=d.useState(0),[U,G]=d.useState({x:0,y:0}),[Z,Y]=d.useState(m?"tag":void 0),q=d.useRef(),J=d.useRef(),K=d.useRef(),Q=d.useRef(),ee=(0,k.AE)(null==$?void 0:$.image),[ef,ev]=d.useState($.base64||$.source||ee),ey=d.useRef(),eb=d.useRef((null==$?void 0:$.tagged_friends)||[]),[ex,eE]=d.useState((null==$?void 0:$.tagged_friends)||[]),eC=D(),{user:eA}=(0,i.wVH)(),ew=(0,i.alo)(),eS=(e,t)=>{e.stopPropagation(),eE(e=>e.filter(e=>{var a;return(null==(a=e.content)?void 0:a.id)!==t}))},ek=(e,t)=>{e.stopPropagation(),eE(e=>e.filter(e=>e.id!==t))},{onClickImageBox:eP,setTagging:eM,tagging:e_,offsetTag:eR,openTagBox:eI,chooseFriendToTag:eW}=function({imageRef:e,onAddPhotoTag:t,onRemovePhotoTag:a,ready:i}){let[o,n]=d.useState({px:0,py:0}),[r,l]=d.useState(!1),[s,c]=d.useState(!1),[m,u]=d.useState({width:0,height:0});return d.useEffect(()=>{i&&(null==e?void 0:e.current)&&(e=>{let t=e.getBoundingClientRect();u({width:t.width,height:t.height})})(null==e?void 0:e.current)},[i,null==e?void 0:e.current]),{chooseFriendToTag:e=>{let{px:a,py:i}=o;t({content:e,px:a,py:i}),l(!1)},onClickImageBox:e=>{if(!s)return;let t=e.currentTarget.getBoundingClientRect();n({px:Math.max(Math.min(e.clientX-t.left,m.width-50),50)/m.width*100,py:Math.max(Math.min(e.clientY-t.top,m.height-50),50)/m.height*100}),s&&l(!0)},tagging:s,setTagging:c,offsetTag:o,openTagBox:r}}({imageRef:K,onAddPhotoTag:e=>{eE(t=>[...t,e])},ready:"success"===O}),ez=d.useMemo(()=>{var e;return null!=(e=null==$?void 0:$.text)?e:""},[null==$?void 0:$.text]),eL=d.useMemo(()=>{var e;return null!=(e=null==$?void 0:$.thumbnail)?e:void 0},[null==$?void 0:$.thumbnail]),[eN,eD]=d.useState(ez),[eF,eT]=d.useState(eL),[eB,eH]=d.useState(),e$=d.useCallback(()=>{X("success")},[]),eO=d.useCallback(()=>{X("error")},[]),{getCropStyle:eX,onFulfillSelection:eV,cropSelectionStyle:ej,onComponentMouseTouchDown:eU,onCropMouseTouchDown:eG}=function({imageContainerRef:e,imageWrapperRef:t,cropSelectionRef:a,imageRef:i,crop:o,minWidth:n=0,maxWidth:r=0,minHeight:l=0,maxHeight:s=0,disabled:c,locked:m,keepSelection:u,onComplete:p,onChange:g,onDragStart:h,onDragEnd:S}){let k=e.current,P=d.useRef(),[M,_]=d.useState({}),R=d.useRef(!1),I=d.useRef(!1),W=d.useRef(Object.assign({},E,o)),z=d.useCallback(()=>{if(!t.current)return{width:0,height:0};let{clientWidth:e,clientHeight:a}=t.current;return{width:e,height:a}},[t]),L=d.useCallback(e=>{let t=W.current,{width:a,height:i}=z();return"px"===e?x(t,a,i):b(t,a,i)},[z]),N=d.useCallback(()=>{let{clientTop:e=0,clientLeft:t=0}=window.document.documentElement||{};return{clientTop:e,clientLeft:t}},[]),D=d.useCallback(()=>{let{pageYOffset:e=0,pageXOffset:t=0}=window;return{pageYOffset:e,pageXOffset:t}},[]),F=d.useCallback(e=>{let t=e.getBoundingClientRect(),a=N(),i=D();return{top:t.top+i.pageYOffset-a.clientTop,left:t.left+i.pageXOffset-a.clientLeft}},[N,D]),T=d.useCallback(()=>{let e=L("%");return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}},[L]),B=d.useCallback(()=>{let e,{width:t,height:a}=z(),i=W.current,o=P.current.cropStartWidth+P.current.xDiff;return P.current.xCrossOver&&(o=Math.abs(o)),o=v(o,n,r||t),e=i.aspect?o/i.aspect:P.current.cropStartHeight+P.current.yDiff,P.current.yCrossOver&&(e=Math.min(Math.abs(e),P.current.cropStartY)),e=v(e,l,s||a),i.aspect&&(o=v(e*i.aspect,0,t)),{width:o,height:e}},[z,s,r,l,n]),H=d.useCallback(()=>{let e=L("px"),{width:t,height:a}=z();return e.x=v(P.current.cropStartX+P.current.xDiff,0,t-e.width),e.y=v(P.current.cropStartY+P.current.yDiff,0,a-e.height),e},[z,L]),$=d.useCallback(()=>{let e=L("px"),{width:t,height:i}=z();if(e.width=t,e.height=i,e.x=0,e.y=0,g&&g(x(e,t,i),b(e,t,i)),e.width&&e.height){let{left:e,top:t,width:i,height:o}=T();a.current.style.left=e,a.current.style.top=t,a.current.style.width=i,a.current.style.height=o}},[a,T,z,L,g]),O=d.useCallback(()=>{!n&&(!P.current.xCrossOver&&0<=-Math.abs(P.current.cropStartWidth)-P.current.xDiff||P.current.xCrossOver&&0>=-Math.abs(P.current.cropStartWidth)-P.current.xDiff)&&(P.current.xCrossOver=!P.current.xCrossOver),!l&&(!P.current.yCrossOver&&0<=-Math.abs(P.current.cropStartHeight)-P.current.yDiff||P.current.yCrossOver&&0>=-Math.abs(P.current.cropStartHeight)-P.current.yDiff)&&(P.current.yCrossOver=!P.current.yCrossOver);let e=P.current.xCrossOver!==P.current.startXCrossOver,t=P.current.yCrossOver!==P.current.startYCrossOver;P.current.inversedXOrd=!!e&&y(P.current.ord),P.current.inversedYOrd=!!t&&y(P.current.ord)},[l,n]),X=d.useCallback(()=>{let e=L("px"),{ord:t}=P.current;P.current.xInversed&&(P.current.xDiff-=2*P.current.cropStartWidth,P.current.xDiffPc-=2*P.current.cropStartWidth),P.current.yInversed&&(P.current.yDiff-=2*P.current.cropStartHeight,P.current.yDiffPc-=2*P.current.cropStartHeight);let a=B(),i=P.current.cropStartX,o=P.current.cropStartY;P.current.xCrossOver&&(i=e.x+(e.width-a.width)),P.current.yCrossOver&&(o=!1===P.current.lastYCrossover?e.y-a.height:e.y+(e.height-a.height));let n=W.current,{width:r,height:l}=z(),s=function(e,t,a,i){let o=x(t,a,i),n=x(e,a,i),r={...o};if(!o.aspect)return 0>o.x?(r.x=0,r.width+=o.x):o.x+o.width>a&&(r.width=a-o.x),o.y+o.height>i&&(r.height=i-o.y),r;let l=!1;0>o.x?(r.x=0,r.width+=o.x,r.height=r.width/o.aspect,l=!0):o.x+o.width>a&&(r.width=a-o.x,r.height=r.width/o.aspect,l=!0),l&&n.y>r.y&&(r.y=o.y+(o.height-r.height));let s=!1;return r.y+r.height>i&&(r.height=i-o.y,r.width=r.height*o.aspect,s=!0),s&&n.x>r.x&&(r.x=o.x+(o.width-r.width)),r}(n,{unit:e.unit,x:i,y:o,width:a.width,height:a.height,aspect:e.aspect},r,l);return e.aspect||-1<w.indexOf(t)?(e.x=s.x,e.y=s.y,e.width=s.width,e.height=s.height):-1<C.indexOf(t)?(e.x=s.x,e.width=s.width):-1<A.indexOf(t)&&(e.y=s.y,e.height=s.height),P.current.lastYCrossover=P.current.yCrossOver,O(),e},[O,z,B,L]),V=(0,d.useCallback)(e=>{let t,i=W.current;if(c||!R.current)return;e.preventDefault(),!I.current&&(I.current=!0,h&&h(e));let o=f(e);if(P.current.isResize&&i.aspect&&P.current.cropOffset&&(o.y=G(o.x)),P.current.xDiff=o.x-P.current.clientStartX,P.current.yDiff=o.y-P.current.clientStartY,(t=P.current.isResize?X():H())!==i){let{width:e,height:a}=z();g&&g(x(t,e,a),b(t,e,a))}if(t.width&&t.height){if(!a.current)return;let{left:e,top:t,width:i,height:o}=T();a.current.style.left=e,a.current.style.top=t,a.current.style.width=i,a.current.style.height=o}},[]),j=d.useCallback(e=>{if(U(),c)return;let t=W.current;if(R.current){R.current=!1,I.current=!1;let{width:a,height:i}=z();S&&S(e),p&&p(x(t,a,i),b(t,a,i)),_(e=>({...e,cropIsActive:!1,newCropIsBeingDrawn:!1}))}},[c,z,p,S,U]);var U=d.useCallback(()=>{k&&(k.removeEventListener("mousemove",V),k.removeEventListener("touchmove",V),k.removeEventListener("mouseup",j),k.removeEventListener("touchend",j),k.removeEventListener("touchcancel",j))},[k,j,V]);let G=d.useCallback(e=>{let t,a,{ord:i,cropOffset:o,cropStartWidth:n,cropStartHeight:r}=P.current;return"nw"===i||"se"===i?(t=r/n,a=o.top-o.left*t):(t=-r/n,a=o.top+(r-o.left*t)),t*e+a},[]),Z=d.useCallback(()=>{k.addEventListener("mousemove",V),k.addEventListener("touchmove",V,{passing:!1}),k.addEventListener("mouseup",j),k.addEventListener("touchend",j,{passing:!1}),k.addEventListener("touchcancel",j,{passing:!1})},[k,j,V]),Y=d.useCallback(()=>{let e=L("%");return[0!==e.x||0!==e.y||100!==e.height||100!==e.width,e]},[L]);return{getCropStyle:T,cropSelectionStyle:T(),onFulfillSelection:$,getCropValue:Y,onCropMouseTouchDown:t=>{let i,o=W.current,{width:n,height:r}=z(),l=x(o,n,r);if(c)return;t.preventDefault(),Z();let s=f(t);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let{ord:d}=t.target.dataset,m="nw"===d||"w"===d||"sw"===d,u="nw"===d||"n"===d||"ne"===d;l.aspect&&(i=F(a.current)),P.current={clientStartX:s.x,clientStartY:s.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:m?l.x+l.width:l.x,cropStartY:u?l.y+l.height:l.y,xInversed:m,yInversed:u,xCrossOver:m,yCrossOver:u,startXCrossOver:m,startYCrossOver:u,isResize:t.target.dataset.ord,ord:d,cropOffset:i,xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},R.current=!0,_(e=>({...e,cropIsActive:!0}))},onComponentMouseTouchDown:a=>{var i;let o=W.current;if(!t.current)return;let n=t.current.firstChild;if(a.target!==n||!n.contains(a.target)||c||m||u&&(i=o)&&!isNaN(i.width)&&!isNaN(i.height))return;a.preventDefault(),Z();let r=f(a);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let l=F(t.current),s=r.x-l.left,d=r.y-l.top,p={unit:"px",aspect:o?o.aspect:void 0,x:s,y:d,width:0,height:0};P.current={clientStartX:r.x,clientStartY:r.y,cropStartWidth:p.width,cropStartHeight:p.height,cropStartX:p.x,cropStartY:p.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw",xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},R.current=!0;let{width:h,height:v}=z();g&&g(x(p,h,v),b(p,h,v)),_(e=>({...e,cropIsActive:!0,newCropIsBeingDrawn:!0}))}}}({imageContainerRef:q,imageWrapperRef:J,imageRef:K,cropSelectionRef:Q,onChange:d.useCallback((e,t)=>{},[])}),eZ=d.useCallback(()=>{"crop"!==Z&&Y("crop")},[Z]),eY=d.useCallback(()=>{G(e=>({...e,x:+!e.x})),"flip"!==Z&&Y("flip")},[Z]),eq=d.useCallback(()=>{G(e=>({...e,y:+!e.y})),"flip"!==Z&&Y("flip")},[Z]),eJ=d.useCallback(()=>{"rotate"!==Z&&Y("rotate"),j(e=>(e+90)%360)},[Z]),eK=d.useCallback(()=>{"tag"!==Z&&Y("tag")},[Z]);d.useEffect(()=>{eM("tag"===Z)},[Z,eM]);let eQ=d.useCallback(()=>{"tag"===Z&&eE(eb.current),ev(ef||$.source||ee),Y(void 0),G({x:0,y:0}),j(0)},[$.source,ee,ef,eb.current,Z]),e0=async()=>{let e,t={x:null==(e="crop"===Z?eX():eh)?void 0:e.left,y:null==e?void 0:e.top,width:null==e?void 0:e.width,height:null==e?void 0:e.height},a=await (0,k.nJ)(eB||ef,t,"base64",V,!!(null==U?void 0:U.x),!!(null==U?void 0:U.y),"%");return G({x:0,y:0}),j(0),a&&eH(a),!0},e1=d.useCallback(async()=>{"tag"===Z?(eb.current=ex,Y(null)):await e0()&&Y(null)},[eN,ej,ef,V,U]),e5=d.useCallback(()=>{H({thumbnail:eF,text:eN,base64:eB,tagged_friends:ex.map(e=>{var t,a;return{...e,user_id:(null==(t=e.content)?void 0:t.id)||(null==(a=e.user)?void 0:a.id)}})})},[eN,eB,ex,eF]),e2=d.useCallback(e=>"success"!==O||Z&&e!==Z,[O,Z]),e3=V?`rotate(${V}deg)`:"",e9=U.x||U.y?`scale(${U.x?-1:1}, ${U.y?-1:1})`:"",e4={transform:`${e3} ${e9}`},e6=(null==$?void 0:$.file)&&(0,k.RX)(null==$||null==(g=$.file)?void 0:g.type)||(null==$?void 0:$.module_name)&&(null==$?void 0:$.module_name)!=="video"||"photo"===$.type,e8=(null==$?void 0:$.uid)?null==eA||null==(_=eA.extra)?void 0:_.can_tag_friend_on_photo:null==$||null==(R=$.extra)?void 0:R.can_tag_friend,e7=(0,k.EL)(null==(I=$.file)?void 0:I.type)||(null==$?void 0:$.type)==="video"||(null==$?void 0:$.module_name)==="video";return d.createElement(o.lG,{...T,disableBackdropClick:!0,scroll:"body",maxWidth:"md"},d.createElement(o.L3,null,z.formatMessage({id:t})),d.createElement(ea,null,d.createElement(ei,null,e7?d.createElement(et,{value:eF,setValue:eT,config:{preview_url:eF}}):null,r?null:d.createElement(l.A,{mb:2},d.createElement(s.A,{variant:"outlined",placeholder:z.formatMessage({id:"caption"}),fullWidth:!0,multiline:!0,rows:4,InputLabelProps:{shrink:!0},value:eN,onChange:e=>{eD(e.target.value)}})),"success"===O?d.createElement(eo,null,e8?d.createElement(S,{disabled:e2("tag"),startIcon:d.createElement(n.s4,{icon:"ico-price-tag"}),children:ew?"":z.formatMessage({id:"tags"}),onClick:eK}):null,d.createElement(S,{disabled:e2("crop"),startIcon:d.createElement(n.s4,{icon:"ico-arrow-collapse"}),children:ew?"":z.formatMessage({id:"crop"}),onClick:eZ}),d.createElement(S,{disabled:e2("rotate"),startIcon:d.createElement(n.s4,{icon:"ico-rotate-right-alt"}),children:ew?"":z.formatMessage({id:"rotate"}),onClick:eJ}),d.createElement(S,{disabled:e2("flip"),startIcon:d.createElement(n.s4,{icon:"ico-flip-v"}),children:ew?"":z.formatMessage({id:"flip_vertical"}),onClick:eY}),d.createElement(S,{disabled:e2("flip"),startIcon:d.createElement(n.s4,{icon:"ico-flip-h"}),children:ew?"":z.formatMessage({id:"flip_horizontal"}),onClick:eq})):null,d.createElement(er,null,Z?d.createElement(c.A,{disabled:"success"!==O,variant:"contained",color:"primary",onClick:e1},z.formatMessage({id:"save_changes"})):null,Z?d.createElement(c.A,{disabled:"success"!==O,variant:"outlined",color:"primary",onClick:eQ},z.formatMessage({id:"discard"})):null,Z?null:d.createElement(c.A,{disabled:!O,variant:"contained",color:"primary",onClick:e5},z.formatMessage({id:"save"})),Z?null:d.createElement(c.A,{disabled:!O,variant:"outlined",color:"primary",onClick:B},z.formatMessage({id:"cancel"})))),d.createElement(en,null,d.createElement(el,null,e7?d.createElement(F.A,{ratioPercent:"100%",autoPlay:!0,src:(null==$?void 0:$.destination)||ef}):d.createElement(es,null,d.createElement(ec,{draggable:!1,src:$.source||ee,alt:$.uid}))),e7?null:d.createElement(d.Fragment,null,d.createElement(ed,null),d.createElement(em,{onMouseDown:eU,onTouchStart:eU,ref:q},d.createElement(eu,{ref:J,onClick:eP},"error"!==O&&e6?d.createElement(d.Fragment,null,d.createElement(eg,{draggable:!1,src:eB||ef,ref:K,onLoad:e$,style:e4,onError:eO,alt:$.uid}),d.createElement(P.A,{open:e_&&eI,px:eR.px,py:eR.py,classes:eC,ref:ey}),e_&&eI?d.createElement(M.A,{onItemClick:eW,classes:eC,anchorRef:ey,identity:(null==$?void 0:$.id)?`photo.entities.photo.${$.id}`:void 0,open:!0,excludeIds:ex.map(e=>{var t,a;return(null==e||null==(t=e.content)?void 0:t.id)||(null==e||null==(a=e.user)?void 0:a.id)}),isFullFriend:!0,postAsParent:u,parentUser:p}):null,ex&&(null==ex?void 0:ex.length)?ex.map(e=>(null==e?void 0:e.resource_name)==="photo_tag"?d.createElement(N.A,{tagging:e_,identity:`${e.module_name}.entities.${e.resource_name}.${e.id}`,onRemove:ek,classes:eC,isTypePreview:!0,forceShow:!0}):d.createElement(L,{...e,tagging:e_,onRemove:eS,forceShow:!0})):null):d.createElement(ep,null,z.formatMessage({id:"could_not_load_photo"})),"crop"===Z&&"success"===O?d.createElement(h,{onMounted:eV,style:ej,ref:Q,onMouseDown:eG,onTouchStart:eG}):null))))))}},69404:function(e,t,a){a.d(t,{A:function(){return f}});var i=a(43961),o=a(20644),n=a.n(o),r=a(25304),l=a(69508),s=a(56332),c=a(30758);let d="PhotoTag",m=(0,l.Ay)("div",{name:d,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:i,hovering:o,forceShow:n})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||n)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:o?10:"auto",...a&&i&&{left:`${a}%`,top:`${i}%`}})),u=(0,l.Ay)("div",{name:d,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"dark"===e.palette.mode?"rgba(0,0,0,.6)":"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),p=(0,l.Ay)(r.xE,{name:d,slot:"LinkStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.common.white,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,maxWidth:"180px",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,padding:e.spacing(0,.5)})),g=(0,l.Ay)(s.A,{name:d,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.common.white,minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),h=(0,l.Ay)("span",{name:d,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"}));var f=(0,i.NgA)((e,{identity:t})=>{let a=n()(e,t);return a?{item:a,user:a.user?n()(e,a.user):void 0}:{}})(function({item:e,user:t,tagging:a,extra:i,onRemove:o,isTypePreview:n,forceShow:l}){var s;let d=a&&(null==e||null==(s=e.extra)?void 0:s.can_remove_tag_friend),[f,v]=c.useState(!1);return c.createElement(m,{px:e.px,py:e.py,tagging:a,hovering:f,forceShow:l},c.createElement(u,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},t&&!n?c.createElement(p,{user:t,hoverCard:!1,rootProps:{display:"inherit"}}):c.createElement(h,null,(null==t?void 0:t.full_name)||(null==e?void 0:e.content)),d?c.createElement(g,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>{o(t,e.id)}},c.createElement(r.s4,{icon:"ico-close"})):null))})},70253:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var i=a(43961),o=a(30758),n=a(15626);function r(e){let{i18n:t}=(0,i.PCX)();return o.createElement(n.A,{apiUrl:"/friend",apiParams:{user_id:e.user_id,limit:20},pagingId:`friends/${e.user_id}`,dialogTitle:t.formatMessage({id:"Friends"})})}},72099:function(e,t,a){var i=a(13526),o=a(30758);t.A=o.forwardRef(function({classes:e,px:t,py:a,open:n},r){let l=o.useMemo(()=>({left:`${t}%`,top:`${a}%`}),[t,a]);return o.createElement("div",{onClick:e=>e.stopPropagation(),className:(0,i.A)(e.taggedBox,n?"":"srOnly"),style:l,ref:r},o.createElement("div",{className:e.whoIsThis}))})},72986:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var i=a(43961),o=a(98791),n=a(25304),r=a(85481),l=a(89507),s=a(69508),c=a(30758);let d=(0,s.Ay)(o.lG)(({theme:e})=>({"& .MuiDialog-paper":{background:"transparent"}})),m=(0,s.Ay)("div")(({theme:e})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2",[e.breakpoints.down("md")]:{top:e.spacing(.5),right:e.spacing(.5)}})),u=(0,s.Ay)("div")(({theme:e})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2",[e.breakpoints.down("md")]:{top:e.spacing(.5),right:e.spacing(5.5)}})),p=(0,s.Ay)(o.Cf)(({theme:e})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",zIndex:"1",flexFlow:"column",justifyContent:"center"})),g=(0,s.Ay)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),h=(0,s.Ay)("img",{shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({maxHeight:" calc(100vh - 88px)",margin:"auto",borderRadius:e.shape.borderRadius,[e.breakpoints.down("sm")]:{borderRadius:0},...t&&{width:"100%"}})),f=(0,s.Ay)(r.A)(({theme:e})=>({color:"white"}));function v(e){var t;let{useDialog:a,dispatch:o,useIsMobile:r,i18n:s}=(0,i.PCX)(),{src:v,identity:y}=e,b=(0,i.dx2)(y),{dialogProps:x,closeDialog:E}=a(),[C,A]=c.useState(!1),w=r(),S=()=>A(!1);return c.createElement(d,{...x,"data-testid":"popupViewPhoto",sx:{backgroundColor:"rgba(0, 0, 0, 0.9)"}},(null==b||null==(t=b.extra)?void 0:t.can_download)&&c.createElement(l.A,{title:s.formatMessage({id:"download"})},c.createElement(u,{onClick:()=>{y&&!C&&(A(!0),o({type:"core/downloadItem",payload:{identity:y},meta:{onSuccess:S,onFailure:S}}))}},C?c.createElement(f,{size:18}):c.createElement(n.s4,{icon:"ico-download"}))),c.createElement(l.A,{title:s.formatMessage({id:"press_esc_to_close"})},c.createElement(m,{onClick:E},c.createElement(n.s4,{icon:"ico-close"}))),c.createElement(p,{dividers:!1},c.createElement(g,null,c.createElement(h,{src:v,alt:"",isMobile:w}))))}},74168:function(e,t,a){a.r(t),a.d(t,{ItemView:function(){return h},default:function(){return v}});var i=a(98791),o=a(43961),n=a(99221),r=a(63027),l=a(58875),s=a(56332),c=a(69508),d=a(28606),m=a(94215),u=a(30758);let p=(0,c.Ay)(n.A,{name:"ThemeItem",slot:"Root"})(({theme:e,selected:t})=>({borderRadius:e.shape.borderRadius,overflow:"hidden",border:`2px solid ${t?e.palette.primary.main:"rgba(0,0,0,0.1)"}}`})),g=(0,c.Ay)(n.A,{name:"ThemeItem",slot:"Content"})(({theme:e})=>({borderRadius:e.shape.borderRadius,display:"block",paddingBottom:"60%",backgroundColor:"rgba(0,0,0,0.1)",backgroundSize:"cover"}));function h({title:e,id:t,image:a,selected:i,onChange:o}){return u.createElement(p,{selected:i},u.createElement(g,{title:e,onClick:()=>o(t),style:{backgroundImage:`url(${a})`}}))}let f=(0,d.A)(e=>(0,m.A)({content:{display:"flex",flexWrap:"nowrap",flexDirection:"row"},divider:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogActions:{margin:e.spacing(1),"& button":{width:94,height:40}}}),{name:"ChooseThemeDialog"});function v(){let{useDialog:e,getSetting:t,i18n:a,usePreference:n}=(0,o.PCX)(),{themeId:c=o.SS4}=n(),{dialogProps:d,closeDialog:m,setDialogValue:p}=e(),[g,v]=u.useState(c),y=f(),b=t("layout.variants",[]),x=u.useCallback(()=>{p(g)},[p,g]),E=u.useCallback(e=>{v(e)},[]);return u.createElement(i.lG,{...d,maxWidth:"sm","data-testid":"dialogThemePicker"},u.createElement(i.L3,null,a.formatMessage({id:"choose_your_preferred_theme"})),u.createElement(i.Cf,null,u.createElement("div",{className:y.content},u.createElement(r.Ay,{container:!0,columnSpacing:1,rowSpacing:2},b.map(e=>{var t;return u.createElement(r.Ay,{item:!0,key:null==(t=e.id)?void 0:t.toString(),xs:12},u.createElement(h,{...e,image:e.image,selected:e.id===g,onChange:E}))})))),u.createElement(l.A,{className:y.divider}),u.createElement(i.ii,{className:y.dialogActions},u.createElement(s.A,{onClick:x,variant:"contained",color:"primary",disabled:!g,"data-testid":"buttonSubmit"},a.formatMessage({id:"apply"})),u.createElement(s.A,{onClick:m,type:"button",variant:"outlined",color:"primary","data-testid":"buttonCancel"},a.formatMessage({id:"cancel"}))))}},78049:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var i=a(43961),o=a(90673),n=a(72979),r=a(22721),l=a(36694),s=a(56431),c=a(56332),d=a(89763),m=a.n(d),u=a(30758);function p({title:e,message:t,label:a,value:d,helperText:p,positiveButton:g,negativeButton:h}){let{i18n:f,useDialog:v}=(0,i.PCX)(),{setDialogValue:y,disableBackdropClick:b,dialogProps:x}=v();u.useEffect(()=>{b(!0)},[]);let{label:E,...C}=m()({label:f.formatMessage({id:"cancel"}),color:"primary"},h),{label:A,...w}=m()({label:f.formatMessage({id:"ok"}),color:"primary"},g);e=null!=e?e:f.formatMessage({id:"prompt"});let[S,k]=u.useState(null!=d?d:"");return u.createElement(o.A,{...x,fullScreen:!1,"data-testid":"popupConfirm",maxWidth:"xs",role:"alertdialog",fullWidth:!0,"aria-modal":!0,variant:"alert"},u.createElement(n.A,{id:"dialogTitle","data-testid":"popupTitle"},null!=e?e:"Prompt"),u.createElement(r.A,{dividers:!1},u.createElement(l.A,{onChange:e=>k(e.currentTarget.value),autoFocus:!0,defaultValue:d,fullWidth:!0,required:!0,placeholder:a,InputLabelProps:{shrink:!1},variant:"outlined",helperText:p})),u.createElement(s.A,null,u.createElement(c.A,{...w,role:"button","data-testid":"buttonCancel",tabIndex:0,variant:"contained",size:"medium",color:"primary",disabled:!S.trim().length,onClick:()=>{y(S)},sx:{minWidth:120}},A),u.createElement(c.A,{...C,role:"button","data-testid":"buttonSubmit",tabIndex:1,variant:"outlined",size:"medium",color:"primary",sx:{minWidth:120},onClick:()=>{y(!1)}},E)))}},78599:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(43961),o=a(98791),n=a(98982),r=a(30758),l=a(65663);function s({initialValues:e,formSchema:t,formName:a="edit_selecting_photo",dataSource:s}){let{useDialog:c}=(0,i.PCX)(),d=c(),{dialogProps:m,setDialogValue:u,disableBackdropClick:p}=d,g=(0,i.EkY)(l.Zt,l.i3,a),h=r.useCallback(e=>{u(e)},[u]);return(r.useEffect(()=>{p(!0)},[]),g||s)?r.createElement(o.lG,{...m,maxWidth:"sm",fullWidth:!0},r.createElement(n.FF,{pageParams:e,initialValues:e,dialog:!0,dialogItem:d,formSchema:t||g,dataSource:s,onSubmit:h})):null}},79541:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var i=a(43961),o=a(98791),n=a(98982),r=a(30758);function l({title:e="Edit",maxWidth:t="sm",fullWidth:a=!0,dialogProps:l={},...s}){let{useDialog:c}=(0,i.PCX)(),d=c(),{dialogProps:m}=d;return r.createElement(o.lG,{...m,maxWidth:t,fullWidth:a,"data-testid":"editPopup",...l},r.createElement(n.FF,{dialog:!0,dialogTitle:e,dialogItem:d,...s}))}},80118:function(e,t,a){a.r(t);var i=a(43961),o=a(25304),n=a(97590),r=a.n(n),l=a(51778),s=a.n(l),c=a(30758);t.default=function(e){let{i18n:t,useTheme:a}=(0,i.PCX)(),n=a(),[l,d]=(0,i.Pth)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[m,u]=(0,c.useState)(e.value||[]);return c.createElement(o.YX,{items:l.items,onSelectItem:e=>{u(t=>s()(t,t=>t.id===e.id)?t.filter(t=>t.id!==e.id):r()(t,e))},selectedItems:m,onChanged:d,loading:l.loading,placeholder:t.formatMessage({id:"search_for_friends"}),dialogTitle:t.formatMessage({id:"tag_people"}),emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",heightContent:n.spacing(37.5),...e})}},80271:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var i=a(98791),o=a(43961),n=a(1530),r=a(25304),l=a(69508),s=a(55347),c=a(65888),d=a(30758),m=a(28606),u=a(94215),p=(0,m.A)(e=>(0,u.A)({root:{},dialogContent:{height:320,[e.breakpoints.down("sm")]:{height:"unset"}},reactNumber:{paddingLeft:e.spacing(1),color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold},customTabs:{borderBottom:e.mixins.border("secondary"),"& .MuiTabs-scroller":{overflow:"auto !important"},"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5),display:"flex",flexDirection:"column"},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",minWidth:0,borderRadius:e.shape.borderRadius/2,marginRight:e.spacing(1),padding:e.spacing(.5),flexDirection:"row","&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected,color:`${e.palette.text.secondary} !important`},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"}),g=a(98002),h=a.n(g);let f="PeopleWhoVoted",v={minHeight:32},y=(0,l.Ay)(s.A,{name:f})(({theme:e})=>({justifyContent:"space-between",maxWidth:"100%",padding:`${e.spacing(.5,1)} !important`,height:`${e.spacing(3.5)} !important`,marginRight:"0px !important",marginBottom:e.spacing(.5)})),b=(0,l.Ay)(r.mE,{name:f})(({theme:e})=>({maxWidth:"95%"}));var x=function(e){let{listAnswers:t}=e,a=p(),[r,l]=(0,d.useState)(t[0].id),{useDialog:s,i18n:m,ListView:u}=(0,o.PCX)(),{dialogProps:g}=s(),f=d.useRef(),x=(0,d.useMemo)(()=>({apiUrl:"/poll-result",apiParams:{answer_id:r}}),[r]),E=`pollAnswerResult/${r}`;return d.useEffect(()=>{f.current&&f.current.scrollTo({top:0})},[r]),d.createElement(i.lG,{...g,maxWidth:"xs",fullWidth:!0},d.createElement(i.L3,null,m.formatMessage({id:"people_who_voted"})),d.createElement("div",null,d.createElement(c.A,{value:r,onChange:(e,t)=>{l(parseInt(t,10))},style:v,className:a.customTabs},t.map((e,t)=>d.createElement(y,{key:e.id,disableRipple:!0,"data-testid":h()(`button_tab ${t+1}`),label:e.answer?d.createElement(d.Fragment,null,d.createElement(b,{lines:1},e.answer),d.createElement("span",{className:a.reactNumber},e.total_votes)):void 0,value:e.id,"aria-label":e.title}))),d.createElement("div",{className:a.dialogContent},d.createElement(n.P,{autoHide:!0,autoHeightMax:"auto",ref:f},d.createElement(u,{dataSource:x,pagingId:E,canLoadMore:!0,gridLayout:"Poll - People Who Voted",itemLayout:"Poll - People Who Voted",itemView:"poll.itemView.peopleWhoVoted",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_votes",contentStyle:{sx:{pt:2}}}})))))}},81139:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=a(43961),o=a(98791),n=a(1530),r=a(25304),l=a(99221),s=a(69508),c=a(30758);let d=(0,s.Ay)(r.rq,{name:"DialogSearch"})(({theme:e})=>({"& input::placeholder, .ico":{color:e.palette.text.hint}}));function m(){let{useDialog:e,i18n:t,ListView:a}=(0,i.PCX)(),{dialogProps:r}=e(),[s,m]=c.useState(""),u=c.useCallback(e=>{m(e)},[]),p=t.formatMessage({id:"edit_your_shortcuts"}),g=c.useMemo(()=>`/user/shortcut/edit/?query=${s}`,[s]);return c.useEffect(()=>()=>{},[]),c.createElement(o.lG,{...r,maxWidth:"xs",fullWidth:!0},c.createElement(o.L3,null,p),c.createElement(o.Cf,{variant:"fitScroll",sx:{height:"45vh"}},c.createElement(l.A,{sx:{p:2}},c.createElement(d,{placeholder:t.formatMessage({id:"search_your_page_groups_dots"}),onChanged:u})),c.createElement(n.P,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},c.createElement(a,{emptyPage:"core.block.no_content",emptyPageProps:{title:"no_results_found"},dataSource:{apiUrl:"/user/shortcut/edit",apiParams:{q:s||void 0}},pagingId:g,canLoadMore:!0,clearDataOnUnMount:!0,itemView:"shortcut.itemView.mainCard",gridLayout:"Shortcut - Small Lists",itemLayout:"Shortcut - Small Lists"}))))}},84742:function(e,t,a){a.d(t,{B6:function(){return o.A},e6:function(){return i.A}}),a(1368),a(19579);var i=a(61747),o=a(29817)},86505:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var i=a(43961),o=a(98791),n=a(44838),r=a(77282),l=a(66521),s=a.n(l),c=a(4633),d=a.n(c),m=a(3029),u=a.n(m),p=a(64304),g=a(18851),h=a(42772),f=a(83162),v=a(56332),y=a(30758),b=a(28017),x=a(28606),E=a(94215),C=(0,x.A)(e=>(0,E.A)({root:{},shareWith:{fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(1),display:"flex",alignItems:"center"}}),{name:"DialogCustomListPrivacy"}),A=a(75969),w=(0,x.A)(e=>(0,E.A)({root:{height:e.spacing(5),display:"flex",alignItems:"center"},checkbox:{marginRight:e.spacing(1)}}),{name:"DialogCustomListPrivacy"});function S(){let e=w();return y.createElement("div",{className:e.root},y.createElement("div",{className:e.checkbox},y.createElement(A.A,{variant:"rectangular",width:16,height:16})),y.createElement(A.A,{variant:"text",width:"50%",height:24}))}var k=a(1530),P=a(41349);function M({value:e,feed:t}){let a=C(),{useDialog:l,i18n:c,useFetchItems:m,dispatch:x,getAcl:E}=(0,i.PCX)(),{dialogProps:A,setDialogValue:w,closeDialog:M}=l(),_=(0,i.IgF)("core","privacy","getCustomPrivacyOptions"),R=E("friend.friend_list.create"),[I,W]=m({dataSource:{apiUrl:_.apiUrl,apiParams:(0,P.A8)(_.apiParams,t)},normalize:!1}),[z,L]=y.useState(I),[N,D]=y.useState(Array.isArray(e)?e:[]);y.useEffect(()=>{L(I),d()(I)||s()(e)||D((e=>{let t=[];return e.forEach(e=>{(null==e?void 0:e.is_selected)&&t.push(null==e?void 0:e.id)}),t})(I))},[I,e]);let F=y.useCallback(()=>{x({type:"friend/addNewListWhenCustomPrivacy",meta:{onSuccess:e=>{D(t=>(0,b.Ay)(t,t=>{t.push(e.id)})),L(t=>(0,b.Ay)(t,t=>{t.push(e)}))}}})},[]);return y.createElement(o.lG,{...A,maxWidth:"xs",fullWidth:!0},y.createElement(o.L3,null,c.formatMessage({id:"custom_privacy"})),y.createElement(o.Cf,null,y.createElement("div",{className:a.shareWith},c.formatMessage({id:"share_with"})),y.createElement(k.P,{autoHide:!0,autoHeight:!0,autoHeightMax:200},W?u()(1,5).map(e=>y.createElement(S,{key:e.toString()})):y.createElement(p.A,null,(null==z?void 0:z.length)===0?y.createElement(g.A,{paragraph:!0,variant:"body1",margin:"0",color:"textSecondary"},c.formatMessage({id:"there_are_no_friend_list"})):null==z?void 0:z.map((e,t)=>y.createElement(h.A,{checked:-1<N.indexOf(e.id),key:t.toString(),value:e.id,label:e.title,onChange:()=>{var t;return t=e.id,void D(e=>e.find(e=>e==t)?e.filter(e=>e!=t):[...e,t])},control:y.createElement(f.A,{value:e,icon:y.createElement(r.A,{fontSize:"small"}),checkedIcon:y.createElement(n.A,{fontSize:"small"}),color:"primary"})})))),y.createElement("div",{className:a.linkContainer},R&&y.createElement(y.Fragment,null,y.createElement(v.A,{variant:"link",size:"small",color:"primary",onClick:F},c.formatMessage({id:"create_new_custom_list"})),"\xa0",y.createElement("span",null," ",c.formatMessage({id:"or"})," "),"\xa0"),y.createElement(v.A,{variant:"link",size:"small",href:"/friend",color:"primary"},c.formatMessage({id:"manage_lists"})))),y.createElement(o.ii,null,y.createElement(v.A,{variant:"contained",onClick:()=>{M(),w(N)},size:"small",color:"primary",disabled:0===N.length},c.formatMessage({id:"save"})),y.createElement(v.A,{variant:"outlined",onClick:M,size:"small"},c.formatMessage({id:"cancel"}))))}},88069:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var i=a(98791),o=a(43961),n=a(1530),r=a(84742),l=a(56332),s=a(57468),c=a.n(s),d=a(30758),m=a(18851),u=a(83162),p=a(75969),g=a(69508);let h=(0,g.Ay)("div",{name:"FriendListItem",slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1.5),borderBottom:"1px solid",borderBottomColor:e.palette.divider,":hover":{backgroundColor:e.palette.action.hover}}));function f({item:e,checked:t,onChange:a}){let i=d.useCallback((t,i)=>{a(i,e.id)},[]);return d.createElement(h,null,d.createElement(m.A,{variant:"h5",sx:{flex:1}},e.name),d.createElement(u.A,{size:"small",color:"primary",checked:!!t,onChange:i}))}f.LoadingSkeleton=()=>d.createElement(h,null,d.createElement(m.A,{variant:"h5",sx:{flex:1}},d.createElement(p.A,{variant:"text",width:"50%",height:24})),d.createElement(p.A,{variant:"rectangular",width:16,height:16}));var v=a(25304);let y=(0,g.Ay)("div",{name:"root"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2),alignItems:"center",marginTop:e.spacing(11.25)})),b=(0,g.Ay)(v.s4,{name:"LineIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(64),color:e.palette.text.secondary,marginBottom:e.spacing(4)})),x=(0,g.Ay)("div",{name:"content"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:e.mixins.pxToRem(15)}})),E=(0,g.Ay)(l.A,{name:"WrapButton"})(({theme:e})=>({marginTop:e.spacing(1),"&:hover":{backgroundColor:"unset"}})),C=(0,g.Ay)(l.A,{name:"ButtonInviteStyled"})(({theme:e})=>({height:"100%","& .MuiButton-startIcon":{marginLeft:0}}));function A({icon:e="ico-list-bullet-o",description:t="there_are_no_friend_list",buttonCustom:a}){let{i18n:i,dispatch:n,useDialog:r}=(0,o.PCX)(),{closeDialog:l}=r();return d.createElement(y,null,d.createElement(b,{icon:e}),t?d.createElement(x,null,i.formatMessage({id:t})):null,a?d.createElement(E,null,d.createElement(C,{size:"small",variant:"outlined",component:"h5",onClick:()=>{l(),a.type&&n({type:a.type})},startIcon:d.createElement(v.s4,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},d.createElement("span",null,i.formatMessage({id:a.label||"add_new_listing"})))):null)}function w({id:e}){let{useDialog:t,i18n:a}=(0,o.PCX)(),[s,m]=d.useState([]),[u,p]=(0,r.e6)({dataSource:{apiUrl:`/friend/list/assign/${e}`},data:[]});d.useEffect(()=>{m(u)},[u]);let{dialogProps:g,setDialogValue:h}=t(),v=d.useCallback((e,t)=>{m(a=>e?[...a,t]:a.filter(e=>e!==t))},[m]),[y,b]=(0,r.e6)({dataSource:{apiUrl:"/friend/list"},data:[]});return d.createElement(i.lG,{maxWidth:"xs",fullWidth:!0,...g},d.createElement(i.L3,null,a.formatMessage({id:"friend_list"})),d.createElement(i.Cf,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(n.P,null,b||p?[0,5].map(e=>d.createElement(f.LoadingSkeleton,{key:e.toString()})):null,b||p||y.length?null:d.createElement(A,{icon:"ico-list-bullet-o",buttonCustom:{type:"friend/addNewList",label:"add_new_listing"}}),b||p||!y.length?null:y.map(e=>d.createElement(f,{key:e.id.toString(),item:e,checked:s.includes(e.id),onChange:v})))),d.createElement(i.ii,null,d.createElement(l.A,{disabled:c()(u,s),color:"primary",variant:"contained",size:"medium",onClick:()=>{h(s)}},a.formatMessage({id:"save_changes"}))))}},94798:function(e,t,a){a.r(t),a.d(t,{default:function(){return X},initState:function(){return O}});var i,o=a(43961),n=a(25304),r=a(41349),l=a(90673),s=a(72979),c=a(86725),d=a(56332),m=a(85481),u=a(99221),p=a(49672),g=a(22463),h=a(52520),f=a(81330),v=a.n(f),y=a(30758);async function b(e,t,a,i=0,o=!1,n=!1){try{let r=await new Promise((t,a)=>{let i=new Image;i.addEventListener("load",()=>t(i)),i.addEventListener("error",e=>a(e)),i.setAttribute("crossOrigin","anonymous"),i.src=e.startsWith("http")?`${e}?not-from-cache`:e}),l=document.createElement("canvas"),s=l.getContext("2d"),c=Math.max(r.width,r.height)/2*Math.sqrt(2)*2;l.width=c,l.height=c,s.translate(c/2,c/2),s.rotate(i*Math.PI/180),s.scale(o?-1:1,n?-1:1),s.translate(-c/2,-c/2),s.drawImage(r,c/2-.5*r.width,c/2-.5*r.height);let d=s.getImageData(0,0,c,c);if(l.width=t.width,l.height=t.height,s.putImageData(d,Math.round(0-c/2+.5*r.width-t.x),Math.round(0-c/2+.5*r.height-t.y)),"base64"===a)return l.toDataURL("image/jpeg");return new Promise(e=>{l.toBlob(t=>{e(URL.createObjectURL(t))},"image/jpeg")})}catch(e){throw Error(e)}}var x=a(23647),E=a.n(x);function C(e,t,a,i,o=0){let{width:n,height:r}=R(t.width,t.height,o);return{x:A(e.x,n,a.width,i),y:A(e.y,r,a.height,i)}}function A(e,t,a,i){let o=t*i/2-a/2;return Math.min(o,Math.max(e,-o))}function w(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function S(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function k(e,t){return Math.min(e,Math.max(0,t))}function P(e,t){return t}function M(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function _(e,t,a,i,o){let n=Math.cos,r=Math.sin,l=o*Math.PI/180;return[(e-a)*n(l)-(t-i)*r(l)+a,(e-a)*r(l)+(t-i)*n(l)+i]}function R(e,t,a){let i=e/2,o=t/2,n=[_(0,0,i,o,a),_(e,0,i,o,a),_(e,t,i,o,a),_(0,t,i,o,a)],r=Math.min(...n.map(e=>e[0])),l=Math.max(...n.map(e=>e[0])),s=Math.min(...n.map(e=>e[1]));return{width:l-r,height:Math.max(...n.map(e=>e[1]))-s}}function I(...e){return e.filter(e=>"string"==typeof e&&!!(0<e.length)).join(" ").trim()}function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class z extends(i=y.Component){componentDidMount(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.imageRef&&this.imageRef.complete&&this.onMediaLoad()}componentWillUnmount(){window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&this.styleRef.remove(),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()}componentDidUpdate(e){var t,a,i,o,n,r,l,s;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null==(t=e.cropSize)?void 0:t.height)!==(null==(a=this.props.cropSize)?void 0:a.height)||(null==(i=e.cropSize)?void 0:i.width)!==(null==(o=this.props.cropSize)?void 0:o.width)?this.computeSizes():((null==(n=e.crop)?void 0:n.x)!==(null==(r=this.props.crop)?void 0:r.x)||(null==(l=e.crop)?void 0:l.y)!==(null==(s=this.props.crop)?void 0:s.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent())}getAspect(){let{cropSize:e,aspect:t}=this.props;return e?e.width/e.height:t}onPinchStart(e){let t=z.getTouchPoint(e.touches[0]),a=z.getTouchPoint(e.touches[1]);this.lastPinchDistance=w(t,a),this.lastPinchRotation=S(t,a),this.onDragStart(M(t,a))}onPinchMove(e){let t=z.getTouchPoint(e.touches[0]),a=z.getTouchPoint(e.touches[1]),i=M(t,a);this.onDrag(i),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(()=>{let e=w(t,a),o=this.props.zoom*(e/this.lastPinchDistance);this.setNewZoom(o,i),this.lastPinchDistance=e;let n=S(t,a),r=this.props.rotation+(n-this.lastPinchRotation);this.props.onRotationChange&&this.props.onRotationChange(r),this.lastPinchRotation=n})}render(){let{image:e,video:t,mediaProps:a,transform:i,crop:{x:o,y:n},rotation:r,zoom:l,flipHorizontal:s=!1,flipVertical:c=!1,cropShape:d,showGrid:m,style:{containerStyle:u,cropAreaStyle:p,mediaStyle:g},classes:{containerClassName:h,cropAreaClassName:f,mediaClassName:v}}=this.props,b=c?-1:1,x=s?-1:1;return y.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:e=>this.containerRef=e,"data-testid":"container",style:u,className:I("reactEasyCrop_Container",h)},e?y.createElement("img",{alt:"",className:I("reactEasyCrop_Image",v),...a,src:e,ref:e=>this.imageRef=e,style:{...g,transform:i||`translate(${o}px, ${n}px) rotate(${r}deg) scale(${l*b}, ${l*x})`},onLoad:this.onMediaLoad}):t&&y.createElement("video",{autoPlay:!0,loop:!0,muted:!0,className:I("reactEasyCrop_Video",v),...a,src:t,ref:e=>this.videoRef=e,onLoadedMetadata:this.onMediaLoad,style:{...g,transform:i||`translate(${o}px, ${n}px) rotate(${r}deg) scale(${l*b}, ${l*x})`},controls:!1}),this.state.cropSize&&y.createElement("div",{style:{...p,width:this.state.cropSize.width,height:this.state.cropSize.height},"data-testid":"cropper",className:I("reactEasyCrop_CropArea","round"===d&&"reactEasyCrop_CropAreaRound",m&&"reactEasyCrop_CropAreaGrid",f)}))}constructor(...e){super(...e),W(this,"imageRef",null),W(this,"videoRef",null),W(this,"containerRef",null),W(this,"styleRef",null),W(this,"containerRect",null),W(this,"mediaSize",{width:0,height:0,naturalWidth:0,naturalHeight:0}),W(this,"dragStartPosition",{x:0,y:0}),W(this,"dragStartCrop",{x:0,y:0}),W(this,"lastPinchDistance",0),W(this,"lastPinchRotation",0),W(this,"rafDragTimeout",null),W(this,"rafPinchTimeout",null),W(this,"wheelTimer",null),W(this,"state",{cropSize:null,hasWheelJustStarted:!1}),W(this,"preventZoomSafari",e=>e.preventDefault()),W(this,"cleanEvents",()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragStopped),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onDragStopped)}),W(this,"clearScrollEvent",()=>{this.containerRef&&this.containerRef.removeEventListener("wheel",this.onWheel),this.wheelTimer&&clearTimeout(this.wheelTimer)}),W(this,"onMediaLoad",()=>{this.computeSizes(),this.emitCropData(),this.setInitialCrop(),this.props.onMediaLoaded&&this.props.onMediaLoaded(this.mediaSize)}),W(this,"setInitialCrop",()=>{let{initialCroppedAreaPixels:e,cropSize:t}=this.props;if(!e)return;let{crop:a,zoom:i}=function(e,t,a){let i=t.width/t.naturalWidth,o=function(e,t,a){let i=t.width/t.naturalWidth;if(a)return a.height>a.width?a.height/i/e.height:a.width/i/e.width;let o=e.width/e.height;return t.naturalWidth>=t.naturalHeight*o?t.naturalHeight/e.height:t.naturalWidth/e.width}(e,t,a),n=i*o;return{crop:{x:((t.naturalWidth-e.width)/2-e.x)*n,y:((t.naturalHeight-e.height)/2-e.y)*n},zoom:o}}(e,this.mediaSize,t);this.props.onCropChange(a),this.props.onZoomChange&&this.props.onZoomChange(i)}),W(this,"computeSizes",()=>{let e=this.imageRef||this.videoRef;if(e&&this.containerRef){var t,a,i,o,n,r;this.containerRect=this.containerRef.getBoundingClientRect(),this.mediaSize={width:e.offsetWidth,height:e.offsetHeight,naturalWidth:(null==(t=this.imageRef)?void 0:t.naturalWidth)||(null==(a=this.videoRef)?void 0:a.videoWidth)||0,naturalHeight:(null==(i=this.imageRef)?void 0:i.naturalHeight)||(null==(o=this.videoRef)?void 0:o.videoHeight)||0};let l=this.props.cropSize?this.props.cropSize:function(e,t,a,i,o,n=0){let{width:r,height:l}=R(e,t,n),s=Math.min(r,a),c=Math.min(l,i);return s>c*o?{width:c*o,height:c}:{width:s,height:s/o}}(e.offsetWidth,e.offsetHeight,this.containerRect.width,this.containerRect.height,this.props.aspect,this.props.rotation);((null==(n=this.state.cropSize)?void 0:n.height)!==l.height||(null==(r=this.state.cropSize)?void 0:r.width)!==l.width)&&this.props.onCropSizeChange&&this.props.onCropSizeChange(l),this.setState({cropSize:l},this.recomputeCropPosition)}}),W(this,"onMouseDown",e=>{e.preventDefault(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragStopped),this.onDragStart(z.getMousePoint(e))}),W(this,"onMouseMove",e=>this.onDrag(z.getMousePoint(e))),W(this,"onTouchStart",e=>{e.preventDefault(),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onDragStopped),2===e.touches.length?this.onPinchStart(e):1===e.touches.length&&this.onDragStart(z.getTouchPoint(e.touches[0]))}),W(this,"onTouchMove",e=>{e.preventDefault(),2===e.touches.length?this.onPinchMove(e):1===e.touches.length&&this.onDrag(z.getTouchPoint(e.touches[0]))}),W(this,"onDragStart",({x:e,y:t})=>{var a,i;this.dragStartPosition={x:e,y:t},this.dragStartCrop={...this.props.crop},null==(a=(i=this.props).onInteractionStart)||a.call(i)}),W(this,"onDrag",({x:e,y:t})=>{this.rafDragTimeout&&window.cancelAnimationFrame(this.rafDragTimeout),this.rafDragTimeout=window.requestAnimationFrame(()=>{if(!this.state.cropSize||void 0===e||void 0===t)return;let a=e-this.dragStartPosition.x,i=t-this.dragStartPosition.y,o={x:this.dragStartCrop.x+a,y:this.dragStartCrop.y+i},n=this.props.restrictPosition?C(o,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):o;this.props.onCropChange(n)})}),W(this,"onDragStopped",()=>{var e,t;this.cleanEvents(),this.emitCropData(),null==(e=(t=this.props).onInteractionEnd)||e.call(t)}),W(this,"onWheel",e=>{e.preventDefault();let t=z.getMousePoint(e),{pixelY:a}=E()(e),i=this.props.zoom-a*this.props.zoomSpeed/200;this.setNewZoom(i,t),this.state.hasWheelJustStarted||this.setState({hasWheelJustStarted:!0},()=>{var e,t;return null==(e=(t=this.props).onInteractionStart)?void 0:e.call(t)}),this.wheelTimer&&clearTimeout(this.wheelTimer),this.wheelTimer=window.setTimeout(()=>this.setState({hasWheelJustStarted:!1},()=>{var e,t;return null==(e=(t=this.props).onInteractionEnd)?void 0:e.call(t)}),250)}),W(this,"getPointOnContainer",({x:e,y:t})=>{if(!this.containerRect)throw Error("The Cropper is not mounted");return{x:this.containerRect.width/2-(e-this.containerRect.left),y:this.containerRect.height/2-(t-this.containerRect.top)}}),W(this,"getPointOnMedia",({x:e,y:t})=>{let{crop:a,zoom:i}=this.props;return{x:(e+a.x)/i,y:(t+a.y)/i}}),W(this,"setNewZoom",(e,t)=>{if(!this.state.cropSize||!this.props.onZoomChange)return;let a=this.getPointOnContainer(t),i=this.getPointOnMedia(a),o=Math.min(this.props.maxZoom,Math.max(e,this.props.minZoom)),n={x:i.x*o-a.x,y:i.y*o-a.y},r=this.props.restrictPosition?C(n,this.mediaSize,this.state.cropSize,o,this.props.rotation):n;this.props.onCropChange(r),this.props.onZoomChange(o)}),W(this,"getCropData",()=>this.state.cropSize?function(e,t,a,i,o,n=0,r=!0){let l=r&&0===n?k:P,s={x:l(100,((t.width-a.width/o)/2-e.x/o)/t.width*100),y:l(100,((t.height-a.height/o)/2-e.y/o)/t.height*100),width:l(100,a.width/t.width*100/o),height:l(100,a.height/t.height*100/o)},c=Math.round(l(t.naturalWidth,s.width*t.naturalWidth/100)),d=Math.round(l(t.naturalHeight,s.height*t.naturalHeight/100)),m=t.naturalWidth>=t.naturalHeight*i?{width:Math.round(d*i),height:d}:{width:c,height:Math.round(c/i)},u={...m,x:Math.round(l(t.naturalWidth-m.width,s.x*t.naturalWidth/100)),y:Math.round(l(t.naturalHeight-m.height,s.y*t.naturalHeight/100))};return{croppedAreaPercentages:s,croppedAreaPixels:u}}(this.props.restrictPosition?C(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop,this.mediaSize,this.state.cropSize,this.getAspect(),this.props.zoom,this.props.rotation,this.props.restrictPosition):null),W(this,"emitCropData",()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropComplete&&this.props.onCropComplete(t,a),this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)}),W(this,"emitCropAreaChange",()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)}),W(this,"recomputeCropPosition",()=>{if(!this.state.cropSize)return;let e=this.props.restrictPosition?C(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;this.props.onCropChange(e),this.emitCropData()})}}W(z,"defaultProps",{zoom:1,rotation:0,aspect:4/3,flipVertical:!1,flipHorizontal:!1,maxZoom:3,minZoom:1,cropShape:"rect",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0}),W(z,"getMousePoint",e=>({x:Number(e.clientX),y:Number(e.clientY)})),W(z,"getTouchPoint",e=>({x:Number(e.clientX),y:Number(e.clientY)}));var L=a(28017),N=a(57468),D=a.n(N);let F=(0,L.Ay)((e,t)=>{switch(t.type){case"setCrop":e.crop=t.payload;break;case"setFlipVertical":e.flipVertical=!e.flipVertical;break;case"setFlipHorizontal":e.flipHorizontal=!e.flipHorizontal;break;case"pendingSave":e.isLoading=!0;break;case"fullfilSave":e.isLoading=!1,e.isDirty=!1,e.isSuccess=!0;return;case"rejectSave":e.isLoading=!1;break;case"startParseFile":e.isLoadingParseFile=!0,e.progressParseFile=0;break;case"setProgressParseFile":e.progressParseFile=t.payload;break;case"successParseFile":e.isLoadingParseFile=!1,e.progressParseFile=100;break;case"errorParseFile":e.isLoadingParseFile=!1;break;case"updateFile":e.imageSrc=t.payload,e.imageId=null,e.rotation=O.rotation,e.crop=O.crop,e.zoom=O.zoom;break;case"setFromPhoto":e.imageSrc=t.payload.image.origin,e.imageId=t.payload.id,e.rotation=O.rotation,e.crop=O.crop,e.zoom=O.zoom;break;case"setImgSource":e.imageSrc=t.payload;break;case"setZoom":{let{mode:a,zoom:i}=t.payload;if(i){e.zoom=i;break}let o=0;"minus"===a&&(o=1<e.zoom-.2?e.zoom-.2:1),"plus"===a&&(o=3>e.zoom+.2?e.zoom+.2:3),e.zoom=o;break}case"setCroppedAreaPixels":e.croppedAreaPixels=t.payload;break;case"setRotation":e.rotation=t.payload}let a={crop:e.crop,flipVertical:e.flipVertical,flipHorizontal:e.flipHorizontal,rotation:e.rotation,zoom:e.zoom,imageSrc:e.imageSrc},i={crop:O.crop,flipVertical:O.flipVertical,flipHorizontal:O.flipHorizontal,rotation:O.rotation,zoom:O.zoom,imageSrc:O.imageSrc};e.isDirty=!D()(i,a)});var T=a(28606),B=a(94215),H=(0,T.A)(e=>(0,B.A)({avatarWrapper:{marginTop:-96,marginRight:e.spacing(3),position:"relative"},userAvatar:{width:168,height:168,border:"4px solid",borderColor:e.palette.background.paper},btnClose:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:"1px",color:`${e.palette.text.secondary} !important`,marginRight:`${e.spacing(-1)} !important`,marginLeft:"auto !important",width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:e.palette.background.default,color:"#fff"}},btnControl:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:e.spacing(4),color:`${e.palette.text.primary} !important`,width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:"rgba(5, 5, 5, 0.04)",color:e.palette.text.primary,boxShadow:"none"}},btnEditAvatar:{backgroundColor:e.palette.background.paper,textTransform:"capitalize",position:"absolute",top:e.spacing(1),right:e.spacing(1),minWidth:32,height:32,borderRadius:"100%","&:hover":{backgroundColor:e.palette.background.default}},sliderZoom:{margin:e.spacing(0,2)},iconEdit:{},cropDialog:{"& .MuiDialog-paper":{overflowY:"visible"}},titleDialog:{fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,fontSize:e.mixins.pxToRem(18),padding:e.spacing(2),display:"flex",justifyContent:"space-between",alignItems:"center"},cropContainer:{[e.breakpoints.down("sm")]:{width:"100%"}},cropContent:{position:"relative",height:400,"& .reactEasyCrop_CropArea":{border:"none",color:"rgba(255,255,255,.3)"}},controls:{padding:e.spacing(1),display:"flex"},btnActions:{padding:e.spacing(1),display:"flex",justifyContent:"flex-end","& .Mui-disabled":{..."dark"===e.palette.mode&&{color:`${e.palette.text.hint} !important`}}},btnAction:{margin:`${e.spacing(1)} !important`},btnContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:500,margin:"auto",justifyContent:"center",marginBottom:e.spacing(2),"& button":{padding:e.spacing(1,2),margin:e.spacing(0,1),whiteSpace:"nowrap",fontWeight:"normal",color:e.palette.text.primary}},sliderContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:400,margin:"auto"},sliderLabel:{"& + span":{marginLeft:e.spacing(2)}},btnChangePhoto:{position:"relative",overflow:"hidden"},inputFile:{position:"absolute",opacity:0,left:0,top:0,right:0,bottom:0,cursor:"pointer"},cropBackdrop:{top:0,left:0,right:0,bottom:0,display:"flex",overflow:"hidden",position:"absolute",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:e.mixins.backgroundColor("paper")},cropBlurContent:{filter:"blur(10px)",transform:"scale(12)"},blurImage:{width:"100%",height:"100%",objectFit:"cover",border:0}}),{name:"MuiUserAvatarPhoto"}),$=a(29860);let O={crop:{x:0,y:0},zoom:1,flipHorizontal:!1,flipVertical:!1,rotation:0,isDirty:!1,isLoading:!1,croppedAreaPixels:null,isSuccess:!1};var X=({onUpdate:e,item:t,avatar:a})=>{let i=H(),f=(0,g.A)(),x=y.useRef(null),[E,C]=y.useState(null),[A,w]=y.useState(!1),{i18n:S,dispatch:k,dialogBackend:P,useDialog:M,useCheckFileUpload:_,getSetting:R,setNavigationConfirm:I}=(0,o.PCX)(),{dialogProps:W,setUserConfirm:L,closeDialog:N}=M(),D=(0,h.A)(f.breakpoints.down("sm")),T=(0,r.AE)(null==t?void 0:t.avatar),{name:B}=(0,$.o0)()||{},{can_set_profile_avatar:X=!0}=Object.assign({},null==t?void 0:t.extra);a&&(T=(0,r.AE)(a)),O.imageSrc=T;let[V,j]=(0,y.useReducer)(F,{...O}),U=(R("core.file_mime_type_accepts.image")||["image/*"]).join(),[G]=_({accept:U}),{crop:Z,zoom:Y,rotation:q,flipHorizontal:J,flipVertical:K,imageSrc:Q,croppedAreaPixels:ee,isLoading:et,isDirty:ea,imageId:ei,isSuccess:eo,isLoadingParseFile:en,progressParseFile:er}=V;(0,y.useEffect)(()=>(I&&I(ea),L(ea),()=>{ea&&I&&I(!1)}),[L,ea]),(0,y.useEffect)(()=>{eo&&N()},[eo,N]);let el=async()=>{j({type:"pendingSave"});try{let i=await b(Q,ee,"base64",q,K,J);i&&k({type:"updateProfileUserAvatar",payload:{avatar:E,avatar_crop:i,userId:null==t?void 0:t.id,identity:null==t?void 0:t._identity,image_id:ei},meta:{onSuccess:()=>{j({type:"fullfilSave"})},onFailure:()=>{j({type:"rejectSave"})}}}),v()(e)&&e(a)}catch(e){P.alert({title:"Error",message:"Ops! Picture format is not correct."}),j({type:"rejectSave"})}},es=e=>{let t=Math.round(100*e.loaded/e.total);t>99||j({type:"setProgressParseFile",payload:t})},ec=async e=>{if(e.target.files&&0<e.target.files.length){let n=G(e.target.files);if(null==n?void 0:n.length){let e=n[0],r=await new Promise(t=>{let a=new FileReader;a.addEventListener("load",()=>t(a.result),!1),a.readAsDataURL(e)});["ios","crios"].includes(B)&&(r=await function({url:e,maxWidth:t=2e3,maxHeight:a=2e3}){return new Promise((i,o)=>{let n=document.createElement("canvas"),r=n.getContext("2d"),l=new Image;l.addEventListener("load",()=>{let e=l.width,o=l.height,s=Math.min(t/e,a/o),c=e*s,d=o*s;n.width=c,n.height=d,r.drawImage(l,0,0,c,d),i(n.toDataURL("image/jpeg"))}),l.addEventListener("error",e=>o(e)),l.src=e})}({url:r}));var a=r,i=a=>{a?(j({type:"startParseFile"}),k({type:o.F7S,payload:{item:{source:r,file:e,type:"photo",item_type:null==t?void 0:t.module_name,file_type:"photo",thumbnail_sizes:null==t?void 0:t.avatar_thumbnail_sizes}},meta:{onUploadProgress:es,onParseFile:e=>{let{preUploadFile:t,source:a}=e;j({type:"successParseFile"}),C(t),j({type:"updateFile",payload:a}),ed()},onError:()=>{j({type:"errorParseFile"}),(null==x?void 0:x.current)&&(x.current.value=null)}}})):(C(e),j({type:"updateFile",payload:r}),ed())};let l=new Image;l.onload=()=>i(!1),l.onerror=()=>i(!0),l.src=a}}},ed=()=>{w(!0)};return y.createElement(l.A,{...W,className:i.cropDialog,"aria-labelledby":"dialog-title",maxWidth:"sm",fullWidth:!0,scroll:"body",fullScreen:D},y.createElement(s.A,{id:"dialog-title"},S.formatMessage({id:"update_your_profile_picture"}),y.createElement(c.A,{size:"small",className:i.btnClose,disabled:et,onClick:N},y.createElement(n.s4,{icon:"ico-close"}))),Q&&A?y.createElement("div",{className:i.cropContainer},y.createElement("div",{className:i.cropContainer},y.createElement("div",{className:i.cropContent},y.createElement("div",{className:i.cropBackdrop},y.createElement("div",{className:i.cropBlurContent},y.createElement("img",{crossOrigin:"anonymous",src:Q,alt:"",className:i.blurImage}))),y.createElement(z,{key:Q,image:Q,crop:Z,zoom:Y,aspect:1,flipHorizontal:J,flipVertical:K,onCropChange:e=>j({type:"setCrop",payload:e}),onCropComplete:(e,t)=>{j({type:"setCroppedAreaPixels",payload:t})},onZoomChange:e=>j({type:"setZoom",payload:{zoom:e}}),rotation:q,showGrid:!1,cropShape:"round"})),!(0,r.rI)(Q)&&y.createElement(y.Fragment,null,y.createElement("div",{className:i.controls},y.createElement("div",{className:i.sliderContainer},y.createElement(d.A,{variant:"text",className:i.btnControl,onClick:()=>j({type:"setZoom",payload:{mode:"minus"}})},y.createElement(n.s4,{icon:"ico-minus"})),y.createElement(p.Ay,{className:i.sliderZoom,value:Y,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:(e,t)=>j({type:"setZoom",payload:{zoom:t}})}),y.createElement(d.A,{variant:"text",className:i.btnControl,onClick:()=>j({type:"setZoom",payload:{mode:"plus"}})},y.createElement(n.s4,{icon:"ico-plus"})))),y.createElement("div",{className:i.btnContainer},y.createElement(d.A,{startIcon:y.createElement(n.s4,{icon:"ico-rotate-right-alt"}),onClick:()=>{j({type:"setRotation",payload:360<=V.rotation+90?0:V.rotation+90})}},S.formatMessage({id:"rotate"})),y.createElement(d.A,{startIcon:y.createElement(n.s4,{icon:"ico-flip-v"}),onClick:()=>j({type:"setFlipVertical"})},S.formatMessage({id:"flip_vertical"})),y.createElement(d.A,{startIcon:y.createElement(n.s4,{icon:"ico-flip-h"}),onClick:()=>j({type:"setFlipHorizontal"})},S.formatMessage({id:"flip_horizontal"})))),y.createElement("div",{className:i.btnActions},y.createElement("div",{className:i.btnChangePhoto},y.createElement(d.A,{variant:"outlined",disabled:et,className:i.btnAction,size:"small",onClick:()=>w(!1)},S.formatMessage({id:"back"}))),y.createElement(d.A,{variant:"contained",className:i.btnAction,disabled:!ea,onClick:el,size:"small"},et?y.createElement(m.A,{color:"inherit",size:"1rem"}):S.formatMessage({id:"save"}))))):y.createElement(u.A,{sx:{p:2}},en?y.createElement(u.A,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"dark"===f.palette.mode?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.5)",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center"}},y.createElement(m.A,{sx:{width:"56px !important",height:"56px !important"},variant:"determinate",value:er})):null,y.createElement("input",{type:"file",onChange:ec,accept:U,className:i.inputFile,ref:x,style:{display:"none"}}),y.createElement(u.A,{sx:{display:"flex",flexDirection:"column","& button":{margin:"0 0 8px 0 !important","&:last-child":{marginBottom:"0 !important"}}}},y.createElement(d.A,{variant:"contained",disabled:et,className:i.btnAction,size:"small",onClick:()=>{x.current.click()},startIcon:y.createElement(n.s4,{icon:"ico-upload"})},S.formatMessage({id:"upload_photo"})),X?y.createElement(d.A,{variant:"outlined",disabled:et,className:i.btnAction,size:"small",onClick:()=>{k({type:"chooseAvatarPhotoDialog",payload:{identity:null==t?void 0:t._identity},meta:{onSuccess:e=>{j({type:"setFromPhoto",payload:e}),ed()},onFailure:()=>j({type:"failed"})}})},startIcon:y.createElement(n.s4,{icon:"ico-photo"})},S.formatMessage({id:"choose_from_photos"})):null,Q?y.createElement(d.A,{variant:"outlined",disabled:et,className:i.btnAction,size:"small",onClick:ed,startIcon:y.createElement(n.s4,{icon:"ico-pencil"})},S.formatMessage({id:"edit_avatar"})):null)))}},96563:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var i=a(43961),o=a(98791),n=a(69508),r=a(99221),l=a(30758),s=a(25304),c=a(65599),d=a(52261),m=a(87365),u=a(1161);let p=(0,n.Ay)(c.Ay,{name:"AlertReminderListItem",slot:"Item",shouldForwardProp:e=>"isRead"!==e})(({theme:e,isRead:t})=>({backgroundColor:t?(0,u.X4)(e.palette.background.default,.5):(0,u.X4)(e.palette.primary.light,.1),"&:not(:last-of-type)":{borderBottom:e.mixins.border("secondary")}}));function g({item:e,presentAlert:t}){let{title:a,extra:i}=e,{can_close:o}=i||{},[n,r]=l.useState(!1);return l.createElement(p,{sx:{cursor:"pointer"},onClick:()=>{r(!0),t&&t(e)},isRead:n},l.createElement(d.A,null,l.createElement(s.s4,{icon:o?"ico-info-circle-o":"ico-warning-o"})),l.createElement(m.A,{primary:a}))}let h=(0,n.Ay)(r.A,{name:"AlertReminderList",slot:"Content"})(({theme:e})=>({display:"block"}));function f({title:e,data:t,presentAlert:a,disableCloseAll:n,handleDismissAll:r}){let{useDialog:s,i18n:c}=(0,i.PCX)(),{dialogProps:d,disableBackdropClick:m,closeDialog:u}=s();return(l.useEffect(()=>{m(!0)},[]),null==t?void 0:t.length)?l.createElement(o.lG,{...d,maxWidth:"sm",fullWidth:!0,fullScreen:!1,"data-testid":"dialogAlertReminderList"},l.createElement(o.L3,{disableClose:n,onCancel:()=>{u(),r()}},c.formatMessage({id:e||"notifications"})),l.createElement(o.Cf,{sx:{padding:0}},l.createElement(h,null,t.map(e=>l.createElement(g,{key:null==e?void 0:e.id,presentAlert:a,item:e}))))):null}},96934:function(e,t,a){a.d(t,{A:function(){return v}});var i=a(43961),o=a(69508),n=a(53770),r=a(30758),l=a(20644),s=a.n(l),c=a(41349),d=a(85481),m=a(64487);let u="SuggestionList",p=(0,o.Ay)("div",{name:u,slot:"RootNoFound"})(({theme:e})=>({minHeight:"100px",textAlign:"center"})),g=(0,o.Ay)("div",{name:u,slot:"Root"})(({theme:e})=>({minHeight:"100px",margin:e.spacing(1,-1,0)}));var h=(0,i.NgA)((e,{text:t,identity:a})=>{let i=s()(e,a);return{...e.friend.suggestions[`:${t}`],item_id:null==i?void 0:i.id}})(function(e){let{dispatch:t,i18n:a}=(0,i.PCX)(),{text:o,item_id:n,data:l,loaded:s,onItemClick:u,classes:h,excludeIds:f,isFullFriend:v,postAsParent:y,parentUser:b}=e,x=r.useMemo(()=>v?{excludeIds:f}:{item_type:"photo",item_id:n},[f,n,v]);return(r.useEffect(()=>{t({type:"friend/suggestions/LOAD",payload:{text:o,...x,user_id:y&&(null==b?void 0:b.id),owner_id:null==b?void 0:b.id}})},[t,o,x]),s)?(null==l?void 0:l.length)?r.createElement(g,null,l.map(e=>r.createElement("div",{onClick:t=>{t.preventDefault(),t.stopPropagation(),u(e)},className:h.tagItem,key:e.id.toString()},r.createElement(m.A,{src:(0,c.AE)(e.image,"240"),children:(0,c.cb)(e.label),alt:e.label,className:h.smallAvatar,style:{backgroundColor:c.m6.hex((0,c.cb)(e.label))}}),r.createElement("span",{className:h.userName},e.label)))):r.createElement(p,{onClick:e=>e.stopPropagation()},r.createElement("div",{style:{padding:16}},a.formatMessage({id:"no_people_found"}))):r.createElement(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"default"},onClick:e=>e.stopPropagation()},r.createElement(d.A,{color:"secondary",size:32}))});let f=(0,o.Ay)("input",{name:"Text"})(({theme:e})=>({"&::placeholder":{color:e.palette.text.hint}}));function v({classes:e,onItemClick:t,anchorRef:a,identity:o,isFullFriend:l,excludeIds:s,postAsParent:c,parentUser:d}){let{i18n:m}=(0,i.PCX)(),[u,p]=r.useState("");return r.createElement(n.A,{id:"suggest-friends",open:!!a.current,disablePortal:!0,anchorEl:a.current,placement:"bottom",className:e.popper,onClick:e=>e.stopPropagation()},r.createElement("div",{className:e.inputBaseBox},r.createElement(f,{type:"text",placeholder:m.formatMessage({id:"type_any_name"}),onChange:e=>{p(e.target.value)},autoFocus:!0,onBlur:e=>e.target.focus()})),r.createElement(h,{onItemClick:t,text:u,classes:e,identity:o,isFullFriend:l,excludeIds:s,postAsParent:c,parentUser:d}))}}}]);