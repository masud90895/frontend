(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-components-SiteBarMobileBlock-SiteBarMobileBlock"],{20262:function(e,t,n){"use strict";n.d(t,{A:function(){return A}});var o=n(30758),r=n(13526),a=n(98134),i=n(85206),l=function(e){let{badgeContent:t,invisible:n=!1,max:o=99,showZero:r=!1}=e,i=(0,a.A)({badgeContent:t,max:o}),l=n;!1!==n||0!==t||r||(l=!0);let{badgeContent:s,max:c=o}=l?i:e,p=s&&Number(s)>c?`${c}+`:s;return{badgeContent:s,invisible:l,max:c,displayValue:p}},s=n(69508),c=n(24521),p=n(10512),d=n(78473),m=n(96238),u=n(67864),g=n(98216);function h(e){return(0,g.Ay)("MuiBadge",e)}let f=(0,u.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]);var b=n(51773),v=n(86070);let x=(0,s.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),y=(0,s.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,m.A)(n.anchorOrigin.vertical)}${(0,m.A)(n.anchorOrigin.horizontal)}${(0,m.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,m.A)(n.color)}`],n.invisible&&t.invisible]}})((0,c.A)(({theme:e})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.entries(e.palette).filter((0,p.A)(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]})));function k(e){return{vertical:e?.vertical??"top",horizontal:e?.horizontal??"right"}}var A=o.forwardRef(function(e,t){let n=(0,d.b)({props:e,name:"MuiBadge"}),{anchorOrigin:o,className:s,classes:c,component:p,components:u={},componentsProps:g={},children:f,overlap:A="rectangular",color:R="default",invisible:E=!1,max:w=99,badgeContent:C,slots:I,slotProps:S,showZero:M=!1,variant:O="standard",...z}=n,{badgeContent:B,invisible:T,max:W,displayValue:$}=l({max:w,invisible:E,badgeContent:C,showZero:M}),N=(0,a.A)({anchorOrigin:k(o),color:R,overlap:A,variant:O,badgeContent:C}),L=T||null==B&&"dot"!==O,{color:P=R,overlap:F=A,anchorOrigin:_,variant:D=O}=L?N:n,H=k(_),j="dot"!==D?$:void 0,U={...n,badgeContent:B,invisible:L,max:W,displayValue:j,showZero:M,anchorOrigin:H,color:P,overlap:F,variant:D},X=(e=>{let{color:t,anchorOrigin:n,invisible:o,overlap:r,variant:a,classes:l={}}=e,s={root:["root"],badge:["badge",a,o&&"invisible",`anchorOrigin${(0,m.A)(n.vertical)}${(0,m.A)(n.horizontal)}`,`anchorOrigin${(0,m.A)(n.vertical)}${(0,m.A)(n.horizontal)}${(0,m.A)(r)}`,`overlap${(0,m.A)(r)}`,"default"!==t&&`color${(0,m.A)(t)}`]};return(0,i.A)(s,h,l)})(U),q={slots:{root:I?.root??u.Root,badge:I?.badge??u.Badge},slotProps:{root:S?.root??g.root,badge:S?.badge??g.badge}},[G,V]=(0,b.A)("root",{elementType:x,externalForwardedProps:{...q,...z},ownerState:U,className:(0,r.A)(X.root,s),ref:t,additionalProps:{as:p}}),[Y,K]=(0,b.A)("badge",{elementType:y,externalForwardedProps:q,ownerState:U,className:X.badge});return(0,v.jsxs)(G,{...V,children:[f,(0,v.jsx)(Y,{...K,children:j})]})})},34082:function(e,t,n){var o=n(59020),r=n(23480),a=n(3978),i=n(64139),l=n(87604),s=n(38752),c=n(68382);e.exports=function(e,t,n){if((e=c(e))&&(n||void 0===t))return r(e);if(!e||!(t=o(t)))return e;var p=s(e),d=s(t),m=l(p,d),u=i(p,d)+1;return a(p,m,u).join("")}},49362:function(e,t,n){"use strict";n.d(t,{A:function(){return L}});var o=n(43961),r=n(25304),a=n(99221),i=n(12695),l=n(69508),s=n(34082),c=n.n(s),p=n(4239),d=n.n(p),m=n(30758),u=n(28606),g=n(94215);let h=(0,u.A)(e=>{var t,n,o,r;return(0,g.A)({root:{width:320,position:"absolute",left:"50%",transform:"translateX(-50%)",top:0,paddingTop:13,overflow:"hidden",zIndex:e.zIndex.appBar},rootOpen:{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,boxShadow:e.shadows[8],"& $searchIcon":{color:e.palette.primary.main},"& $resultWrapper":{display:"block"}},form:{width:284,position:"relative",background:e.palette.action.hover,borderRadius:"999px",height:e.spacing(4),margin:e.spacing(0,2,0,2),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{height:e.spacing(4),boxSizing:"border-box"}},formFocused:{border:e.mixins.border("primary"),borderColor:e.palette.primary.main,background:"none"},searchIcon:{color:e.palette.text.secondary,transition:"all .2s ease",cursor:"pointer"},inputRoot:{color:`${e.palette.text.secondary} !important`,width:"100%"},inputInput:{padding:`${e.spacing(.5,1,.75,1)} !important`,boxSizing:"border-box",paddingLeft:"30px",transition:"all .2s ease",width:"100%",height:"32px"},guestBar:{justifyContent:"space-between"},textField:{marginRight:e.spacing(1),height:e.spacing(5),width:"203px","& input":{color:e.palette.text.secondary}},button:{marginRight:e.spacing(2),textTransform:"capitalize",fontWeight:e.typography.fontWeightBold},account:{textTransform:"none",fontWeight:e.typography.fontWeightBold},searchIconFocused:{color:e.palette.primary.main},renderOption:{position:"relative",width:"100%",padding:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"space-between"},removeButton:{minWidth:"16px",cursor:"pointer",height:"26px",borderRadius:"26px",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(14)},labelItem:{flexGrow:1,paddingRight:e.spacing(1)},resultWrapper:{display:"none"},menuList:{margin:0,padding:0},menuItem:{"& + $menuItem":{borderTop:"solid 1px",borderTopColor:null==(t=e.palette.border)?void 0:t.secondary}},menuItemLink:{padding:e.spacing(1.2,2),display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",color:e.palette.text.primary,transition:"all .2s","&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}},menuItemAvatar:{width:e.spacing(6),height:e.spacing(6),marginRight:e.spacing(2)},menuItemIcon:{display:"inline-block",width:e.spacing(4),height:e.spacing(4),lineHeight:"32px",backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"50%",color:"#828080",textAlign:"center",marginRight:e.spacing(2)},headerPopup:{padding:e.spacing(1,1,1,2),display:"flex",justifyContent:"space-between",alignItems:"center",textTransform:"capitalize",fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(18)},headerRecent:{borderBottom:"1px solid",borderBottomColor:null==(n=e.palette.border)?void 0:n.secondary},clearButton:{fontWeight:"normal !important"},recentItem:{padding:e.spacing(1,2),display:"flex",alignItems:"center",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(15),cursor:"pointer","& + $recentItem":{borderTop:"solid 1px",borderTopColor:null==(o=e.palette.border)?void 0:o.secondary}},focusedItem:{backgroundColor:e.palette.action.selected},recentLabel:{flexGrow:1,padding:e.spacing(1,0),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},searchItem:{display:"flex",flexDirection:"row",padding:e.spacing(1.5),color:e.palette.text.primary,alignItems:"center",borderTop:"solid 1px",borderTopColor:null==(r=e.palette.border)?void 0:r.secondary},searchContent:{paddingLeft:e.spacing(1),flexGrow:1,overflow:"hidden"},searchAvatar:{width:48,height:48},searchNote:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,fontWeight:"normal"},searchTitle:{padding:e.spacing(.5,0),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"block",maxWidth:"100%",fontWeight:e.typography.fontWeightBold,fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary},itemName:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,paddingTop:e.spacing(.5),fontWeight:"normal"},noOptions:{fontSize:e.mixins.pxToRem(15),padding:e.spacing(2),display:"block"},searchMinimize:{width:"32px",height:"32px",transition:"all .1s",transform:"translateZ(0)","& $searchIcon":{position:"relative",pointerEvents:"inherit"},"& $inputRoot":{position:"absolute",left:0,top:0,width:"32px",height:"30px",opacity:0,zIndex:2,cursor:"pointer"},[e.breakpoints.down("md")]:{}},divider:{margin:`${e.spacing(0,2,0,1)} !important`,height:"32px !important"}})},{name:"AppBar"});var f=n(56332),b=n(86725),v=n(13526),x=n(4633),y=n.n(x),k=n(24009),A=m.forwardRef(function({onSearch:e,limit:t=5,classes:n},a){let{dispatch:i,i18n:l}=(0,o.PCX)(),[s,c]=m.useState(-1),p=[],{data:d,loaded:u}=(0,k.d4)(e=>e.search.recentSearch);m.useImperativeHandle(a,()=>({moveNext:()=>{if(!(null==d?void 0:d.length))return;let e=Math.min(d.length,t);e&&c(t=>(t+1+e)%e)},movePrev:()=>{if(!(null==d?void 0:d.length))return;let e=Math.min(d.length,t);e&&c(t=>(Math.max(0,t)-1+e)%e)},selected:()=>s>-1?d[s]:void 0})),m.useEffect(()=>{c(-1)},[d]),m.useEffect(()=>{u||i({type:"recentSearch/INIT",payload:{}})},[i,u]);let g=m.useCallback((e,t)=>{e&&(e.preventDefault(),e.stopPropagation()),i({type:"recentSearch/REMOVE",payload:{text:t}})},[]),h=m.useCallback(()=>{i({type:"recentSearch/CLEAR",payload:{}})},[i]);return y()(d)?m.createElement("div",{className:n.menuList,"data-testid":"noRecentSearches"},m.createElement("span",{className:n.noOptions},l.formatMessage({id:"no_recent_searches"}))):u?m.createElement(m.Fragment,null,m.createElement("div",{className:(0,v.A)(n.headerPopup,n.headerRecent)},m.createElement("span",null,l.formatMessage({id:"recents"})),m.createElement(f.A,{onClick:h,className:n.clearButton,tabIndex:-1,size:"medium"},l.formatMessage({id:"clear"}))),m.createElement("div",{className:n.menuList},d.slice(0,5).map((t,o)=>m.createElement("div",{role:"option",tabIndex:-1,ref:e=>{p[o]=e},"aria-selected":s===o,key:t.toString(),onClick:()=>e(t),onMouseOver:()=>c(o),onMouseLeave:()=>c(-1),className:(0,v.A)(n.recentItem,s===o&&n.focusedItem)},m.createElement("span",{className:n.recentLabel},t),m.createElement(b.A,{tabIndex:-1,size:"smaller",onClick:e=>g(e,t),sx:{fontSize:16}},m.createElement(r.s4,{color:"textSecondary",icon:"ico-close"})))))):null}),R=n(41349),E=n(18851),w=n(64487),C=n(85481);let I=e=>e.search.suggestions;var S=m.forwardRef(function({limit:e=6,text:t,classes:n,onSearch:r,isActionSearch:i,blurSearch:l},s){let{i18n:c}=(0,o.PCX)(),[p,d]=m.useState(-1),{data:u,loaded:g}=Object.assign({},(0,k.d4)(I)[t]);return m.useImperativeHandle(s,()=>({moveNext:()=>{if(!(null==u?void 0:u.length))return;let t=Math.min(u.length,e);t&&d(e=>(e+1+t)%t)},movePrev:()=>{if(!(null==u?void 0:u.length))return;let t=Math.min(u.length,e);t&&d(e=>(Math.max(0,e)-1+t)%t)},selected:()=>p>-1?u[p]:void 0})),m.createElement(m.Fragment,null,!!t&&m.createElement(E.A,{paragraph:!0,padding:"16px",margin:"0",sx:{cursor:"pointer"}},i&&m.createElement("span",{onClick:()=>{"function"==typeof r&&r(t)}},`${c.formatMessage({id:"search"})} “${t}”`)),m.createElement("div",{className:n.menuList,"data-testid":"suggestions"},g&&u.length?u.slice(0,e).map((e,t)=>m.createElement(o.Wti,{role:"option","data-testid":"suggestion",key:e.to,to:e.to,onClick:l,onMouseOver:()=>d(t),onMouseLeave:()=>d(-1),className:(0,v.A)(n.searchItem,p===t&&n.focusedItem)},m.createElement(w.A,{className:n.searchAvatar,src:(0,R.AE)(null==e?void 0:e.image,"200"),children:(0,R.cb)(e.title),style:{backgroundColor:R.m6.hex((0,R.cb)(e.title)||"")}}),m.createElement("div",{className:n.searchContent},m.createElement(E.A,{variant:"h5",className:n.searchTitle},e.title),m.createElement("div",{className:n.searchNote},e.note)))):null,g?null:m.createElement(a.A,{sx:{display:"flex",justifyContent:"center",pb:2,color:"text.disabled"}},m.createElement(C.A,{variant:"indeterminate",color:"inherit"}))))}),M=n(76534);let O="search",z="MfHeaderSearchForm",B=(0,l.Ay)(a.A,{name:z,slot:"Root",overridesResolver:({placement:e},t)=>[t.root,"left"===e&&t.rootPlacementLeft,"float-left"===e&&t.rootPlacementFloatLeft,"center"===e&&t.rootPlacementCenter,"right"===e&&t.rootPlacementRight]})(({theme:e,open:t,placement:n})=>({width:320,position:"absolute",top:0,paddingTop:13,zIndex:e.zIndex.appBar,transform:"translateX(-50%)",left:"50%",...t&&{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,boxShadow:e.shadows[8],"& $searchIcon":{color:e.palette.primary.main},"& $resultWrapper":{display:"block"}}})),T=(0,l.Ay)("form",{name:z,slot:"Form",skipSx:!0,skipVariantsResolver:!0,shouldForwardProp:e=>"focused"!==e,overridesResolver:(e,t)=>[t.form]})(({theme:e,focused:t})=>({width:284,position:"relative",background:e.palette.action.hover,borderRadius:"999px",height:e.spacing(4),margin:e.spacing(0,2,0,2),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{height:e.spacing(4),boxSizing:"border-box"},...t&&{border:e.mixins.border("primary"),borderColor:e.palette.primary.main,background:"none"}})),W=(0,l.Ay)(i.Ay,{name:z,slot:"Input"})(({theme:e})=>({color:`${e.palette.text.secondary} !important`,width:"100%","& input::placeholder":{color:e.palette.text.hint}})),$=(0,l.Ay)(a.A,{name:z,slot:"ResultWrapper"})(({open:e})=>({display:e?"block":"none"})),N=(0,l.Ay)(r.s4,{name:z,slot:"SearchIcon",shouldForwardProp:e=>"active"!==e})(({active:e,theme:t})=>({color:t.palette.text.hint,...e&&{color:t.palette.primary.main}}));function L({openSearch:e,minimize:t,closeSearch:n,placement:a,menuRef:i}){var l;let s=h(),{dispatch:p,usePageParams:u,i18n:g,eventCenter:f,navigate:b,location:v,getSetting:x}=(0,o.PCX)(),y=(0,o.IgF)(O,O,"searchHashtagItem"),k=(0,o.IgF)(O,O,"viewAll"),{pathname:E}=v,{q:w}=u(),C=m.useMemo(()=>/^\/hashtag\/search/.test(E)?w?`#${w}`:"":/^\/search/.test(E)?w:"",[E,w]),[I,z]=m.useState({open:!1,text:C,focus:!1,minimize:!!t}),L=x("search"),P=g.formatMessage({id:"search"}),F=m.useRef(),_=m.useRef(),D=m.useRef();m.useEffect(()=>{let e=f.on("minimizeGlobalSearchForm",()=>{z(e=>({...e,minimize:!0}))});return()=>{f.off("minimizeGlobalSearchForm",e)}},[]),m.useEffect(()=>{!0===e&&Y()},[e]);let H=m.useCallback(e=>{if(z(t=>({...t,text:e})),e&&p({type:"recentSearch/ADD",payload:{text:c()(e)}}),e.startsWith("#")&&e.substring(1)){let t={q:e.substring(1),...null==y?void 0:y.pageParams},n=null==k?void 0:k.apiRules,o=(0,R.FI)(t,n);b({pathname:"/hashtag/search",search:M.stringify(o)},{replace:!0})}else b(`/search/?q=${e}`);(null==_?void 0:_.current)&&_.current.blur(),q()},[]),j=m.useCallback(()=>{z(e=>({...e,focus:!1,open:!1}))},[]),U=m.useCallback(()=>{var e;(null==(e=F.current)?void 0:e.movePrev)&&F.current.movePrev()},[]),X=m.useCallback(()=>{var e;(null==(e=F.current)?void 0:e.moveNext)&&F.current.moveNext()},[]),q=m.useCallback(()=>{z(e=>({...e,focus:!1,open:!1})),n&&n()},[n]),G=m.useCallback(e=>{var t;let o=null==(t=_.current)?void 0:t.value;if("#"===o)return;e&&(e.preventDefault(),e.stopPropagation());let r=c()(o);r||q(),r&&(p({type:"recentSearch/ADD",payload:{text:r}}),H(r)),n&&n()},[n]),V=m.useCallback(e=>{let t=e.currentTarget.value;z(e=>({...e,text:t,selectedIndex:0})),p({type:"suggestions/QUERY",payload:{text:t}})},[]),Y=m.useCallback(()=>{if(!I.open&&(z(e=>({...e,focus:!0,open:!0})),_.current)){var e;null==(e=_.current)||e.focus()}p({type:"suggestions/QUERY",payload:{text:I.text}})},[I.open,I.text]),K=m.useCallback(()=>{n&&n(),z(e=>({...e,open:!1,focus:!1}))},[n]),Q=m.useCallback(()=>{var e,t;let n=null==(e=F.current)?void 0:e.selected();if(n){null==(t=_.current)||t.blur(),d()(n)?H(n):b(null==n?void 0:n.to);return}G()},[I.text]),J=m.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),Z=m.useCallback(e=>{let t=null==e?void 0:e.keyCode;if(!e.metaKey&&!e.ctrlKey)switch(t){case 9:j();break;case 27:j(),J(e);break;case 13:Q(),J(e);break;case 38:U(),J(e);break;case 40:X(),J(e);break;default:I.open||Y()}},[I.open]);return(m.useEffect(()=>{let e=["/search","/hashtag/search"].some(e=>E.startsWith(e));z(t=>({...t,text:e?C:""}))},[E,C]),L)?m.createElement(r.qB,{onClickAway:K,excludeRef:i},m.createElement(B,{ref:D,"data-testid":"formSearch",open:I.open,placement:null!=a?a:"center",role:"search",id:"globalSearchBox"},m.createElement(T,{method:"get",focused:!!I.open,"aria-expanded":!I.minimize,onSubmit:G},m.createElement(W,{startAdornment:m.createElement(N,{active:!!I.open,icon:"ico-search-o"}),placeholder:P,classes:{root:s.inputRoot,input:s.inputInput},autoComplete:"off",value:I.text,name:"globalSearch",inputProps:{"aria-label":"search","data-testid":"searchBox",autoComplete:"off",autoCapitalize:"off"},inputRef:_,onFocus:Y,onChange:V,onKeyDown:Z})),I.open?m.createElement($,{open:I.open},I.text?m.createElement(S,{ref:F,onSearch:H,classes:s,text:I.text,isActionSearch:(null==(l=_.current)?void 0:l.value)!=="#",blurSearch:K}):m.createElement(A,{onSearch:H,ref:F,classes:s})):null)):null}},64139:function(e,t,n){var o=n(31451);e.exports=function(e,t){for(var n=e.length;n--&&o(t,e[n],0)>-1;);return n}},70346:function(e,t,n){"use strict";n.r(t);var o=n(82861),r=n(43961),a=n(1530),i=n(25304),l=n(41349),s=n(39489),c=n(99221),p=n(85179),d=n(72389),m=n(20262),u=n(69508),g=n(4633),h=n.n(g),f=n(30758),b=n(49362),v=n(18935),x=n(24009);let y=[{to:"/",icon:"ico-home-alt",appName:"feed",scrollTop:!0,showWhen:["truthy","visibleMenus.home"]},{to:"/messages",icon:"ico-comment-o",appName:"chatplus",name:"new_chat_message",showWhen:["and",["truthy","setting.chatplus.server"],["truthy","visibleMenus.message"]],action:"chatplus/menu/clickItem"},{to:"/messages",icon:"ico-comment-o",appName:"chat",name:"new_chat_message",showWhen:["and",["truthy","setting.chat.is_active"],["falsy","setting.chatplus.server"],["truthy","pusherService"],["truthy","visibleMenus.message"]]},{to:"/notification",icon:"ico-bell-o",appName:"notification",name:"new_notification",showWhen:["truthy","visibleMenus.notification"],action:"notification/menu/clickItem"},{icon:"ico-search-o",appName:"",style:"search",showWhen:["or",["truthy","visibleMenus.search"],["eqeqeq","position","top"]]}],k=(0,u.Ay)("div",{name:"MenuWrapper"})(({theme:e,minHeight:t,active:n,position:o})=>({display:"flex",height:t,backgroundColor:e.mixins.backgroundColor("paper"),zIndex:1300,left:0,right:0,position:"fixed",transition:"all .5s ease",..."top"===o?{borderBottom:e.mixins.border("secondary"),bottom:"auto",top:0,...n?{top:`-${t}px`}:{}}:{borderTop:e.mixins.border("secondary"),bottom:0,...n?{bottom:`-${t}px`}:{}}})),A=(0,u.Ay)(i.s4,{name:"MenuButtonIcon"})(({theme:e})=>({width:24,height:24,fontSize:e.mixins.pxToRem(24)})),R=(0,u.Ay)(r.N_E,{name:"MenuButton",shouldForwardProp:e=>"activeMenu"!==e})(({theme:e,activeMenu:t})=>({flex:"1",minWidth:"64px",display:"flex",alignItems:"center",justifyContent:"center",borderTop:"solid 2px #fff",".appbar-position-top &":{borderTop:0,borderBottom:"solid 2px #fff"},...t&&{color:`${e.palette.primary.main} !important`,borderColor:`${e.palette.primary.main} !important`}})),E=(0,u.Ay)(s.Ay,{name:"PopoverStyled"})(({theme:e})=>{var t;return{"& .MuiPopover-paper":{maxWidth:"100%",width:"100%",borderRadius:0,top:"0px !important",bottom:0,boxShadow:"none !important",borderTop:`solid 1px ${null==(t=e.palette.border)?void 0:t.secondary}`,maxHeight:"calc(100% - 49px)"}}}),w=(0,u.Ay)("div",{name:"DropdownMenuWrapper"})(({theme:e})=>({width:"100%",minHeight:"calc(100vh - 60px)"})),C=(0,u.Ay)("div",{name:"UserBlock"})(({theme:e})=>{var t;return{display:"flex",alignItems:"center",padding:e.spacing(2),borderBottom:`solid 1px ${null==(t=e.palette.border)?void 0:t.secondary}`}}),I=(0,u.Ay)("div",{name:"Avatar"})(({theme:e})=>({width:48,marginRight:e.spacing(1)})),S=(0,u.Ay)("div",{name:"UserInner"})(({theme:e})=>({flex:1,minWidth:0,display:"flex",flexDirection:"column"})),M=(0,u.Ay)(c.A,{name:"UserName"})(({theme:e})=>({color:e.palette.text.primary,fontWeight:"bold"})),O=(0,u.Ay)(r.N_E,{name:"LinkInfo"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1,color:e.palette.text.secondary})),z=(0,u.Ay)("div",{name:"UserAction"})(({theme:e})=>({marginLeft:"auto","& > .ico":{width:32,height:32,fontSize:e.mixins.pxToRem(24),color:e.palette.text.secondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}})),B=(0,u.Ay)("div",{name:"MenuApp"})(({theme:e})=>({paddingTop:e.spacing(.5),"& ul":{marginLeft:e.spacing(-1),paddingBottom:e.spacing(4)},"& ul > li":{marginLeft:0,marginRight:0,marginBottom:e.spacing(1),paddingLeft:0,"& > a":{display:"flex",padding:e.spacing(1),fontSize:"0.9375rem",alignItems:"center",fontWeight:"bold"}}})),T=(0,u.Ay)("div",{name:"SearchMobile"})(({theme:e})=>({display:"block",zIndex:"1301",position:"absolute",backgroundColor:e.palette.background.paper,top:"0",width:"100%",height:"100%","& > div":{width:"100%"},"& form":{width:"calc(100% - 96px)"}})),W=(0,u.Ay)(r.N_E,{name:"CancelButton"})(({theme:e})=>({position:"absolute",zIndex:e.zIndex.appBar,right:"16px",top:"50%",transform:"translateY(-50%)"})),$=(0,u.Ay)(p.A,{name:"OfflineMode"})(({theme:e})=>({marginTop:e.spacing(1),width:"fit-content",backgroundColor:e.palette.warning.main,color:"#fff",cursor:"pointer"})),N=(0,u.Ay)("div",{name:"HeightFixed"})(({heightApp:e})=>({height:e}));t.default=(0,r.WvA)({name:"SiteBarMobileBlock",extendBlock:function({blockProps:e,visibleMenus:t,slotName:n}){var s,p,u;let{i18n:g,useSession:L,navigate:P,usePageParams:F,getSetting:_,jsxBackend:D,getAcl:H,useIsMobile:j,useTheme:U,dispatch:X}=(0,r.PCX)(),q="header"===n?"top":"bottom",G=(0,r.zy2)(),V=L(),{user:Y,loggedIn:K}=V,[Q,J]=f.useState(!1),[Z,ee]=f.useState(!1),[et,en]=f.useState(!1),eo=f.useRef(),er=_(),ea=H(),ei=j(),el=f.useRef(),es=null!=(u=null==(s=U().appBarMobileConfig)?void 0:s.nav)?u:48,ec=(0,x.d4)(v.Wy),ep=D.get("core.ui.footerList"),ed=H("core.admincp.has_admin_access"),em=_("core.offline"),eu=(0,r.cbF)("core","accountMenu"),[eg]=(0,r.Vd3)(null,{}),eh=(0,d.A)(),[ef,eb]=f.useState(0);f.useEffect(()=>{K&&document.body.classList.add(`appbar-${q}`)},[q,K]),f.useEffect(()=>{var e;eb(null==(e=el.current)?void 0:e.clientHeight)},[]);let ev=(0,l.Ue)(eu.items,{setting:er,acl:ea,session:V,isMobile:ei}),ex=(0,l.Ue)(y,{setting:er,pusherService:!!r._W3,visibleMenus:t,position:q}),{appName:ey="feed"}=F(),ek=()=>{J(e=>!e)},eA=()=>{en(e=>!e)};f.useEffect(()=>{J(!1)},[G.pathname]),f.useEffect(()=>{Q||ee(!1)},[Q]);let eR=Q?"dropdownMenuMobile":void 0;return h()(Y)?null:f.createElement(a.eB,null,f.createElement(a.tD,null,f.createElement(N,{heightApp:ef}),f.createElement(k,{ref:el,active:eh,minHeight:es,position:q,className:`appbar-position-${q}`},ex.map((e,t)=>"search"!==e.style?f.createElement(R,{key:`k${t}`,role:"button",to:e.to,activeMenu:ey===e.appName&&!Q,underline:"none",onClick:()=>{e.scrollTop&&window.scrollTo(0,0),(null==e?void 0:e.action)&&X({type:e.action})}},ec[null==e?void 0:e.name]?f.createElement(m.A,{color:"error",badgeContent:ec[null==e?void 0:e.name],max:99},f.createElement(A,{icon:e.icon})):f.createElement(A,{icon:e.icon})):f.createElement(f.Fragment,{key:`k${t}`},f.createElement(R,{role:"button",to:e.to,activeMenu:ey===e.appName&&!Q,underline:"none",onClick:eA},f.createElement(A,{icon:e.icon})),et?f.createElement(T,null,f.createElement(b.A,{openSearch:et,menuRef:el,closeSearch:()=>en(!1)}),f.createElement(W,{onClick:eA},g.formatMessage({id:"cancel"}))):null)),f.createElement(R,{role:"button",ref:eo,activeMenu:Q,onClick:()=>{J(e=>!e)},underline:"none"},f.createElement(A,{icon:"ico-navbar"}))),f.createElement(E,{id:eR,open:!!Q,anchorEl:eo.current,onClose:ek,anchorReference:"anchorPosition",anchorPosition:{top:0,left:0},style:{maxWidth:"100%"},marginThreshold:0,transitionDuration:0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},f.createElement(w,null,f.createElement(C,null,f.createElement(I,null,f.createElement(i.H8,{user:Y,size:48})),f.createElement(S,null,f.createElement(i.mE,{variant:"body1",lines:2},f.createElement(M,null,Y.full_name)),f.createElement(O,{onClick:()=>{ek(),P(Y.link)}},(null==Y||null==(p=Y.role)?void 0:p.name)||g.formatMessage({id:"view_profile"})),ed&&em&&f.createElement("a",{href:r.vl,target:"_blank",rel:"noreferrer"},f.createElement($,{size:"small",label:g.formatMessage({id:"offline_mode"})}))),f.createElement(z,null,f.createElement(i.s4,{icon:Z?"ico ico-angle-left":"ico ico-angle-right",onClick:()=>{ee(e=>!e)}}))),f.createElement(B,null,Z?f.createElement(f.Fragment,null,ev.filter(Boolean).map((e,t)=>D.render({component:`menuItem.as.${e.as||"normal"}`,props:{key:t.toString(),item:e,variant:(null==e?void 0:e.variant)||"contained",handleAction:eg}}))):f.createElement(o.A,{appName:"core",menuName:"primaryMenu",displayViewMore:!1})),ep&&!Z&&f.createElement(c.A,{sx:{px:2,pb:2,pt:1}},f.createElement(ep,{color:"inherit"}))))))},defaults:{visibleMenus:{home:!0,message:!0,notification:!0,search:!1}},custom:{home:{component:"Checkbox",name:"visibleMenus.home",label:"Show Home Icon",fullWidth:!0},message:{component:"Checkbox",name:"visibleMenus.message",label:"Show Message Icon",fullWidth:!0},notification:{component:"Checkbox",name:"visibleMenus.notification",label:"Show Notification Icon",fullWidth:!0}}})},72389:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var o=n(30758);function r(e,t){let{disableHysteresis:n=!1,threshold:o=100,target:r}=t,a=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),(!!n||void 0===a||!(e.current<a))&&e.current>o}let a="undefined"!=typeof window?window:null;function i(e={}){let{getTrigger:t=r,target:n=a,...l}=e,s=o.useRef(),[c,p]=o.useState(()=>t(s,l));return o.useEffect(()=>{if(null===n)return p(!1);let e=()=>{p(t(s,{target:n,...l}))};return e(),n.addEventListener("scroll",e,{passive:!0}),()=>{n.removeEventListener("scroll",e,{passive:!0})}},[n,t,JSON.stringify(l)]),c}},82861:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var o=n(43961),r=n(1530),a=n(41349),i=n(30758),l=n(28606),s=n(94215);let c=(0,l.A)(e=>(0,s.A)({root:{},menu:{},text:{flexGrow:1},colapseIcon:{},icon:{color:"#fff",backgroundColor:e.palette.primary.main,borderRadius:"32px",width:"32px",height:"32px",textAlign:"center",marginRight:e.spacing(2),lineHeight:"32px"},dropDownIcon:{},menuItemAvatar:{},menuItemIcon:{fontSize:e.mixins.pxToRem(18),display:"inline-block",textAlign:"center",marginRight:e.spacing(1),backgroundColor:"#e0dddd",borderRadius:"50%",lineHeight:"32px",width:e.spacing(4)},menuItem:{height:e.spacing(7),fontWeight:e.typography.fontWeightRegular,margin:e.spacing(0,-1),"& a":{padding:e.spacing(0,1)},"&:hover":{backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius}},menuItemText:{fontSize:e.mixins.pxToRem(15)},menuItemLink:{color:"light"===e.palette.mode?e.palette.text.primary:e.palette.text.secondary,display:"block",height:"100%",lineHeight:`${e.spacing(7)}px`},activeMenuItem:{"& $menuItemLink":{color:e.palette.primary.main,fontWeight:"bold"},"& $menuItemIcon":{color:e.palette.background.paper,backgroundColor:e.palette.primary.main}},menuItemButton:{marginTop:e.spacing(2),"& .ico":{marginRight:e.spacing(1)}},buttonLink:{fontSize:e.mixins.pxToRem(18),fontWeight:"bold",height:e.spacing(5)},headerBlock:{fontSize:e.mixins.pxToRem(18),fontWeight:"bold",color:"light"===e.palette.mode?e.palette.text.secondary:e.palette.text.primary,padding:e.spacing(2,0)}}),{name:"SidebarAppMenu"});var p=n(20644),d=n.n(p);let m={};function u({displayTitle:e,displayViewMore:t=!0,title:n,blockProps:l,appName:s,menuName:p,item:u,displayLimit:g=5}){let h=c(),{usePageParams:f,useSession:b,getAcl:v,jsxBackend:x,compactUrl:y,getSetting:k,i18n:A,location:R,useIsMobile:E}=(0,o.PCX)(),w=E(!0),C=i.useRef(!1),I=v(),{tab:S,pathname:M,id:O}=f(),z=M||(null==R?void 0:R.pathname),B=b(),T=k(),{appName:W,module_name:$}=f(),N=s||W||$||"core",[L,P]=i.useState(d()(m,N)),F=(0,i.useCallback)(()=>{m={[N]:!L},P(e=>!e)},[]),_=(0,o.cbF)(s||W||$||"core",p),D=(0,a.Ue)(null==_?void 0:_.items,{setting:T,session:B,acl:I,item:u,isMobile:w}),H=D.filter(e=>"sidebarButton"===e.as).length,j=(0,i.useMemo)(()=>{let e=[...D];return e.length?(e.length<=g+H||!t||(L?e.splice(e.length-H,0,{icon:"ico-angle-up",testid:"less",label:A.formatMessage({id:"less"}),onClick:F,to:null}):e.splice(g,e.length-(g+H),{icon:"ico-angle-down",testid:"more",label:A.formatMessage({id:"more"}),onClick:F,to:null})),e):[]},[D,g,H,t,L,A,F]),U=(0,i.useMemo)(()=>-1!==D.findIndex(e=>(0,a.w7)(z,e.to)),[D,z]),X=(0,i.useMemo)(()=>!j.some(e=>(0,a.w7)(z,e.to)),[j,z]);return i.useEffect(()=>{!C.current&&U&&X&&F(),C.current=!0},[U,X]),i.createElement(r.eB,{testid:"blockSidebarMenu"},e&&i.createElement(r.Tw,{title:n}),i.createElement(r.tD,null,i.createElement("div",{role:"menu"},j.map((e,t)=>x.render({component:`menuItem.as.${e.as||"sidebarLink"}`,props:{key:t.toString(),variant:"contained",item:{...e,to:e.to?y(e.to,{id:O}):void 0},classes:h,active:S&&S===e.tab||(0,a.w7)(z,e.to)}})))))}},87604:function(e,t,n){var o=n(31451);e.exports=function(e,t){for(var n=-1,r=e.length;++n<r&&o(t,e[n],0)>-1;);return n}},98134:function(e,t,n){"use strict";var o=n(30758);t.A=e=>{let t=o.useRef({});return o.useEffect(()=>{t.current=e}),t.current}}}]);