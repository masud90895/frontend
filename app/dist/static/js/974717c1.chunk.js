(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-photo-components-PhotoViewDetailMobile-index"],{17740:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return P}});var n=l(43961),a=l(32758),i=l(65663),o=l(25304),r=l(69508),d=l(99221),s=l(58875),m=l(30758),c=l(24009),p=l(18935);let u="PhotoDetailMobile",g=(0,r.Ay)("div",{name:u,slot:"HeaderItemAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,0,2,2)})),f=(0,r.Ay)(d.A,{name:u,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),v=(0,r.Ay)("div",{name:u,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),x=(0,r.Ay)("div",{name:u,slot:"Root"})(({theme:e})=>({padding:0,borderRadius:e.shape.borderRadius,maxWidth:1200,margin:"auto",[e.breakpoints.down("xs")]:{flexFlow:"column"}})),y=(0,r.Ay)("div",{name:u,slot:"Header"})(({theme:e})=>({display:"flex",flexDirection:"row",marginBottom:e.spacing(2),padding:e.spacing(0,2)})),h=(0,r.Ay)("div",{name:u,slot:"HeaderAvatarHolder"})(({theme:e})=>({paddingRight:e.spacing(1.5)})),E=(0,r.Ay)("div",{name:u,slot:"HeaderInfo"})(({theme:e})=>({padding:"4px 0",flex:1})),A=(0,r.Ay)(o.xE,{name:u,slot:"ProfileLink"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary})),b=(0,r.Ay)("div",{name:u,slot:"PrivacyBlock"})(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary})),$=(0,r.Ay)("span",{name:u,slot:"SeparateSpans"})(({theme:e})=>({display:"flex",alignItems:"center","& span + span:before":{content:'"\xb7"',display:"inline-block",padding:`${e.spacing(0,.5)}`}})),_=(0,r.Ay)(d.A,{name:u,slot:"Info"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary})),w=(0,r.Ay)("div",{name:u,slot:"PhotoReaction"})(({theme:e})=>({padding:e.spacing(0,2,2,2)})),R=(0,r.Ay)("div",{name:u,slot:"ImageContainer",shouldForwardProp:e=>"fullScreenView"!==e})(({theme:e,fullScreenView:t})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexGrow:1,...t&&{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:99}}));var k=l(18313),P=(0,n.FB$)((0,k.A)(function({item:e,actions:t,handleAction:l,state:r,user:u,identity:k,nextUrl:P,prevUrl:I,mediaType:C,shouldPreload:H,fromResource:M,fromResourceId:T}){var z;let{jsxBackend:S,ItemDetailInteraction:D,ItemActionMenu:U,useGetItem:W,useGetItems:B,i18n:F,dispatch:N,navigate:V}=(0,n.PCX)(),L=(0,n.zy2)(),O=S.get("core.itemView.pendingReviewCard"),j=(0,c.d4)(t=>(0,p.Vo)(t,e));m.useEffect(()=>{H&&N({type:`photo/${M}/LOAD`,payload:{identity:k,direction:H,[M]:T}})},[H]);let G=S.get("media.ui.viewSet"),X=S.get("core.ui.taggedFriend"),Z=S.get("core.ui.taggedPlace"),{categories:q,album:J,location:K}=e||{},Q=W(J),Y=B(q),ee=m.useCallback(e=>{var t;V({pathname:e},{replace:!0,state:{asModal:null==L||null==(t=L.state)?void 0:t.asModal}})},[V,null==L||null==(z=L.state)?void 0:z.asModal]);return e?m.createElement(x,null,O&&m.createElement(O,{sx:{borderRadius:0},item:e}),m.createElement(g,null,!Q||(null==Q?void 0:Q.is_default)?null:m.createElement(m.Fragment,null,m.createElement(f,{sx:{pt:2}},m.createElement(o.s4,{icon:" ico-photos-o"}),m.createElement(v,null,F.formatMessage({id:"from_album_name"},{name:m.createElement(n.N_E,{to:null==Q?void 0:Q.link},null==Q?void 0:Q.name)}))),m.createElement(d.A,{sx:{pt:2}},m.createElement(s.A,null))),m.createElement(o.h4,{data:Y,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),m.createElement(y,null,m.createElement(h,null,m.createElement(o.H8,{user:u,size:48})),m.createElement(E,null,m.createElement("div",null,m.createElement(A,{user:u})),m.createElement(b,null,m.createElement($,null,m.createElement(o.g6,{value:e.privacy,item:null==e?void 0:e.privacy_detail}),m.createElement(o.h1,{value:e.creation_date})))),m.createElement(U,{identity:k,state:r,handleAction:l})),m.createElement(d.A,{px:2},e.text||e.description?m.createElement(_,{mb:2},m.createElement(o.Zn,{truncateProps:{variant:"body1",lines:3}},m.createElement(a.Ay,{html:e.text||e.description}))):null,(null==j?void 0:j.length)||(null==K?void 0:K.address)?m.createElement(d.A,{mb:2,sx:{"& a":{fontWeight:"700",color:e=>e.palette.text.primary}}},(null==j?void 0:j.length)?m.createElement(X,{item_type:e.resource_name,item_id:e.id,total:j.length,users:j}):null,(null==K?void 0:K.address)?m.createElement(d.A,{component:"span",ml:.5},F.formatMessage({id:"at_tagged_place"},{name:K.address,bold:()=>m.createElement(Z,{place:K})})):null):null),m.createElement(R,null,m.createElement(G,{mediaType:C,identity:k,onArrowClick:ee,onAddPhotoTag:e=>{N({type:i.kx,payload:{identity:k,data:e}})},onRemovePhotoTag:e=>{N({type:i.R9,payload:{identity:k,id:e}})},nextUrl:P,prevUrl:I,sxWrapper:{minHeight:"350px"}})),m.createElement(w,null,m.createElement(D,{identity:k,handleAction:l}))):null}),()=>{})},18313:function(e,t,l){"use strict";var n=l(43961),a=l(88273),i=l.n(a),o=l(20644),r=l.n(o),d=l(65663);t.A=(0,n.NgA)((e,{photo_set:t,photo_album:l,identity:n,photo_id:a,media_type:o})=>{var s,m;let c=r()(e,n);if(!c)return{};let[p,u]=l?[d.hO,l]:t?[d.HN,t]:[],g=(r()(e,`photo.entities.${p}.${u}.photos`)||[]).filter(t=>{if(!r()(e,t).error)return t}),f=(null==c?void 0:c.user)?r()(e,c.user):void 0,v=null==g?void 0:g.length,x=1<v?i()(g,e=>e===n):-1,y=c.user_tags?c.user_tags.map(t=>r()(e,t)).filter(Boolean):[],h={item:c,photos:g,user:f,photo_id:a,user_tags:y,mediaType:o,nextUrl:void 0,prevUrl:void 0,shouldPreload:((e,t,l=3)=>t<l?"prev":t>e-l-1?"next":"")(v,x),fromResource:p,fromResourceId:u};if(-1<x){let n="/photo";if(t&&(n=`/media/${t}`),l&&(n=`/media/album/${l}`),x<v-1){let t=g[x+1],l=t.split(".")[2],a=null==(s=r()(e,t))?void 0:s.slug;h.nextUrl=`${n}/${l}/${t.replace(`${l}.entities.${l}.`,"")}${a?`/${a}`:""}`}if(0<x){let t=g[x-1],l=null==(m=r()(e,t))?void 0:m.slug,a=t.split(".")[2];h.prevUrl=`${n}/${a}/${t.replace(`${a}.entities.${a}.`,"")}${l?`/${l}`:""}`}}return h})},88273:function(e,t,l){var n=l(49667),a=l(85525),i=l(8825),o=Math.max;e.exports=function(e,t,l){var r=null==e?0:e.length;if(!r)return -1;var d=null==l?0:i(l);return d<0&&(d=o(r+d,0)),n(e,a(t,3),d)}}}]);