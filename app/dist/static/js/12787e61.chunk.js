"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-photo-components-UploadMultiPhoto-UploadMultiPhotoField"],{20479:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var i=r(58797),n=r(43961),o=r(25304),a=r(56332),l=r(12599),s=r(32367),d=r(63027),u=r(99221),c=r(18851),g=r(69508),h=r(79765),p=r(98002),m=r.n(p),v=r(4633),f=r.n(v),b=r(57468),S=r.n(b),w=r(30758),D=r(52260),C=r(87887),y=r(28017);let P=(0,g.Ay)("div",{name:"MultipleUploadField",slot:"Control",shouldForwardProp:e=>"haveError"!==e})(({theme:e,haveError:t})=>({height:120,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",border:e.mixins.border("secondary"),borderColor:"light"===e.palette.mode?"#0000003b":"rgba(255, 255, 255, 0.23)","& .ico-photos-plus-o":{fontSize:`${e.mixins.pxToRem(15)} !important`},"&:hover":{borderColor:"light"===e.palette.mode?"#000":"#fff"},"& button":{[e.breakpoints.down("sm")]:{flexDirection:"column",height:"auto",maxWidth:"calc(100% - 40px)",padding:"10px"}},...t&&{borderColor:`${e.palette.error.main} !important`}})),I=(0,g.Ay)(a.A,{name:"DropButton",slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),M=(0,g.Ay)(a.A,{name:"MultipleUploadField",slot:"AddMoreBtnWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.primary.main,borderStyle:"solid",borderWidth:1,borderRadius:e.shape.borderRadius,height:"100%",width:"100%"})),O=(0,g.Ay)(l.A,{name:"Label"})(({theme:e,haveError:t})=>({padding:e.spacing(0,1),background:e.palette.background.paper,...t&&{color:e.palette.error.main}}));function E({name:e,formik:t,acceptTypeFile:r,config:a,disabled:l}){var g;let{accept:p,upload_url:v,item_type:b,max_upload_filesize:E,description:A,label:k,isVideoUploadAllowed:x,acceptFail:_,required:R,allowDrop:U,allowEditPhoto:F=!1,thumbnail_sizes:z,aspectRatio:T="auto",columnSpacing:B=1,rowSpacing:H=1,grid:j={md:4,sm:6,xs:6},mappingEditPhotoFields:N=[],editPhotoAction:V}=a,{i18n:W,jsxBackend:$,ParserPreviewPhoto:L}=(0,n.PCX)(),[,,{setValue:q}]=(0,h.Mt)("fileItemType"),[X,Y,{setValue:Z,setTouched:G}]=(0,h.Mt)(null!=e?e:"ItemPhotoField"),J=(0,w.useRef)(),[K,Q]=w.useState({}),[ee,et,er]=(0,D.A)({initialValues:X.value||[],upload_url:v,maxSizeLimit:E,isAcceptVideo:x,messageAcceptFail:_,accept:r||p,inputRef:J}),ei=a.placeholder||"add_photo";w.useEffect(()=>{S()(ee,X.value)||(f()(ee)&&q(void 0),f()(ee)||Y.touched||G(!0),Z(ee.map((e,t)=>({...e,ordering:t+1,file_type:null==e?void 0:e.type,fileItemType:b,status:null==e?void 0:e.status,thumbnail_sizes:z,onUploadProgress:t=>((e,t)=>{let r=Math.round(100*e.loaded/e.total);Q(e=>({...e,[t]:r}))})(t,(null==e?void 0:e.id)||(null==e?void 0:e.uid))}))))},[ee]);let en=()=>{J.current.click()},eo=e=>{e.length&&er(e,X.value)},ea=!!(Y.error&&(Y.touched||t.submitCount)),el=null==X||null==(g=X.value)?void 0:g.filter(e=>(null==e?void 0:e.status)!=="remove"),es=null==el?void 0:el.length,ed=w.useCallback((e,t)=>{et(r=>{let i=[...r].sort((e,t)=>{let r="remove"===e.status,i="remove"===t.status;return r&&!i?1:!r&&i?-1:0});return i.splice(t,0,i.splice(e,1)[0]),[...i=null==i?void 0:i.map((e,t)=>({status:"update",...e,ordering:t+1}))]})},[et]),eu=w.useCallback((e,t)=>{et(r=>(0,y.jM)(r,r=>{let i=r.find(t=>(null==t?void 0:t.uid)===e||(null==t?void 0:t.id)===e);i&&((null==i?void 0:i.status)||(i.status="update"),Object.assign(i,t))}))},[et]);return w.createElement(w.Fragment,null,w.createElement(s.A,{required:R,error:ea,fullWidth:!0,margin:"normal","data-testid":m()(`field ${e}`)},w.createElement(O,{haveError:ea,required:R,variant:"outlined",shrink:!0,color:"primary",disabled:l||t.isSubmitting},a.label),es?w.createElement(d.Ay,{container:!0,columnSpacing:B,rowSpacing:H},w.createElement(d.Ay,{item:!0,...j},w.createElement(o.dl,{style:{height:"100%"},onDrop:e=>eo(e),render:({canDrop:e,isOver:r})=>w.createElement(M,{disabled:l||t.isSubmitting,onClick:en,startIcon:w.createElement(o.s4,{icon:"ico-photos-plus-o"}),sx:{fontWeight:"bold"},size:"large"},k)})),null==el?void 0:el.map((e,r)=>{let i=(null==e?void 0:e.uid)||(null==e?void 0:e.id);return w.createElement(d.Ay,{item:!0,key:i,...j},w.createElement(L,{item:e,onParse:t=>{et(r=>r.map(r=>{var i,n;return(null==r?void 0:r.uid)===(null==e?void 0:e.uid)&&(null==t||null==(i=t.preUploadFile)?void 0:i.url)?{...r,...null==t?void 0:t.preUploadFile,source:t.source,id:null==t||null==(n=t.preUploadFile)?void 0:n.temp_file}:r}))}},w.createElement(u.A,{sx:{position:"relative"}},w.createElement(C.A,{aspectRatio:T,index:r,id:i,movePhoto:ed,item:e,allowDnD:U,allowEdit:F,editPhotoAction:V,mappingEditPhotoFields:N,removeItem:()=>{var r;let i;return!t.isSubmitting&&((null==e?void 0:e.uid)?(i=null==e?void 0:e.uid,et(e=>e.filter(e=>e.uid!==i))):(r=e.id,void et(e=>e.map(e=>e.id===r?{...e,status:"remove"}:e))))},editItem:eu}),$.render({component:"photo.progress.loading",props:{value:K[i]||0,uploading:t.isSubmitting}}))))})):w.createElement(o.dl,{onDrop:e=>eo(e),render:({canDrop:t,isOver:r})=>w.createElement(P,{haveError:ea,role:"button",onClick:en},w.createElement(I,{size:"small",color:"primary",isOver:r,variant:"outlined","data-testid":m()(`field ${e}`),startIcon:w.createElement(o.s4,{icon:"ico-photos-plus-o"})},W.formatMessage({id:ei})))}),w.createElement("input",{ref:J,type:"file","aria-hidden":!0,className:"srOnly",multiple:!0,accept:r||p,onChange:()=>{let e=J.current.files;e.length&&(q(b),er(Object.values(e),X.value),(null==J?void 0:J.current)&&(J.current.value=null))}})),A?w.createElement(c.A,{sx:{fontSize:"13px"},color:"text.hint",mt:1},A):null,ea?w.createElement(i.A,{error:Y.error}):null)}},21818:function(e,t,r){var i=r(41349),n=r(69508),o=r(30758);let a=(0,n.Ay)("div",{name:"MultipleUploadField",slot:"PreviewImg",shouldForwardProp:e=>"radio"!==e})(({theme:e,radio:t})=>({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:e.palette.grey.A700,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"auto 100%",maxWidth:"100%",...t&&"horizontal"===t&&{backgroundSize:"cover"}}));t.A=({item:e})=>{let[t,r]=o.useState({}),n=(null==e?void 0:e.source)||e.image_url||(0,i.AE)(null==e?void 0:e.image,"1024");o.useEffect(()=>{try{let e=new Image;e.src=n,e.onload=()=>{r({height:e.height,width:e.width})},e.onerror=e=>{}}catch(e){}},[]);let l="horizontal";return l=t&&t.width/t.height<=1?"vertical":"horizontal",o.createElement(a,{radio:l,style:{backgroundImage:`url(${n})`}})}},32501:function(e,t,r){r.d(t,{i:function(){return b}});var i=r(97451),n=r(8351),o=r(99080),a=r(30758),l=r(35737),s=r(1788),d=r(40508);class u{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e),t}reconnectDragPreview(e=!1){let t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!(0,l.b)(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!(0,l.b)(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=(0,d.i)({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,(0,s.i)(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,(0,s.i)(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}var c=r(37696),g=r(83826);let h=!1,p=!1;class m{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){(0,i.V)(!h,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return h=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{h=!1}}isDragging(){if(!this.sourceId)return!1;(0,i.V)(!p,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return p=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{p=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}var v=r(57936);class f{beginDrag(){let e=this.spec,t=this.monitor,r=null;return null!=(r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{})?r:null}canDrag(){let e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){let r=this.spec,i=this.monitor,{isDragging:n}=r;return n?n(i):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,r=this.connector,{end:i}=e;i&&i(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function b(e,t){let r=(0,o.I)(e,t);(0,i.V)(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let l=function(){let e=(0,c.u)();return(0,a.useMemo)(()=>new m(e),[e])}(),s=function(e,t){let r=(0,c.u)(),i=(0,a.useMemo)(()=>new u(r.getBackend()),[r]);return(0,g.E)(()=>(i.dragSourceOptions=e||null,i.reconnect(),()=>i.disconnectDragSource()),[i,e]),(0,g.E)(()=>(i.dragPreviewOptions=t||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,t]),i}(r.options,r.previewOptions),d=(0,c.u)(),h=function(e,t,r){let i=(0,a.useMemo)(()=>new f(e,t,r),[t,r]);return(0,a.useEffect)(()=>{i.spec=e},[e]),i}(r,l,s),p=(0,a.useMemo)(()=>{let e=r.type;return(0,i.V)(null!=e,"spec.type must be defined"),e},[r]);return(0,g.E)(function(){if(null!=p){let[e,t]=(0,v.V)(p,h,d);return l.receiveHandlerId(e),s.receiveHandlerId(e),t}},[d,l,s,h,p]),[(0,n.j)(r.collect,l,s),(0,a.useMemo)(()=>s.hooks.dragSource(),[s]),(0,a.useMemo)(()=>s.hooks.dragPreview(),[s])]}},52260:function(e,t,r){r.d(t,{A:function(){return u}});var i=r(43961),n=r(30758),o=r(4633),a=r.n(o),l=r(1384),s=r.n(l),d=r(41349);function u({initialValues:e,upload_url:t="",maxSizeLimit:r,isAcceptVideo:o=!0,messageAcceptFail:l,accept:u,inputRef:c,storage_id:g}){var h,p,m,v;let{dialogBackend:f,i18n:b}=(0,i.PCX)(),[S,w]=n.useState(e||[]),D=null!=(p=null!=(h=null==r?void 0:r.photo)?h:null==r?void 0:r.other)?p:0,C=null!=(v=null!=(m=null==r?void 0:r.video)?m:null==r?void 0:r.other)?v:0;return[S,w,(e,r)=>{let i=[];if(a()(e))return;let n=[];for(let r=0;r<e.length;++r){let a=e[r],h=a.size,p=(0,d.EL)(null==a?void 0:a.type)?C:D,m=(0,d.ti)(a),v={id:0,uid:s()(),source:URL.createObjectURL(a),file_name:a.name,file_size:a.size,file_type:a.type,file:a,upload_url:t,storage_id:g,type:m.match("image/*")?"photo":"video",status:"new"};if("video"===v.type&&!o||!(0,d.HH)((0,d.ti)(a),u)){f.alert({message:l||b.formatMessage({id:"file_accept_type_fail"})}),(null==c?void 0:c.current)&&(c.current.value=null);break}h>p&&0!==p?(v.max_size=p,n.push(v)):i.push(v)}if(i.length&&w(e=>[...r||e,...i]),n.length>0){var h;f.alert({message:1===n.length?b.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,d.Tu)(n[0].file_name,30),fileSize:(0,d.lT)(n[0].file_size),maxSize:(0,d.lT)(null==(h=n[0])?void 0:h.max_size)}):b.formatMessage({id:"warning_upload_limit_multi_file"},{numberFile:n.length,photoMaxSize:(0,d.lT)(D),videoMaxSize:(0,d.lT)(C)})})}}]}},58797:function(e,t,r){r.d(t,{A:function(){return l}});var i=r(30758),n=r(57717),o=r.n(n);let a=e=>e?o()(e)?a(Object.values(e)[0]):e.toString():null;function l({error:e,className:t="invalid-feedback order-last"}){return e?i.createElement("div",{"data-testid":"error",className:t},a(e)):null}},87887:function(e,t,r){r.d(t,{A:function(){return A}});var i=r(43961),n=r(25304),o=r(41349),a=r(69508),l=r(99221),s=r(13526),d=r(30758),u=r(94215),c=(0,r(28606).A)(e=>(0,u.A)({isDragging:{},itemRoot:{width:"100%",backgroundColor:e.mixins.backgroundColor("paper"),borderRadius:e.shape.borderRadius,boxShadow:e.shadows[2],"&$isDragging":{width:"100%",border:"dashed 2px",borderColor:e.palette.primary.main}},itemMediaBackdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"56%",borderRadius:e.shape.borderRadius},ratioauto:{},ratio169:{paddingBottom:"56.25%"},ratio916:{paddingBottom:"177.77%"},ratio32:{paddingBottom:"66.66%"},ratio23:{paddingBottom:"150%"},ratio43:{paddingBottom:"75%"},ratio34:{paddingBottom:"133.33%"},ratio13:{paddingBottom:"31%"},ratio11:{paddingBottom:"100%"},itemMedia:{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:e.shape.borderRadius}})),g=r(21818),h=r(45940),p=r(32501);let m="photo";function v({id:e,index:t,item:r,movePhoto:i,allowDnD:n=!1,children:o}){let a=c(),l=d.useRef(null);if(!r)return;if(!n||!i)return o;let[,u]=(0,h.H)({accept:m,drop(e,r){if(!l.current)return;let n=e.index;n!==t&&(i(n,t),e.index=t)}}),[g,v]=(0,p.i)({type:m,item:{type:m,id:e,index:t},collect:e=>({isDragging:e.isDragging()})}),f=g.isDragging?.5:.9999,b=g.isDragging?"isDragging":"";return v(u(l)),d.createElement("div",{"data-uid":r.uid,style:{cursor:"move",opacity:f},ref:l,className:(0,s.A)(a.itemRoot,b?a.isDragging:"")},o)}var f=r(4633),b=r.n(f),S=r(58791),w=r.n(S),D=r(65663);let C=(0,a.Ay)(l.A,{name:"MultipleUploadField",slot:"ActionsWrapper"})(({theme:e})=>({position:"absolute",top:e.spacing(1),right:e.spacing(1)})),y=(0,a.Ay)(l.A,{name:"MultipleUploadField",slot:"OtherActionsWrapper"})(({theme:e})=>({position:"absolute",top:e.spacing(1),left:e.spacing(1)})),P=(0,a.Ay)(n.Bj,{name:"MultipleUploadField",slot:"ActionButton"})(({theme:e})=>({fontSize:"14px",background:"rgba(0,0,0,0.4) !important",color:e.palette.common.white,"&:hover":{background:"rgba(0,0,0,0.4) !important",color:e.palette.common.white}})),I=(0,a.Ay)("div",{name:"MultipleUploadField",slot:"PreviewVideoWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"})),M=(0,a.Ay)("div",{name:"MultipleUploadField",slot:"MaskPlay"})(({theme:e})=>({position:"absolute",width:e.spacing(5),height:e.spacing(5),color:"#fff",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"50%",left:"50%",top:"50%",marginLeft:e.spacing(-2.5),marginTop:e.spacing(-2.5),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.mixins.pxToRem(24)})),O=(0,a.Ay)("video",{name:"MultipleUploadField",slot:"PreviewVideo"})({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",maxWidth:"100%"}),E=(0,a.Ay)(l.A,{name:"MultipleUploadField",slot:"ItemMediaContainer"})({position:"relative",textAlign:"center"});function A(e){var t;let r=c(),{i18n:a,dialogBackend:u}=(0,i.PCX)(),{item:h,removeItem:p,aspectRatio:m,editItem:f,id:S,allowRemove:A=!0,allowEdit:k=!1,mappingEditPhotoFields:x=[],editPhotoAction:_}=e,R=(0,o.EL)(null==h||null==(t=h.file)?void 0:t.type)||(null==h?void 0:h.module_name)==="video",U=!o.un&&R&&!(null==h?void 0:h.image),F=(0,i.EkY)(R?"video":D.Zt,R?"video":D.i3,R?"edit_selecting_video":"edit_selecting_photo"),z=(0,i.IgF)(null==_?void 0:_.module_name,null==_?void 0:_.resource_name,null==_?void 0:_.action_name)||{};if(!h)return;let{extra:T}=h,{can_delete:B,can_edit:H}=T||{can_edit:!0,can_delete:!0},j=null!=h&&!!h.uid||B&&A,N=(null==h?void 0:h.uid)?k:H&&k,V=async()=>{if(!N||!z&&!F)return;let e=w()(h,x),t=await u.present({component:"photo.dialog.quickEditPhotoFieldItem",props:{formSchema:b()(z)?F:void 0,dataSource:{...z,apiUrl:(0,o.vi)(z.apiUrl,h)},initialValues:{...e,...null==h?void 0:h.extra_info}}});t&&f(S,{extra_info:t})};return d.createElement(v,e,d.createElement(E,null,d.createElement(l.A,{sx:{position:"relative"},className:(0,s.A)(r.itemMediaBackdrop,r[`ratio${m}`])},R?d.createElement(I,null,U?d.createElement(O,{src:(null==h?void 0:h.source)||(null==h?void 0:h.destination),controls:!1}):d.createElement(g.A,{item:h}),d.createElement(M,null,d.createElement(n.s4,{icon:"ico-play"}))):d.createElement(g.A,{item:h}),d.createElement(y,null,N&&(F||z)?d.createElement(P,{size:"small",onClick:V,color:"primary",icon:"ico-pencil",title:a.formatMessage({id:"edit"})}):null),d.createElement(C,null,j?d.createElement(P,{size:"small",onClick:p,color:"primary",icon:"ico-close",title:a.formatMessage({id:"remove"})}):null))))}}}]);