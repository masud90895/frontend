"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["components-ItemDetailInteractionInModal-ItemDetailInteractionInModal","metafox-core-components-ItemDetailInteractionInModal-TaggedFriends","metafox-core-components-ItemDetailInteractionInModal-TaggedPlace"],{22165:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var l=n(18935),a=n(78275),i=n(44754),r=n(43961),o=n(1530),c=n(25304),m=n(99221),d=n(58875),s=n(75969),u=n(69508),p=n(30758),g=n(24009),f=n(28606),h=n(94215),E=(0,f.A)(e=>(0,h.A)({profileLink:{fontWeight:e.typography.fontWeightBold},statusRoot:{display:"block",marginBottom:e.spacing(2),"& .profileLink, & .profileLink:active":{color:e.palette.text.primary},"& a":{color:e.palette.text.primary,"&:hover":{textDecoration:"underline"}}},headerHeadline:{fontSize:e.mixins.pxToRem(15),"& a:not(.simpleLink)":{fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary},"& a:hover":{textDecoration:"underline"}}}),{name:"ItemDetailInteractionInModal"}),v=n(79953),x=n(53389),y=n(29925);let A="ItemDetailInteractionInModal",_=(0,u.Ay)(m.A,{name:A,slot:"root"})(({theme:e})=>({backgroundColor:e.palette.background.paper,paddingBottom:0,display:"flex",flexFlow:"column",height:"100%",justifyContent:"space-between",minWidth:"420px",[e.breakpoints.down("sm")]:{width:"100%",maxHeight:"none",borderRadius:0,minWidth:"auto"}})),k=(0,u.Ay)("div",{name:A,slot:"contentWrapper"})(({theme:e})=>({flex:1,minHeight:0,display:"flex",flexFlow:"column",position:"relative"})),w=(0,u.Ay)("div",{name:A,slot:"header"})(({theme:e})=>({padding:e.spacing(2),display:"flex",flexDirection:"row"})),I=(0,u.Ay)("div",{name:A,slot:"body"})(({theme:e})=>({flex:1,minHeight:0})),C=(0,u.Ay)("div",{name:A,slot:"footer",shouldForwardProp:e=>"maxHeight"!==e})(({theme:e,maxHeight:t})=>({backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),zIndex:99,minHeight:e.spacing(6),...t&&{maxHeight:t},[e.breakpoints.down("sm")]:{position:"unset",maxHeight:"none"}})),D=(0,u.Ay)("div",{name:A,slot:"ContentStyled"})(({theme:e})=>({marginBottom:e.spacing(1)})),b=(0,u.Ay)("div",{name:A,slot:"privacyBlock"})(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",color:e.palette.text.secondary})),H=(0,u.Ay)(c.xE,{name:A,slot:"profileLink"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary})),M=(0,u.Ay)("span",{name:"HeadlineSpan"})(({theme:e})=>({paddingRight:e.spacing(.5),color:e.palette.text.secondary})),N=(0,u.Ay)("div",{name:A,slot:"AvatarWrapper"})(({theme:e})=>({marginRight:e.spacing(1.5)})),R=(0,u.Ay)(m.A,{name:"HeaderSubInfo"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center"})),W=(0,u.Ay)(m.A,{name:A,slot:"WrapAction"})(({theme:e})=>({display:"flex",flexDirection:"row"})),P=({identity:e,item:t,user:n,loading:s,commentlistingComponent:u,startFooterItems:f,commentComposerProps:h,statisticDisplay:A,menuName:b,searchParams:P,isShowIClose:L=!0})=>{var F;let S=p.useRef(),$=p.useRef(null),z=p.useRef(null),T=p.useRef(null),{ReactionActButton:O,CommentReaction:V,CommentActButton:X,ShareActButton:j,ItemActionMenu:J,jsxBackend:Z,useActionControl:q,i18n:G}=(0,r.PCX)(),[K,Q]=q(e,{commentFocused:!1,menuOpened:!1,commentOpened:!0,commentInputRef:S}),U=(0,g.d4)(e=>(0,l.Vo)(e,t)),Y=(0,g.d4)(e=>(0,r.B_w)(e,null==t?void 0:t.owner)),ee=E(),et=(0,r.tgz)();if(s&&!(null==t?void 0:t.extra))return p.createElement(B,null);let en=Z.get("core.itemView.pendingReviewCard");if(!t||!n)return null;let{statistic:el,most_reactions_information:ea,extra:ei,location:er}=t,eo=Z.get("CommentComposer"),ec=Z.get("core.ui.iconCloseVideo");return p.createElement(_,null,p.createElement(k,{ref:$},p.createElement(en,{item:t,sx:{borderRadius:0}}),p.createElement(w,{ref:z},p.createElement(N,null,p.createElement(c.H8,{user:n,size:48,"data-testid":"author"})),p.createElement(R,{flex:1},p.createElement("div",{className:ee.headerHeadline},p.createElement(H,{to:n.link,user:n,"data-testid":"headline"}),(null==Y?void 0:Y.resource_name)!==(null==n?void 0:n.resource_name)&&Y&&p.createElement(M,null,G.formatMessage({id:"to_parent_user"},{icon:()=>p.createElement(c.s4,{icon:"ico-caret-right",className:ee.caretIcon}),parent_user:()=>p.createElement(a.A,{user:Y,className:ee.profileLink})}))),p.createElement(c.J7,{sx:{color:"text.secondary",mt:.5}},p.createElement(c.h1,{value:t.creation_date,"data-testid":"creationDate"}),A?p.createElement(c.C8,{values:t.statistic,display:A,component:"span",skipZero:!1}):null,p.createElement(c.g6,{value:t.privacy,item:null==t?void 0:t.privacy_detail,"data-testid":"iconPrivacy"}))),p.createElement(W,null,p.createElement(J,{identity:e,state:Q,handleAction:K,...b?{menuName:b}:null}),L&&ec?p.createElement(ec,null):null)),p.createElement(I,null,p.createElement(m.A,{sx:{maxHeight:"100%",display:"flex",flexDirection:"column",height:"100%"}},p.createElement(o.P,{autoHide:!0,autoHeight:!0,autoHeightMax:"100%"},p.createElement(m.A,{px:2},p.createElement(m.A,{sx:{"&:not(:empty)":{marginBottom:e=>e.spacing(2)}}},(null==t?void 0:t.text)||(null==t?void 0:t.description)?p.createElement(D,null,p.createElement(i.default,{status:null!=(F=null==t?void 0:t.text)?F:null==t?void 0:t.description})):null,(null==U?void 0:U.length)||(null==er?void 0:er.address)?p.createElement(M,{className:ee.statusRoot},(null==U?void 0:U.length)?p.createElement(v.default,{item_type:t.resource_name,item_id:t.id,total:U.length,users:U,className:ee.profileLink}):null,(null==er?void 0:er.address)?p.createElement(m.A,{component:"span",ml:.5},G.formatMessage({id:"at_tagged_place"},{name:er.address,bold:()=>p.createElement(x.default,{place:er})})):null):null),p.createElement(c.DN,{"id-tid":"statistic",handleAction:K,identity:e,reactions:ea,statistic:el}),V?p.createElement(V,null,O&&(null==ei?void 0:ei.can_like)&&p.createElement(O,{"id-tid":"reaction",reacted:t.user_reacted,identity:e,handleAction:K}),X&&(null==ei?void 0:ei.can_comment)&&p.createElement(X,{"id-tid":"comment",identity:e,handleAction:K}),j&&(null==ei?void 0:ei.can_share)&&p.createElement(j,{handleAction:K,"id-tid":"share",identity:e})):null,p.createElement(d.A,null),u||p.createElement(y.A,{"id-tid":"comment_list",handleAction:K,data:t.related_comments,viewMoreComments:(e,t)=>K("comment/viewMoreComments",e,t),total_comment:null==el?void 0:el.total_comment,total_reply:null==el?void 0:el.total_reply,identity:e,open:null==Q?void 0:Q.commentOpened,isDetailPage:!0,searchParams:P}))))),p.createElement(C,{ref:T},f?Z.render(f):null,et&&(null==ei?void 0:ei.can_comment)&&eo?p.createElement(eo,{"id-tid":"comment_composer",identity:e,open:null==Q?void 0:Q.commentOpened,focus:Q.commentFocused,...h}):null)))},B=()=>p.createElement(_,null,p.createElement(m.A,null,p.createElement(w,null,p.createElement(m.A,{pr:1.5},p.createElement(s.A,{variant:"circular",width:40,height:40})),p.createElement(m.A,{py:.5,flex:1},p.createElement("div",null,p.createElement(s.A,{variant:"text",component:"div"})),p.createElement(b,null,p.createElement(s.A,{variant:"text",width:120})))),p.createElement(m.A,{px:2,mt:4},p.createElement(m.A,{sx:{display:"flex",margin:"0 -8px"}},p.createElement(m.A,{p:1,flex:1},p.createElement(s.A,{variant:"rounded",height:32})),p.createElement(m.A,{p:1,flex:1},p.createElement(s.A,{variant:"rounded",height:32})),p.createElement(m.A,{p:1,flex:1},p.createElement(s.A,{variant:"rounded",height:32})))),p.createElement(m.A,{px:2,mt:4},p.createElement(s.A,{variant:"text"}),p.createElement(s.A,{variant:"text"}),p.createElement(s.A,{variant:"text"}))));P.LoadingSkeleton=B;var L=P},53389:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var l=n(18851),a=n(69508),i=n(30758);let r=(0,a.Ay)(l.A,{name:"TaggedPlace",slot:"root"})(({theme:e})=>({fontWeight:e.typography.fontWeightBold}));function o({place:e}){return i.createElement(r,{component:"span"},i.createElement("a",{rel:"noopener noreferrer",href:`https://www.google.com/maps?daddr=${e.lat},${e.lng}`,target:"_blank"},e.address))}},79953:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var l=n(43961),a=n(89507),i=n(30758),r=n(99221);function o({user:e,className:t}){if(!e)return null;if(null==e?void 0:e.is_deleted)return i.createElement(r.A,{component:"span",className:t},(null==e?void 0:e.full_name)||(null==e?void 0:e.title));let n=(null==e?void 0:e.link)?null==e?void 0:e.link:`/${null==e?void 0:e.resource_name}/${null==e?void 0:e.id}`,{resource_name:a,id:o}=e||{};return i.createElement(l.Wti,{to:n,className:t,hoverCard:`/${a}/${o}`},(null==e?void 0:e.full_name)||(null==e?void 0:e.title))}function c({children:e,className:t,item_type:n,item_id:r,users:o,excluded_ids:c,items:m}){let{dialogBackend:d}=(0,l.PCX)(),s=i.useCallback(e=>{e&&(e.stopPropagation(),e.preventDefault()),d.present({component:"friend.dialog.taggedFriendDialogs",props:{item_type:n,item_id:r,excluded_ids:c}})},[d,r,n]);return i.createElement(a.A,{title:i.createElement(()=>i.createElement("div",null,m.map(e=>i.createElement("div",{key:e.id},e.full_name))),null)},i.createElement("a",{href:"/",onClick:s,className:t},e))}function m({users:e,className:t,total:n,item_type:a,item_id:r}){let{i18n:m}=(0,l.PCX)();return(null==e?void 0:e.length)?1===n?i.createElement("span",null,m.formatMessage({id:"hyphen-with_tagged_friend"},{user0:()=>i.createElement(o,{user:e[0],className:t}),value:n-1})):2===n?i.createElement("span",null,m.formatMessage({id:"hyphen-with_tagged_friend_and_user"},{user0:()=>i.createElement(o,{user:e[0],className:t}),user1:()=>i.createElement(o,{user:e[1],className:t})})):i.createElement("span",null,m.formatMessage({id:"hyphen-with_tagged_friend_and_others"},{user0:()=>i.createElement(o,{user:e[0],className:t}),others:n=>{var l;return i.createElement(c,{children:n,className:t,item_type:a,item_id:r,users:e,items:e.slice(1),excluded_ids:[null==(l=e[0])?void 0:l.id]})},value:n-1})):null}}}]);