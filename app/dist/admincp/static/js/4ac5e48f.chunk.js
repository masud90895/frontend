"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["dataGrid","metafox-ui-SmartDataGrid-BasicCell","metafox-ui-SmartDataGrid-HeaderBasic","metafox-ui-SmartDataGrid-OptionCell"],{14800:function(e,t,n){t.A=(0,n(30758).createContext)(void 0)},21344:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(43961),l=n(89507),a=n(69508),i=n(20644),o=n.n(i),d=n(30758);let c=(0,a.Ay)("span",{name:"StyledBox"})(({truncateLines:e})=>({...e&&{wordBreak:"break-word",whiteSpace:"normal",display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:`${e}`}}));function s({row:e,colDef:{field:t,target:n,urlField:a,tagName:i,truncateLines:s,tooltip:u,tooltipDefault:m,emptyText:p=""}}){let g=o()(e,t,null),f=o()(e,"sx"),h=o()(f,t),v="",x=u?o()(e,u)||m:null;return a&&(v=o()(e,a))?d.createElement(l.A,{title:x},d.createElement(r.Wti,{target:n,to:v},d.createElement(c,{truncateLines:s,sx:h},g||p))):i?d.createElement(i,null,g||p):d.createElement(l.A,{title:x},d.createElement(c,{truncateLines:s,sx:h},g||p))}},30079:function(e,t,n){t.A=(0,n(30758).createContext)(void 0)},41643:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(30758),l=n(99221),a=n(69508),i=n(93806),o=n(59839),d=n(25304);let c=(0,a.Ay)("div",{name:"DataGrid",slot:"Cell",shouldForwardProp(e){return!/width|height|flex|align|minWidth|sortable/i.test(e)}})(({sortable:e,align:t,width:n,height:r,minWidth:l,flex:a})=>({display:"flex",alignItems:"center",padding:"10px 4px",overflow:"hidden",justifyContent:null!=t?t:"start",minWidth:l,flex:a,width:n,height:r,textAlign:null!=t?t:"left",fontWeight:"bold",cursor:e?"pointer":"unset"}));function s({colDef:e,children:t,searchValues:n}){let{setSearchValues:a}=(0,i.A)(),{headerAlign:s,align:u,minWidth:m,width:p,flex:g,headerHeight:f,sortable:h,description:v,sortableField:x}=e,{sort:b,sort_type:E}=n||{},w=x&&h;return r.createElement(c,{align:null!=s?s:u,minWidth:m,width:p,flex:g,sortable:h,height:f,onClick:()=>w&&void a(e=>({...e,sort:x,sort_type:"desc"===E?"asc":"desc"}))},t,h&&E&&b===x&&r.createElement(o.A,{icon:"asc"===E?"ico-arrow-up":"desc"===E?"ico-arrow-down":void 0}),r.createElement(l.A,{sx:{pl:.5}},r.createElement(d.Ck,null,v)))}},43817:function(e,t,n){n.r(t),n.d(t,{default:function(){return eb}});var r=n(43961),l=n(99221),a=n(93132),i=n(30758),o=n(41349),d=n(18851),c=n(22452),s=n(21344),u=n(30079),m=n(25304),p=n(89507),g=n(86725),f=n(69508);let h=(0,f.Ay)("div",{name:"SmartDataGrid",slot:"GridBannerRoot"})({});function v({title:e,description:t,hideTitle:n,hideDescription:a,hideToggleSearch:o,toggleSearchForm:c,multipleSelection:s}){let{i18n:u}=(0,r.PCX)();return!e||n?null:i.createElement(h,null,i.createElement(l.A,{sx:{display:"flex"}},i.createElement(d.A,{component:"h2",variant:"h4",sx:{flex:"1",padding:"16px 8px 8px 16px"}},e),i.createElement(l.A,{sx:{padding:"8px 8px 8px 16px"}},o?null:i.createElement(p.A,{title:u.formatMessage({id:"toggle_search"})},i.createElement(g.A,{onClick:c},i.createElement(m.s4,{icon:"ico-filter"}))))),a?i.createElement("div",null,i.createElement(d.A,{component:"p",variant:"body2"},t)):null)}let x=(0,f.Ay)(l.A,{name:"SmartDataGrid",slot:"GridBody"})(({theme:e})=>({position:"relative",backgroundColor:e.palette.background.paper})),b=(0,f.Ay)("div",{name:"DataGrid",slot:"Cell",shouldForwardProp:e=>!/align|dense|flex|width|minWidth|truncateLines/i.test(e)})(({theme:e,height:t,align:n,dense:r,flex:l,minWidth:a,width:i})=>({display:"flex",alignItems:"center",flex:l,width:i,minWidth:a,padding:r?"4px":"10px 4px",textAlign:null!=n?n:"left",justifyContent:null!=n?n:"left",overflow:"hidden",height:t}));var E=n(47235),w=n(73075);let C=(0,f.Ay)(l.A,{name:"SmartDataGrid",slot:"Footer",shouldForwardProp:e=>!/width|height/i.test(e)})(({theme:e,width:t,height:n})=>({height:n,width:null!=t?t:"100%",position:"relative",borderTop:e.mixins.border("secondary"),display:"flex",flexDirection:"row",alignItems:"center",padding:"0 8px 0 0","& button":{color:"inherit"},[e.breakpoints.up("sm")]:{flexDirection:"row-reverse"}}));function A(e){let{paging:t,onPageChange:n,onRowsPerPageChange:l,height:a,rowsPerPageOptions:o,width:d}=e,{i18n:c}=(0,r.PCX)();return o?i.createElement(C,{height:a,width:d,"data-testid":"GridFooter"},i.createElement(E.A,{onPageChange:(e,t)=>n(e,t+1),page:(null==t?void 0:t.current_page)-1,count:null==t?void 0:t.total,rowsPerPage:null==t?void 0:t.per_page,onRowsPerPageChange:e=>{n(e,1),l(e.target.value)},showFirstButton:(null==t?void 0:t.current_page)>0,showLastButton:(null==t?void 0:t.current_page)<(null==t?void 0:t.last_page),component:"div",labelRowsPerPage:c.formatMessage({id:"rows_per_page"}),rowsPerPageOptions:o})):i.createElement(C,{height:a,width:d,"data-testid":"GridFooter"},i.createElement(w.A,{onChange:n,page:null==t?void 0:t.current_page,count:null==t?void 0:t.last_page,showFirstButton:(null==t?void 0:t.current_page)>1,showLastButton:(null==t?void 0:t.current_page)<(null==t?void 0:t.last_page)}))}let y=(0,f.Ay)(l.A,{name:"DataGrid",slot:"Header",shouldForwardProp(e){return!/padding|height|width/i.test(e)}})(({height:e,padding:t,width:n,theme:r})=>({display:"flex",flexDirection:"row",height:e,boxSizing:"border-box",width:null!=n?n:"100%",padding:t,".dataGrid-scroll &":{borderBottom:"0 !important","& > div":{borderBottom:r.mixins.border("secondary")}},borderBottom:r.mixins.border("secondary")}));var k=function({children:e,minHeight:t}){let n=i.useRef(),[r,a]=i.useState("");return i.useEffect(()=>{if(!n.current)return;let e=new ResizeObserver(()=>{var e,t;a((null==n||null==(e=n.current)?void 0:e.scrollWidth)>(null==n||null==(t=n.current)?void 0:t.clientWidth)?"dataGrid-scroll":"")});return e.observe(n.current),()=>e.disconnect()},[]),i.createElement(l.A,{sx:{position:"relative",overflowX:"auto",width:"100%",minHeight:t},component:"div",ref:n,className:r,"data-testid":"MainGrid"},e)};let S=(0,f.Ay)("div",{name:"DataGrid",slot:"Row",shouldForwardProp:e=>!/padding|selected|disabled|minHeight/i.test(e)})(({selected:e,disabled:t,minHeight:n,theme:r,padding:l})=>({display:"flex",flexDirection:"row",flexWrap:"nowrap",position:"relative",overflow:"visible",width:"100%",minHeight:n,minWidth:"100%",maxWidth:"100%",padding:l,...e&&{"& > div":{backgroundColor:r.palette.action.selected}},...t&&{"& > div":{backgroundColor:r.palette.action.disabledBackground}},".dataGrid-scroll &":{borderBottom:"0 !important","& > div":{borderBottom:r.mixins.border("secondary")},"&:hover":{backgroundColor:"transparent !important","& > div":{backgroundColor:r.palette.action.hover}}},borderBottom:r.mixins.border("secondary"),"&:hover":{backgroundColor:r.palette.action.hover}}));var G=function({style:e,selected:t,disabled:n,onClick:r,children:l,index:a,height:o,minHeight:d,setItemSize:c,padding:s,width:u}){let m=i.useRef();return i.useEffect(()=>{!o&&c&&setTimeout(()=>{var e;c(a,null==(e=m.current)?void 0:e.getBoundingClientRect().height)},100)},[u]),i.createElement("div",{style:e,"data-testid":"itemRow",role:"row"},i.createElement(S,{minHeight:d,ref:m,disabled:n,padding:s,selected:t,onClick:r},l))},P=n(98982);let D=e=>i.createElement("div",null);function R({visibility:e,hideTitle:t,hideDescription:n,onSearchChange:r,dataSource:a,formSchema:o,searchValues:d,...c}){return a||o?i.createElement(l.A,{sx:{display:e?void 0:"hidden",padding:t?"12px 8px 0 16px":void 0}},i.createElement(P.FF,{loadingComponent:D,initialValues:d||{},noHeader:!0,dataSource:a,onSubmit:r,formSchema:o,navigationConfirmWhenDirty:!1,...c})):null}var B=n(14800),W=n(56332),_=n(53770),I=n(27759),M=n(65599),H=n(87365),N=n(93806);let F=(0,f.Ay)(l.A,{name:"DataGridToolbar",slot:"Root"})(({theme:e})=>Object.assign({display:"flex",flexDirection:"row",padding:"8px 0",minWidth:"30%"})),z=({item:e,closeMenu:t})=>{var n;let{to:l,label:a,value:o,params:d}=e,{handleGridAction:c}=(0,N.A)(),{navigate:s}=(0,r.PCX)();return i.createElement(M.Ay,{onClick:()=>{t(),e.value?c(o,{...d}):s(l)},"data-testid":null!=(n=e.testid)?n:e.name,sx:{cursor:"pointer"}},i.createElement(H.A,null,a))},X=({item:e})=>{var t;let{to:n,label:a,value:o,params:d}=e,{handleGridAction:c}=(0,N.A)(),{navigate:s}=(0,r.PCX)();return i.createElement(l.A,{sx:{pl:1}},i.createElement(W.A,{"data-testid":null!=(t=e.testid)?t:e.name,onClick:()=>{e.value?c(o,{...d}):s(n)},variant:"text",size:"smaller"},a))},$=i.forwardRef((e,t)=>{let{i18n:n}=(0,r.PCX)();return i.createElement(W.A,{size:"small",variant:"outlined",color:"primary",ref:t,sx:{fontWeight:"normal"},...e},n.formatMessage({id:"more"}))});var L=({menu:e})=>{let{getSetting:t,getAcl:n}=(0,r.PCX)(),a=null==e?void 0:e.items;if(!a||!a.length)return null;let d=(0,o.Ue)(a,{settings:t(),setting:t(),acl:n()});return d.length?i.createElement(F,null,i.createElement(l.A,{style:{display:"flex",flex:1,overflow:"hidden"},"data-testid":"datagridMenu"},i.createElement(m.Qh,{items:d,SecondMenuItem:z,MoreButton:$,MenuItem:X}))):null};let O=(0,f.Ay)(l.A,{name:"DataGridToolbar",slot:"Root"})(({theme:e})=>Object.assign({display:"flex",flexDirection:"row",padding:"8px 16px 4px 8px",borderBottom:e.mixins.border("secondary")})),T=(0,f.Ay)(l.A,{name:"DataGridToolbar",slot:"Menu"})(()=>({marginLeft:0,minWidth:110,paddingTop:8,marginRight:"auto",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",flexWrap:"wrap"}));function j({selectionCount:e,formSchema:t,onSearchChange:n,menu:r,handleAction:a,invisible:o,gridActionMenu:d,multipleSelection:c,totalItems:s}){var u;if(o||!(null==r||null==(u=r.items)?void 0:u.length)&&!t&&!d)return null;let m=null==r?void 0:r.items;return i.createElement(O,null,i.createElement(l.A,{sx:{pl:1,flex:1,minWidth:0}},s,t?i.createElement(P.ok,{initialValues:{},noHeader:!0,onSubmit:n,formSchema:t,navigationConfirmWhenDirty:!1}):null),d?i.createElement(L,{menu:d}):null,c&&(null==m?void 0:m.length)?i.createElement(T,null,i.createElement(V,{selectionCount:e,items:m,handleAction:a})):null)}function V({selectionCount:e,items:t,handleAction:n}){let{i18n:l,useTheme:a}=(0,r.PCX)(),o=a(),[d,c]=i.useState(!1),s=i.useRef();return i.createElement(i.Fragment,null,i.createElement(W.A,{disabled:!e,ref:s,variant:"outlined",onClick:()=>c(!0),sx:{fontWeight:"normal",flexWrap:"nowrap"}},l.formatMessage({id:"with_n_selected",defaultMessage:"Selected"},{value:e})),i.createElement(m.qB,{onClickAway:()=>c(!1),excludeRef:s},i.createElement(_.A,{open:!!(d&&s.current),anchorEl:s.current,placement:"bottom-end",style:{zIndex:o.zIndex.drawer}},i.createElement(I.A,{elevation:3,sx:{py:1,mr:1}},i.createElement(m.c,{items:t,handleAction:n,closeMenu:()=>c(!1)})))))}var q=n(82961),U=n(85481);let K={position:"absolute",left:0,top:0,bottom:0,right:0},Q={position:"absolute",left:"50%",top:"50%",marginLeft:-20,marginTop:-20};function Z({size:e=40}){return i.createElement("div",{style:K,"data-testid":"loadingIndicator"},i.createElement("div",{style:Q},i.createElement(U.A,{variant:"indeterminate",size:e})))}var J=({message:e})=>{let{i18n:t}=(0,r.PCX)();return e=null!=e?e:t.formatMessage({id:"no_results_found"}),i.createElement(l.A,{p:{position:"absolute",left:16,top:16}},i.createElement(d.A,null,e))},Y=n(28606),ee=n(94215),et=(0,Y.A)(e=>(0,ee.A)({table:{},selectedValue:{},selectedLabel:{},selectedIcon:{},optionIcon:{fontSize:"1rem !important"},optionButton:{width:32,height:32},resizeObserver:{position:"absolute",left:0,top:0,bottom:0,width:0,zIndex:-1},panelHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 0 8px 16px",borderBottom:"1px solid rgb(240, 240, 240)"},panelFooter:{display:"flex",alignItems:"center",justifyContent:"flex-end",minHeight:"56px"},"row-root":{display:"flex",flexDirection:"row",flexWrap:"nowrap",position:"relative",width:"100%",borderBottom:e.mixins.border("secondary"),paddingRight:e.spacing(.5),paddingLeft:e.spacing(.5)},"row-root-body":{"&:hover":{background:e.palette.action.hover}},"row-root-selected":{backgroundColor:e.palette.action.selected},"row-root-disabled":{backgroundColor:e.palette.action.disabledBackground},"cell-root":{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",padding:"0 8px"},"cell-head-root":{fontWeight:"bold"},"cell-right":{textAlign:"right"},"cell-center":{textAlign:"left"},"cell-dense":{padding:"0 4px"},"cell-multiline":{whiteSpace:"normal"}}),{name:"SmartDataGrid"});let en=(0,f.Ay)("div",{name:"SmartDataGrid",slot:"Wrapper"})(({theme:e})=>({backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,maxWidth:"100%",overflow:"auto"}));var er=n(45940),el=n(32501);let ea={cursor:"move"};var ei=({id:e,children:t,index:n,moveRow:r,handleDrop:l})=>{let a=i.useRef(null),[{handlerId:o},d]=(0,er.H)({accept:"row",collect(e){return{handlerId:e.getHandlerId()}},drop(){l()},hover(e,t){var l;if(!a.current)return;let i=e.index;if(i===n)return;let o=null==(l=a.current)?void 0:l.getBoundingClientRect(),d=(o.bottom-o.top)/2,c=t.getClientOffset().y-o.top;(!(i<n)||!(c<d))&&(i>n&&c>d||(r(i,n),e.index=n))}}),[{isDragging:c},s]=(0,el.i)({type:"row",item:()=>({id:e,index:n}),collect:e=>({isDragging:e.isDragging()}),end:(e,t)=>{t.didDrop()||l()}});return s(d(a)),i.createElement("div",{ref:a,style:{...ea,opacity:+!c},"data-handler-id":o},t)},eo=n(57468),ed=n.n(eo),ec=({rows:e,component:t,meta:n})=>{let{dispatch:a}=(0,r.PCX)(),[o,d]=i.useState(e.map(e=>e.id)),[c,s]=i.useState(!1);i.useEffect(()=>{d(e.map(e=>e.id))},[e.length]);let u=(e,t)=>{d(n=>{let r=[...n];return r.splice(t,0,r.splice(e,1)[0]),r})},m=()=>{let t=e.map(e=>e.id);ed()(t,o)||(s(!0),a({type:"row/sortable",payload:{order_ids:o},meta:{...n,onSuccess:p}}))},p=()=>{s(!1)};return i.createElement(l.A,{sx:{position:"relative",minHeight:"80px"}},i.createElement(l.A,{sx:{opacity:c?.7:1}},o.map((n,r)=>((n,r)=>{let a=e.find(e=>e.id===n);return a?c?i.createElement(l.A,{key:a.id},t({row:a})):i.createElement(ei,{key:a.id,index:r,id:a.id,moveRow:u,handleDrop:m},t({row:a})):null})(n,r))),c?i.createElement(l.A,{sx:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.5)"}},i.createElement(U.A,null)):null)},es=function(e){var t;let{jsxBackend:n}=(0,r.PCX)();if(!e)return null;let{config:l}=e;return n.render({component:`dataGrid.additionalSection.${null!=(t=l.component)?t:"Basic"}`,props:e})},eu=n(76534);let em=({message:e,total:t})=>{let{i18n:n}=(0,r.PCX)();return e&&t?i.createElement(l.A,{sx:{display:"flex",alignItems:"flex-end",height:"100%"}},i.createElement(d.A,{fontWeight:600,variant:"body1"},n.formatMessage({id:e,defaultMessage:e},{value:t}))):null};function ep({rows:e,title:t,columns:n,remoteSearchForm:d,config:m,gridName:p}){let g=et(),{useFetchItems:f,useSmartDataGrid:h,dispatch:E,usePageParams:w,usePrevious:C,jsxBackend:S,navigate:P,eventCenter:D}=(0,r.PCX)(),{inlineSearch:W,hideTitle:_=!1,pageSize:I,rowsPerPage:M,page:H=1,checkboxSelection:N,description:F,searchFormPlacement:z="top",hideDescription:X,hideToggleSearch:$,searchForm:L,batchActionMenu:O,gridActionMenu:T,disableSelectionOnClick:V=!0,rowsPerPageOptions:U,searchFormVisible:K=!0,dataSource:Q,rowHeight:Y=48,headerHeight:ee=48,footerHeight:er=56,height:el,idField:ea="id",dynamicRowHeight:ei=!1,sortable:eo,additionalSection:ep,allowRiskParams:eg=!0,errorComponent:ef="ui.dataGrid.error",extraData:eh}=m,{show_total:ev,total_item_phrase:ex}=eh||{},{pathname:eb}=(0,r.zy2)(),eE=I||M||20,ew=S.get(ef),eC=Q||m.actions.viewAll,eA=w(),ey=C(eA),ek=i.useCallback(e=>e[ea],[]),[eS,eG]=i.useState(H),[eP,eD]=i.useState(eE),[eR,eB]=i.useState(K),[eW,e_]=i.useState(),[eI,,eM]=h(m,{idField:ea,getRowId:ek,config:m,selection:[],rows:e}),{rows:eH,selection:eN,loadRev:eF,paging:ez,allRows:eX}=eI,e$=i.useRef(),[eL,eO]=i.useState(0),eT=i.useRef(),[ej,eV]=i.useState(""),eq=i.useCallback((e,t)=>eO(t),[]);(0,c.uZ)({onResize:eq,targetRef:eT});let eU=(null==ez?void 0:ez.last_page)>1||(null==ez?void 0:ez.total)>eE,eK=eU?er:0,eQ=function(e){let[,t]=(0,r.lWr)(),[n,l]=i.useState(0),[a,o]=i.useState(114);return i.useEffect(()=>{e.current&&o(e.current.getBoundingClientRect().top)},[e]),i.useEffect(()=>{l(t-a)},[a,t]),n}(e$)-16,eZ=(null!=el?el:eQ>0)?eQ-eK-eL-16-ee:.5*window.innerHeight,eJ=i.useCallback((e,t,n)=>{E({type:e,payload:t,meta:{...n,apiRef:eM}})},[]),eY=i.useCallback((e,t,n)=>{E({type:e,payload:t,meta:{...n,apiRef:eM}})},[]),e0=i.useCallback((e,t,n)=>{E({type:e,payload:t,meta:{...n,apiRef:eM}})},[]),e1=(0,i.useCallback)((e,t,n)=>{E({type:e,payload:{...t,id:eN},meta:{...n,apiRef:eM}})},[eN]),e5=(0,i.useCallback)((e,t,n)=>{E({type:e,payload:{...t},meta:{...n,apiRef:eM}})},[eN]),e2=(0,i.useCallback)(e=>eM.current.toggleSelect(e),[]),[e8]=i.useState({classes:g,config:m,dispatch:E,handleRowAction:eJ,handleColumnAction:e0,handleBatchAction:e1,handleGridAction:eY,handleReloadRow:e5,setSearchValues:e_,apiRef:eM}),e3=i.useMemo(()=>{let e=eS;return ed()(ey,eA)||eG(e=1),{...eA,...eW,limit:eP,loadRev:eF,dataGridProps:void 0,gridName:void 0,appName:void 0,parentResource:void 0,resourceName:void 0,page:e}},[eA,eW,eP,eF,eS,ey]),e4=i.useCallback(e=>{P(`${eb}?${eu.stringify(e)}`,{replace:!0})},[L,eb]),e6=(e,t)=>{W?tn(e.q):e4(e),t&&t.setSubmitting(!1)};i.useEffect(()=>{let e=D.on(`dataGridChangeRows_${p}`,eV);return()=>D.off(`dataGridChangeRows_${p}`,e)},[D,p]);let[e9,e7,te,tt]=f({dataSource:eC,pageParams:e3,cache:!1,data:e,allowRiskParams:eg,key:ej});i.useEffect(()=>{eM.current.initRows(e9,tt)},[eM,e9,tt]);let tn=i.useCallback(e=>{eM.current.setRows(eX.filter(t=>W.find(n=>RegExp((0,o.Nt)(e),"ig").test(t[n]))))},[eM,W,eX]),tr=(0,i.useCallback)((e,t)=>{eG(t)},[]),tl=i.useRef(),ta=i.useRef({}),ti=i.useCallback((e,t)=>{ta.current[e]!==t&&(ta.current[e]=t,tl.current&&tl.current.resetAfterIndex(e))},[]),to=eN.length,td=({index:e,style:t,row:r})=>{let l=r||eH[e],a=ek(l),o=eN.includes(a),d=ei?{}:{height:Y};return i.createElement(G,{index:e,setItemSize:ti,selected:o,padding:m.checkboxSelection?"0 12px 0 0":"0 12px",onClick:V?void 0:()=>e2(a),style:t,...d},n.map((e,t)=>{var n;let r=null!=(n=e.renderCell)?n:s.default;return i.createElement(b,{flex:e.flex,width:e.width,align:e.align,minWidth:e.minWidth,truncateLines:e.truncateLines,key:t.toString(),...d},i.createElement(r,{selected:o,colDef:e,id:a,row:l}))}))};if(!eC&&!e.length)return r.SDN?i.createElement(a.A,{color:"error"},"Missing required props."):null;if(te)return i.createElement(ew,{error:te,noWrapper:!0});let tc=eH.length>0,ts=!e7&&0===eH.length;return i.createElement(u.A.Provider,{value:e8},i.createElement(B.A.Provider,{value:eI},i.createElement(en,{ref:e$,"data-testid":"GridContainer"},i.createElement(l.A,{ref:eT,"data-testid":"GridTop"},i.createElement(v,{toggleSearchForm:()=>eB(e=>!e),title:t,description:F,hideDescription:X||!F,hideTitle:_||!t,multipleSelection:N,hideToggleSearch:$}),(d||L)&&"header"===z?i.createElement(R,{dataSource:d,visibility:eR,searchValues:eW,formSchema:L,onSearchChange:e6,hideDescription:X||!F,hideTitle:_||!t}):null,i.createElement(j,{formSchema:"top"===z?L:void 0,onSearchChange:e6,selectionCount:to,disabled:!to,multipleSelection:N,handleAction:e1,menu:O,gridActionMenu:T,hideDescription:X||!F,hideTitle:_||!t,totalItems:ev?i.createElement(em,{message:ex,total:null==tt?void 0:tt.total}):null})),i.createElement(k,null,i.createElement(()=>i.createElement(y,{height:ee,"data-testid":"GridHeader",padding:m.checkboxSelection?"0 12px 0 0":"0 12px"},n.map((e,t)=>{var n;let r=null!=(n=e.renderHeader)?n:q.default;return i.createElement(r,{colDef:e,key:t.toString(),searchValues:eW})})),null),i.createElement(x,{minHeight:ep?void 0:eZ,"data-testid":"GridBody"},eo?i.createElement(ec,{meta:{apiRef:eM},rows:eH,component:td}):i.createElement(l.A,null,eH.map((e,t)=>i.createElement(l.A,{key:`k${null==e?void 0:e.id}`},td({index:t})))),e7&&!tc?i.createElement(Z,null):null,!e7&&ts?i.createElement(J,{message:null==tt?void 0:tt.empty_message}):null)),eU?i.createElement(A,{height:er,paging:ez,onRowsPerPageChange:eD,multipleSelection:N,onPageChange:tr,rowsPerPageOptions:U}):null),ep?i.createElement(l.A,{sx:{mt:2}},i.createElement(es,{config:ep})):null))}var eg=n(54423),ef=n(4239),eh=n.n(ef);function ev({config:e,appName:t,resourceName:n,gridName:o,...d}){let{i18n:c,jsxBackend:s}=(0,r.PCX)(),u=i.useMemo(()=>{var t;let n=e.columns.map(e=>{var t;return{...e,renderCell:s.get(`dataGrid.cell.${null!=(t=e.renderCell)?t:"BasicCell"}`),renderHeader:s.get("dataGrid.header.Basic")}});return e.sortable&&n.unshift({field:"sortable",width:32,minWidth:32,renderHeader:void 0,renderCell:s.get("dataGrid.cell.SortIconCell")}),e.checkboxSelection&&n.unshift({field:"checkbox",width:56,minWidth:56,renderCell:s.get("dataGrid.cell.Checkbox"),renderHeader:s.get("dataGrid.header.Checkbox")}),(null==(t=e.itemActionMenu)?void 0:t.items.length)&&!(null==e?void 0:e.manualColumnItemActionMenu)&&n.push({field:"options",width:120,minWidth:100,align:"center",headerName:c.formatMessage({id:"options"}),renderCell:eg.default,renderHeader:void 0}),n},[t,n,o]);if(!e)return i.createElement(l.A,{px:2,py:2,component:"div"},i.createElement(a.A,{variant:"standard",color:"error"},"Oops!, could not find configuration."));let m={...e,appName:t,resourceName:n};return i.createElement(ep,{key:`${t}.${n}.${o}`,gridName:o,config:m,columns:u,rows:[],...d})}function ex(e){let{useFetchDetail:t,jsxBackend:n}=(0,r.PCX)(),{gridName:l,dataSource:a,loadingComponent:o="ui.admincp.loading",errorComponent:d="ui.dataGrid.error",forceReload:c=!1,configTTL:s}=e,[u,m,p]=t({dataSource:a||{apiUrl:`admincp/core/grid/${l}`},ttl:s||3e5,cachePrefix:"datagrid",cacheKey:l,forceReload:c}),g=eh()(o)?n.get(o):o,f=eh()(d)?n.get(d):d;return m?i.createElement(g,{error:p,loading:m}):p?i.createElement(f,{error:p}):(null==u?void 0:u.isHidden)?null:i.createElement(ev,{...e,config:u})}var eb=i.memo(function(e){let{gridName:t,resourceName:n,appName:r}=e;return i.createElement(ex,{...e,key:`${r}.${n}.${t}`})},(e,t)=>e.appName===t.appName&&e.resourceName===t.resourceName&&e.gridName===t.gridName)},54423:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(25304),l=n(30758),a=n(93806);function i({row:e,id:t}){var n;let{config:i,handleRowAction:o,classes:d}=(0,a.A)();return l.createElement(r.rI,{iconClass:d.optionIcon,buttonClass:d.optionButton,handleAction:o,size:"small",item:e,id:"itemOption",data:{id:t,row:e},items:null==(n=i.itemActionMenu)?void 0:n.items})}},82961:function(e,t,n){n.r(t);var r=n(41643),l=n(30758);t.default=function({colDef:e,searchValues:t}){var n;return l.createElement(r.A,{colDef:e,searchValues:t},null!=(n=e.headerName)?n:"")}},93806:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(30758),l=n(30079);function a(){return(0,r.useContext)(l.A)}}}]);