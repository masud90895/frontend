"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-user-blocks-ProfileHeader-Block"],{63550:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(43961),r=n(25304),i=n(69508),l=n(75365),o=n(18851),s=n(99221),c=n(30758),d=n(13526),m=n(85206),u=n(78473),p=n(67864),f=n(98216);function g(e){return(0,f.Ay)("MuiCardActions",e)}(0,p.A)("MuiCardActions",["root","spacing"]);var v=n(86070);let y=(0,i.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),A=c.forwardRef(function(e,t){let n=(0,u.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:r,...i}=n,l={...n,disableSpacing:a},o=(e=>{let{classes:t,disableSpacing:n}=e;return(0,m.A)({root:["root",!n&&"spacing"]},g,t)})(l);return(0,v.jsx)(y,{className:(0,d.A)(o.root,r),ownerState:l,ref:t,...i})});var h=n(56332);let b=(0,i.Ay)(l.A)(({theme:e})=>({display:"flex",justifyContent:"space-between",flexWrap:"wrap",padding:e.spacing(1,2),boxShadow:"none",..."light"===e.palette.mode&&{backgroundColor:e.layoutSlot.background.paper},[e.breakpoints.down("sm")]:{flexDirection:"column"}})),E=(0,i.Ay)(o.A)(({theme:e})=>({color:e.palette.text.primary}));var x=({item:e,actions:t})=>{let{i18n:n}=(0,a.PCX)();return c.createElement(b,null,c.createElement(s.A,{sx:{display:"flex",alignItems:"center"}},c.createElement(E,{component:"div",variant:"h5",sx:{marginBottom:.5}},n.formatMessage({id:"user_has_sent_you_a_friend_request"},{name:e.full_name}))),c.createElement(A,{sx:{paddingX:0}},c.createElement(h.A,{size:"small",variant:"contained",onClick:t.acceptFriend,component:"h5"},n.formatMessage({id:"accept_friend_request"})),c.createElement(r.Ak,{size:"small",variant:"outlined",onClick:t.denyFriend,component:"h5"},n.formatMessage({id:"delete_friend_request"}))))}},70826:function(e,t,n){n.d(t,{A:function(){return E}});var a=n(30758),r=n(13526),i=n(84008),l=n(98216),o=n(85206),s=n(86633),c=n(87997),d=n(76729),m=n(41059),u=n(44109),p=n(13934),f=n(86070);let g=(0,m.A)(),v=(0,s.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function y(e){return(0,c.A)({props:e,name:"MuiStack",defaultTheme:g})}let A=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...(0,u.NI)({theme:t},(0,u.kW)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e}))};if(e.spacing){let a=(0,p.LX)(t),r=Object.keys(t.breakpoints.values).reduce((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t),{}),l=(0,u.kW)({values:e.direction,base:r}),o=(0,u.kW)({values:e.spacing,base:r});"object"==typeof l&&Object.keys(l).forEach((e,t,n)=>{if(!l[e]){let a=t>0?l[n[t-1]]:"column";l[e]=a}}),n=(0,i.A)(n,(0,u.NI)({theme:t},o,(t,n)=>e.useFlexGap?{gap:(0,p._W)(a,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n?l[n]:e.direction]}`]:(0,p._W)(a,t)}}))}return(0,u.iZ)(t.breakpoints,n)};var h=n(69508),b=n(78473),E=function(e={}){let{createStyledComponent:t=v,useThemeProps:n=y,componentName:i="MuiStack"}=e,s=t(A);return a.forwardRef(function(e,t){let c=n(e),{component:m="div",direction:u="column",spacing:p=0,divider:g,children:v,className:y,useFlexGap:A=!1,...h}=(0,d.A)(c),b=(0,o.A)({root:["root"]},e=>(0,l.Ay)(i,e),{});return(0,f.jsx)(s,{as:m,ownerState:{direction:u,spacing:p,useFlexGap:A},ref:t,className:(0,r.A)(b.root,y),...h,children:g?function(e,t){let n=a.Children.toArray(e).filter(Boolean);return n.reduce((e,r,i)=>(e.push(r),i<n.length-1&&e.push(a.cloneElement(t,{key:`separator-${i}`})),e),[])}(v,g):v})})}({createStyledComponent:(0,h.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,b.b)({props:e,name:"MuiStack"})})},72389:function(e,t,n){n.d(t,{A:function(){return l}});var a=n(30758);function r(e,t){let{disableHysteresis:n=!1,threshold:a=100,target:r}=t,i=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),(!!n||void 0===i||!(e.current<i))&&e.current>a}let i="undefined"!=typeof window?window:null;function l(e={}){let{getTrigger:t=r,target:n=i,...o}=e,s=a.useRef(),[c,d]=a.useState(()=>t(s,o));return a.useEffect(()=>{if(null===n)return d(!1);let e=()=>{d(t(s,{target:n,...o}))};return e(),n.addEventListener("scroll",e,{passive:!0}),()=>{n.removeEventListener("scroll",e,{passive:!0})}},[n,t,JSON.stringify(o)]),c}},75365:function(e,t,n){n.d(t,{A:function(){return f}});var a=n(30758),r=n(13526),i=n(85206),l=n(69508),o=n(78473),s=n(27759),c=n(67864),d=n(98216);function m(e){return(0,d.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var u=n(86070);let p=(0,l.Ay)(s.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"});var f=a.forwardRef(function(e,t){let n=(0,o.b)({props:e,name:"MuiCard"}),{className:a,raised:l=!1,...s}=n,c={...n,raised:l},d=(e=>{let{classes:t}=e;return(0,i.A)({root:["root"]},m,t)})(c);return(0,u.jsx)(p,{className:(0,r.A)(d.root,a),elevation:l?8:void 0,ref:t,ownerState:c,...s})})},80170:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var a=n(43961),r=n(76775),i=n(32758),l=n(1530),o=n(25304),s=n(41349),c=n(69508),d=n(99221),m=n(56332),u=n(72389),p=n(89507),f=n(30758),g=n(84742),v=n(18851),y=({isOwner:e})=>{let{usePageParams:t,i18n:n}=(0,a.PCX)(),r=t(),i=(0,a.IgF)("activitypoint","activitypoint","getStatistic"),[l]=(0,g.B6)({dataSource:i,pageParams:r,cachePrefix:"activityPoint",cacheKey:`profile_${(null==r?void 0:r.profile_id)||(null==r?void 0:r.id)}`,ttl:36e5});if(!i||!l)return null;let{available_points:s}=l||{};return s?e?f.createElement(d.A,{display:"flex",color:"primary.main",alignItems:"center"},f.createElement(o.s4,{icon:"ico-star-circle-o",sx:{pr:.5}}),f.createElement(a.N_E,{to:"activitypoint"},f.createElement(d.A,{display:"flex",color:"primary.main",alignItems:"center"},n.formatMessage({id:"activity_point_summary"},{value:()=>f.createElement(v.A,{sx:{pl:.5},variant:"h6"},f.createElement(o.K2,{value:s}))})))):f.createElement(d.A,{display:"flex",color:"primary.main",alignItems:"center"},f.createElement(o.s4,{icon:"ico-star-circle-o",sx:{pr:.5}}),n.formatMessage({id:"activity_point_summary"},{value:()=>f.createElement(v.A,{sx:{pl:.5},variant:"h6"},f.createElement(o.K2,{value:s}))})):null},A=n(75969),h=n(28606),b=n(94215),E=(0,h.A)(e=>(0,b.A)({profileUserWrapper:{padding:e.spacing(2),background:e.palette.background.paper,borderBottom:e.mixins.border("secondary"),[e.breakpoints.down("sm")]:{"& $userInfo":{flexWrap:"wrap"},"& $avatarWrapper":{marginTop:e.spacing(-8)},"& $avatar":{width:90,height:90},"& $name":{minWidth:"100%",marginLeft:0}}},userInfo:{display:"flex"},avatarWrapper:{marginTop:e.spacing(-12.5),padding:e.spacing(.5),borderRadius:"999px",background:e.palette.background.paper},avatar:{width:160,height:160,borderRadius:"999px",background:e.palette.background.default},name:{marginLeft:e.spacing(3),flex:1,minWidth:0},menu:{background:e.palette.background.paper,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,height:e.spacing(7.5),display:"flex",alignItems:"center","& .MuiSkeleton-root":{padding:e.spacing(2),marginLeft:e.spacing(2)}}}),{name:"UserProfileHeaderSkeleton"});function x(){let e=E();return f.createElement(o.mc,{maxWidth:"md",gutter:!0},f.createElement(A.A,{variant:"rectangular",sx:{height:{sm:320,xs:179}},animation:!1}),f.createElement("div",{className:e.profileUserWrapper},f.createElement("div",{className:e.userInfo},f.createElement("div",{className:e.avatarWrapper},f.createElement("div",{className:e.avatar})),f.createElement("div",{className:e.name},f.createElement(A.A,{variant:"text",width:200,height:32})))),f.createElement("div",{className:e.menu},f.createElement(A.A,{variant:"button",width:100,height:20}),f.createElement(A.A,{variant:"button",width:100,height:20}),f.createElement(A.A,{variant:"button",width:100,height:20}),f.createElement(A.A,{variant:"button",width:100,height:20}),f.createElement(A.A,{variant:"button",width:100,height:20}),f.createElement(A.A,{variant:"button",width:100,height:20})))}var w=n(63550),_=n(75365),k=n(86725),R=n(70826);let M=(0,c.Ay)(_.A)(({theme:e})=>({display:"flex",background:"dark"===e.palette.mode?e.palette.grey[800]:e.palette.grey[100],padding:e.spacing(2),color:e.palette.text.secondary,boxShadow:"none",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}})),C=(0,c.Ay)(v.A)(({theme:e})=>({}));var I=({item:e})=>{let{i18n:t,dispatch:n}=(0,a.PCX)();if(!(null==e?void 0:e.is_pending))return null;let{extra:r,resource_name:i}=e;return f.createElement(d.A,null,f.createElement(M,null,f.createElement(d.A,null,f.createElement(k.A,{size:"medium"},f.createElement(o.s4,{icon:"ico-clock-o"}))),f.createElement(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,flexWrap:"wrap",rowGap:1.5}},f.createElement(d.A,{sx:{paddingLeft:2}},f.createElement(v.A,{variant:"h5",color:"text.primary",paddingBottom:.5},t.formatMessage({id:"this_app_is_pending_state"},{value:t.formatMessage({id:`resource_name_lower_case_${i}`,defaultMessage:i})})),f.createElement(C,{variant:"body2"},t.formatMessage({id:"contents_from_this_app_will_be_public_visible_after_admins_approve_it"},{value:t.formatMessage({id:`resource_name_lower_case_${i}`,defaultMessage:i})}))),f.createElement(R.A,{spacing:1,alignItems:"center",direction:"row",ml:2},(null==r?void 0:r.can_approve)?f.createElement(f.Fragment,null,f.createElement(o.dz,{size:"small",variant:"contained",action:t=>{n({type:"approveItem",payload:{identity:e._identity},meta:{onSuccess:t}})}},t.formatMessage({id:"approve"})),f.createElement(o.dz,{size:"small",variant:"outlined",action:t=>{n({type:"user/decline",payload:{identity:e._identity},meta:{onFinal:t}})}},t.formatMessage({id:"decline"}))):null))))};let S="HeaderProfileInPageDetail",W=(0,c.Ay)("div",{name:S,slot:"ItemSummary"})(({theme:e})=>({color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(15),paddingTop:e.spacing(1),paddingRight:e.spacing(2),"& p":{margin:0},[e.breakpoints.down("sm")]:{paddingRight:0}})),P=(0,c.Ay)(o.s4,{name:S,slot:"FeaturedIcon"})(({theme:e})=>({color:e.palette.primary.main,marginLeft:e.spacing(2)})),B=(0,c.Ay)("div",{name:S,slot:"UserStickyWrapper"})(({theme:e})=>({position:"relative",left:16,transition:"all .2s",display:"flex",justifyContent:"center","& a":{borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.border.secondary}})),T=(0,c.Ay)("div",{name:S,slot:"ProfileMenuStyled",shouldForwardProp:e=>"sticky"!==e})(({theme:e,sticky:t})=>({flex:1,minWidth:0,transition:"all .2s",...t&&{marginLeft:e.spacing(2.5),transition:"all .2s"}})),L=(0,c.Ay)("div",{name:S,slot:"Wrapper"})(({theme:e})=>({display:"block"})),z=(0,c.Ay)(d.A,{name:S,slot:"userInfo",overridesResolver(e,t){return[t.userInfo]}})(({theme:e})=>({backgroundColor:e.mixins.backgroundColor("paper"),[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%"}})),j=(0,c.Ay)(d.A,{name:S,slot:"userAction",overridesResolver(e,t){return[t.userAction]}})(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"flex-start",[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%"}})),N=(0,c.Ay)(d.A,{name:S,slot:"nameUser",overridesResolver(e,t){return[t.nameUser]}})(({theme:e})=>({flex:1,minWidth:0,[e.breakpoints.down("sm")]:{flexFlow:"column",width:"100%",marginBottom:e.spacing(2)}})),F=(0,c.Ay)("h1",{name:S,slot:"Title"})(({theme:e})=>({fontWeight:"bold",fontSize:e.mixins.pxToRem(24),color:e.palette.text.primary,margin:0,padding:0})),$=(0,c.Ay)("div",{name:S,slot:"wrapperButtonInline",overridesResolver(e,t){return[t.wrapperButtonInline]}})(({theme:e})=>({display:"flex",justifyContent:" center",alignItems:"stretch","& button":{marginLeft:e.spacing(1),textTransform:"capitalize",fontWeight:"bold",whiteSpace:"nowrap",borderRadius:e.spacing(.5),fontSize:e.mixins.pxToRem(13),padding:e.spacing(.5,1.25),marginBottom:e.spacing(1),minWidth:e.spacing(4),height:e.spacing(4),"& .ico":{fontSize:e.mixins.pxToRem(13)}},[e.breakpoints.down("sm")]:{flexFlow:"row wrap",padding:e.spacing(.5,0),justifyContent:"flex-start","& button":{marginLeft:0,marginRight:e.spacing(1)}}})),H=(0,c.Ay)(m.A,{name:S,slot:"ProfileActionMenu"})(({theme:e})=>({padding:`${e.spacing(.5,1.25)} !important`,minWidth:e.spacing(4),height:e.spacing(4)})),U=(0,c.Ay)("div",{name:S,slot:"profileHeaderBottom",overridesResolver(e,t){return[t.profileHeaderBottom]}})(({theme:e})=>{var t;return{backgroundColor:e.mixins.backgroundColor("paper"),display:"flex",borderTop:"solid 1px",borderTopColor:null==(t=e.palette.border)?void 0:t.secondary,borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"& .MuiProfileMenu-tabItem":{padding:e.spacing(2)},[e.breakpoints.down("md")]:{paddingTop:e.spacing(1)}}}),D=(0,c.Ay)(d.A)(({theme:e})=>({"> div":{marginTop:e.spacing(2)}})),X=(0,c.Ay)(d.A,{name:S,slot:"viewProfile",overridesResolver(e,t){return[t.viewProfile]}})(({theme:e})=>({})),O=({item:e,identity:t,profileMenu:n,profileActionMenu:r,blockProps:c,handleAction:m,state:g,actions:v})=>{var A,h;let{ItemActionMenu:b,usePageParams:E,ProfileHeaderCover:_,ProfileHeaderAvatar:k,useSession:R,getAcl:M,getSetting:C,assetUrl:S,i18n:O,useIsMobile:q,navigate:K,useTheme:G}=(0,a.PCX)(),Y=q(!0),{id:J,tab:V="home"}=E(),Z=R(),{user:Q}=Z||{},ee=M(),et=C(),en=(0,u.A)(),ea=null!=(h=null==(A=G().appBarMobileConfig)?void 0:A.nav)?h:48,er=(0,f.useCallback)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);if(!(null==e?void 0:e.profile_menu_settings)||!(null==e?void 0:e.profile_settings))return f.createElement(x,null);let{cover_photo_id:ei,extra:el,cover_photo_position:eo,profile_settings:es}=e,ec=(0,s.AE)(e.avatar,"200x200",S("user.no_image")),ed=(0,s.AE)(null==e?void 0:e.cover,"1024",S("user.cover_no_image")),em={item:e,acl:ee,setting:et,session:Z},eu=(0,s.Ue)(n.items,em),ep=(0,s.Ue)(r.items,em),ef=ep.slice(0,2),eg=ep.slice(2);return f.createElement(l.eB,null,f.createElement(l.tD,null,f.createElement(d.A,{"data-testid":"userProfileHeader"},f.createElement(L,null,f.createElement(d.A,null,f.createElement(_,{identity:t,image:ed,imageId:ei,alt:"",left:0,top:eo||0}),f.createElement(d.A,null,f.createElement(o.mc,{maxWidth:"md",gutter:!0},f.createElement(z,{p:2},f.createElement(j,null,f.createElement(N,{display:"flex",alignItems:"flex-start"},f.createElement(k,{alt:(0,s.cb)(e.full_name),canEdit:null==el?void 0:el.can_upload_avatar,onEdit:v.editProfileHeaderAvatar,avatar:ec,avatarId:e.avatar_id,identity:t,showLiveStream:!0}),f.createElement(X,{"data-testid":"viewProfileInfo"},f.createElement(F,{"data-testid":"viewProfileTitle"},e.full_name,e.is_featured?f.createElement(P,{icon:"ico-check-circle"}):null),(null==es?void 0:es.profile_view_profile)||e.bio?f.createElement(W,null,f.createElement(o.mE,{lines:2},f.createElement(i.Ay,{html:e.bio,simpleTransform:!0}))):null)),f.createElement(d.A,{display:"flex",flexDirection:"column",alignItems:{sm:"flex-end",xs:"flex-start"}},f.createElement($,null,ef.map((e,t)=>f.createElement(o.dz,{key:e.label,"data-testid":null==e?void 0:e.name,variant:(null==e?void 0:e.variant)||(0===t?"contained":"outlined"),startIcon:(null==e?void 0:e.icon)&&f.createElement(o.s4,{icon:e.icon}),autoEnable:!0,action:t=>m(e.value,{isMobile:Y},{onSuccess:t,onFinally:t}),color:e.color||"primary",size:"small"},e.label)),(null==Q?void 0:Q.id)!==parseInt(J)&&(null==eg?void 0:eg.length)?f.createElement(b,{id:"actionMenu",label:"ActionMenu",handleAction:m,items:eg,control:f.createElement(p.A,{title:O.formatMessage({id:"more_options"})},f.createElement(H,{variant:"outlined",color:"primary",size:"small"},f.createElement(o.s4,{icon:"ico-dottedmore-o"})))}):null),(null==el?void 0:el.can_view_profile_activity_point)?f.createElement(y,{isOwner:(null==Q?void 0:Q.id)===parseInt(J)}):null)),f.createElement(D,null,(null==e?void 0:e.friendship)===2?f.createElement(w.default,{item:e,actions:v}):null,f.createElement(I,{item:e}))))),(null==es?void 0:es.profile_view_profile)&&f.createElement(o.TM,{sx:Y&&!en?{top:ea}:""},({sticky:t})=>f.createElement(o.mc,{maxWidth:"md",gutter:!0},f.createElement(U,null,t?f.createElement(B,{onClick:er},f.createElement(o.H8,{user:e,size:48,noStory:!0,showStatus:!1})):null,f.createElement(T,{sticky:t},f.createElement(o.XR,{items:eu,activeTab:V,maxDisplayTab:5,prefix:null==e?void 0:e.link}))))))))))};O.displayName="UserProfileHeaderView";let q=(0,a.$MH)((0,a.L2$)(O,r.A));var K=(0,a.WvA)({name:"UserProfileHeaderBlock",extendBlock:q})},84742:function(e,t,n){n.d(t,{B6:function(){return r.A},e6:function(){return a.A}}),n(1368),n(19579);var a=n(61747),r=n(29817)},86633:function(e,t,n){t.A=(0,n(31489).Ay)()},87997:function(e,t,n){n.d(t,{A:function(){return i}});var a=n(45510),r=n(25631);function i({props:e,name:t,defaultTheme:n,themeId:i}){let l=(0,r.A)(n);return i&&(l=l[i]||l),(0,a.A)({theme:l,name:t,props:e})}}}]);