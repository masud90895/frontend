"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-admincp-blocks-AdminSideMenu-Block"],{93591:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o=n(43961),i=n(1530),a=n(44619),l=n(41349),r=n(69508),d=n(99221),u=n(30758),s=n(2675),m=n(5883),c=n(24009);let f=(0,r.Ay)(d.A,{name:"AdminCpSideMenu",slot:"SiteVersion"})(({theme:e})=>({padding:e.spacing(1.5,2),color:"rgba(238,238,238,0.7)",marginTop:"auto"}));function p(){var e;let{dispatch:t,i18n:n}=(0,o.PCX)(),i=(0,c.d4)(e=>e.admincp.status),a=null==i||null==(e=i.data)?void 0:e.version;return(u.useEffect(()=>{t((0,m.Ty)(!1))},[]),a)?u.createElement(f,null,`${n.formatMessage({id:"site_version"})}: ${a}`):null}function h(e){let t=[],n=e.split("/").filter(Boolean);return n.forEach((e,o)=>{o>0&&t.unshift(`/${n.slice(0,o).join("/")}`)}),t.unshift(e),t}let b=(0,r.Ay)(d.A,{name:"AdminSideMenu",slot:"Root",shouldForwardProp:e=>"mobile"!==e&&"drawerVisible"!==e})(({mobile:e,theme:t,drawerVisible:n})=>({position:"relative",zIndex:99,...e?{zIndex:t.zIndex.appBar+2,width:48}:{width:n?256:48}})),A=(0,r.Ay)(d.A,{name:"AdminSideMenu",slot:"Staged",shouldForwardProp:e=>"drawerVisible"!==e})(({theme:e,drawerVisible:t})=>({position:"fixed",width:t?256:48,top:58,bottom:0,left:0,background:"rgb(35, 48, 68)",overflowX:"hidden",overflowY:"auto"})),g=(0,r.Ay)(d.A,{name:"AdminSideMenu",slot:"Content"})(({theme:e})=>({paddingTop:"12px",paddingBottom:e.spacing(10)}));var v=(0,o.WvA)({extendBlock:function({drawerVisible:e,isDesktop:t=!0}){let{usePageParams:n,useSession:r,getAcl:m,getSetting:c,jsxBackend:f,compactUrl:v,useAppMenu:E,useLoggedIn:S,dispatch:w,useIsMobile:x}=(0,o.PCX)(),{id:k}=n(),y=(0,s.zy)(),M=r(),C=m(),B=c(),z=E("core","adminSidebarMenu"),[P,R]=u.useState(-1),T=u.useCallback(e=>{w({type:e,payload:{}})},[]),V=u.useRef(),_=S(),I=((e,t)=>{let n=(e=>{let t={},n=u.useMemo(()=>e.items.reduce((e,t)=>(e.push(t.to),t.items&&t.items.forEach(t=>{e.push(t.to)}),e),[]).filter(Boolean),[e]);return n.forEach(e=>{t[e]=e}),n.forEach(e=>{h(e).forEach(n=>{t[n]||(t[n]=e)})}),t})(e),o=n[h(t).find(e=>n[e])];return o||""})(z,y.pathname),$=u.useRef(),X=x(),F=()=>{$.current=setTimeout(()=>{R(-1)},500)},j=(0,l.Ue)(z.items,{session:M,acl:C,setting:B,isMobile:X});if(!j.length)return null;let D=j.findIndex(e=>e.items&&e.items.length?e.items.some(e=>e.to===I):I===e.to);return _?u.createElement(b,{mobile:!t,drawerVisible:e,"data-testid":"layoutSlotSide"},u.createElement(A,{drawerVisible:e},u.createElement(i.N2,{scrollRef:V},u.createElement(a.u,{scrollRef:V},u.createElement(d.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},u.createElement(g,null,j.map((n,o)=>f.render({component:`adminSideMenu.as.${n.as||"normal"}`,props:{key:o.toString(),handleAction:T,item:{...n,to:n.to?v(n.to,{id:k}):void 0},pathname:I,active:D===o,minimize:!e,isDesktop:t,activeHover:P===o,handlePopoverOpen:()=>{clearTimeout($.current),R(o)},handlePopoverClose:F}}))),e?u.createElement(p,null):null))))):null},name:"core.block.AdminSideMenu"})}}]);