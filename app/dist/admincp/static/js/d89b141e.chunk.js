"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-core-blocks-PinListView-Connected"],{31925:function(e,t,l){l.r(t),l.d(t,{default:function(){return x}});var n=l(43961),r=l(1530),i=l(25304),o=l(41349),a=l(22463),m=l(99221),s=l(85481),c=l(63027),d=l(20644),u=l.n(d),p=l(66521),E=l.n(p),g=l(3029),f=l.n(g),h=l(1855),y=l.n(h),k=l(30758),A=l(24009),w=e=>{let{item:t,isShape:l}=e,{jsxBackend:r}=(0,n.PCX)(),i=k.useRef(),o=r.get(t.component);return o?l?k.createElement(c.Ay,{ref:i,item:!0,key:"itemAddPhotoAlbum",style:{width:"100%",paddingTop:0}},k.createElement(m.A,{sx:{width:"125px",height:"125px"}})):k.createElement(c.Ay,{ref:i,item:!0,key:"itemAddPhotoAlbum",style:{width:"100%",paddingTop:0}},k.createElement(o,{size:"large"})):null},v=l(68588);let P={};var x=(0,n.hS2)(function({title:e,numColumns:t=4,limitItemsLoadSmooth:l=4,numberOfItemsPerPage:d,displayLimit:p,pagingId:g,itemProps:h={},gridItemProps:x={},gridContainerProps:b,itemView:_,canLoadMore:C,canLoadSmooth:S=!0,loadMore:T,emptyPage:W="no_content",emptyPageProps:$,startItemView:H}){let{jsxBackend:I}=(0,n.PCX)(),{loggedIn:B,user:D}=(0,n.wVH)(),L=(0,r.HX)(),V=null==L?void 0:L.identity,X=(0,a.A)();(null==L?void 0:L.profile_page)&&(null==L?void 0:L.album_id)&&(V=`photo.entities.photo_album.${L.album_id}`);let z=(0,n.dx2)(V),R=I.get(_),j=I.get(`${_}.skeleton`),q=[];if(H){let e=(null==D?void 0:D.id)&&(null==L?void 0:L.id)&&(null==D?void 0:D.id)===parseInt(L.id);q=(0,o.Ue)(H,{pageParams:L,authUser:D,loggedIn:B,isAuthUser:e,item:z}).map(({as:e,...t},l)=>({component:e,props:{key:l.toString(),...t}}))}let[K,M]=k.useState(1),Q=p||4,U=(0,A.d4)(e=>(0,n.qRQ)(e,g))||(0,n.KCW)();(0,n.ksV)(C?()=>M(e=>e+1):void 0),(null==U?void 0:U.ids)||(U.ids=[]);let F=C?U.ids.slice(0,K*(d||20)):U.ids.slice(0,Q||4),G=[...q,...F],{loading:J,refreshing:N,error:O,ended:Y,initialized:Z}=null!=U?U:{};if(h||(h={xs:12}),k.useEffect(()=>{(Z&&C&&!J&&T&&!Y||N)&&T()},[Z,N]),!R)return null;if(O){let e=u()(O,"response.data.error")||u()(O,"response.data.message"),t=403===u()(O,"response.status")?"core.block.error403":"core.block.error404",l=I.get(t);return k.createElement(l,{title:e})}let ee=null==b?void 0:b.spacing,et=y()(ee)?(X.gridPoint||8)*ee:0,el=`${Math.floor(100/t*10)/10}%`;if(!Z)return j?k.createElement(r.eB,null,k.createElement(r.Tw,{title:e}),k.createElement(r.tD,null,k.createElement(v.Ay,{columnWidth:el,gutterWidth:et,gutterHeight:et,monitorImagesLoaded:!0},f()(1,Q).map(e=>k.createElement(j,{wrapAs:c.Ay,wrapProps:x,itemProps:h,key:e.toString()}))))):k.createElement(m.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},k.createElement(s.A,{size:30}));if(!F.length&&Y){if("hide"===W)return null;let t=I.get(W),{noBlock:l}=$||{};return l?k.createElement(t,$):k.createElement(r.eB,null,k.createElement(r.Tw,{title:e}),k.createElement(r.tD,null,k.createElement(t,$)))}return k.createElement(r.eB,null,k.createElement(r.Tw,{title:e}),k.createElement(r.tD,null,k.createElement(m.A,{sx:{"& article":{opacity:"1 !important"}}},k.createElement(v.Ay,{columnWidth:el,gutterWidth:et,gutterHeight:et,monitorImagesLoaded:!0,itemComponent:"article"},E()(G)&&G.map((e,t)=>(null==e?void 0:e.component)?k.createElement(w,{key:`k${t}`,order:t,item:e}):k.createElement(R,{identity:e,key:`k${t}`,order:t,wrapAs:i.Ei,wrapProps:P,itemProps:h})),S&&!Y?f()(1,l||Q).map(e=>k.createElement(j,{wrapAs:c.Ay,wrapProps:x,itemProps:h,key:e.toString()})):null))))})}}]);