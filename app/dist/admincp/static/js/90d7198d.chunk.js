(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-friend-blocks-FriendListingBirthdayWithMonth-Block"],{5832:function(e,t,n){var l=n(59809),r=n(53333),a=n(85525),i=n(66521);e.exports=function(e,t){return function(n,o){var d=i(n)?l:r,u=t?t():{};return d(n,e,a(o,2),u)}}},41042:function(e,t,n){var l=n(71176),r=n(5832),a=Object.prototype.hasOwnProperty;e.exports=r(function(e,t,n){a.call(e,n)?e[n].push(t):l(e,n,[t])})},53333:function(e,t,n){var l=n(49797);e.exports=function(e,t,n,r){return l(e,function(e,l,a){t(r,e,n(e),a)}),r}},59809:function(e){e.exports=function(e,t,n,l){for(var r=-1,a=null==e?0:e.length;++r<a;){var i=e[r];t(l,i,n(i),e)}return l}},62032:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var l=n(43961),r=n(1530),a=n(69508),i=n(99221),o=n(18851),d=n(75969),u=n(3029),c=n.n(u),m=n(20644),s=n.n(m),f=n(41042),g=n.n(f),p=n(30758),E=n(24009),h=n(21658),y=n.n(h),v=n(41349);let k=({item:e})=>p.createElement(l.N_E,{hoverCard:!1,to:null==e?void 0:e.link,sx:{fontWeight:"bold"}},null==e?void 0:e.full_name);var x=({data:e})=>{let{i18n:t}=(0,l.PCX)();if(null==e?void 0:e.length)return p.createElement(i.A,{fontSize:e=>e.mixins.pxToRem(14),my:.5},p.createElement(k,{item:e[0]}),2===e.length&&p.createElement(p.Fragment,null,` ${t.formatMessage({id:"_and_"})} `,p.createElement(k,{item:e[1]})),3===e.length&&p.createElement(p.Fragment,null,", ",p.createElement(k,{item:e[1]}),` ${t.formatMessage({id:"_and_"})} `,p.createElement(k,{item:e[2]})),e.length>3&&p.createElement(p.Fragment,null,", ",p.createElement(k,{item:e[1]})," ",t.formatMessage({id:"and_value_others"},{value:e.length-2})))};let _=e=>e>12?e-12:e,b=(0,a.Ay)(i.A,{name:"sessionBirthday"})(({theme:e})=>({backgroundColor:e.palette.background.paper,marginTop:e.spacing(2),borderRadius:e.spacing(2),padding:e.spacing(2)}));var M=(0,l.hS2)(function({blockId:e,title:t,itemView:n,itemProps:a={},gridItemProps:u={},displayLimit:m=4,displayRowsLimit:f,pagingId:h,canLoadMore:k,handleUpdateLastRead:M,canLoadSmooth:w,loadMore:A,numberOfItemsPerPage:S,emptyPage:C="core.block.no_content",emptyPageProps:F,isLoadMoreScroll:P,isLoadMorePagination:B,errorPage:L}){let{jsxBackend:O,usePageParams:W,i18n:$,useWidthBreakpoint:D,useCachedBlockEmpty:V,getSetting:I}=(0,l.PCX)(),T=W(),R=I("friend.days_to_check_for_birthday"),j=y()(new Date).add(R,"days").month()+1,{page:Q}=T,U=O.get(n),X=O.get("friend.itemView.birthdayWidthAvatar"),q=O.get("friend.itemView.birthdayWidthAvatar.skeleton"),z=O.get(`${n}.skeleton`),K=B?parseInt(Q||1,10):1,[N,G]=(0,l.xWD)(!0),H=D(),J=12/parseInt(s()(u,H)||12,10),Y=f?f*J:m,[Z,ee]=V(e),[et,en]=p.useState(K),el=(0,E.d4)(e=>(0,l.qRQ)(e,h))||(0,l.KCW)(),er=p.useCallback(()=>{P&&et<=el.page&&en(e=>e+1)},[P,et,el.page]);(0,l.ksV)(er);let ea=p.useCallback(()=>{A(),en(e=>e+1)},[h]);p.useEffect(()=>{G&&G()},[null==el?void 0:el.page,G]),p.useEffect(()=>{!P||(null==el?void 0:el.ended)||(null==el?void 0:el.loading)||N||(null==el?void 0:el.dirty)||ea()},[null==el?void 0:el.loading,null==el?void 0:el.page,P,null==el?void 0:el.ended,null==el?void 0:el.dirty,N,ea]);let ei=S||20,eo=B?ei:2*J;!k&&Y&&(eo=Y);let{loading:ed,refreshing:eu,error:ec,ended:em,initialized:es,pagesOffset:ef,dirty:eg}=null!=el?el:{},ep=B&&ed,eE=P&&!em,eh=w&&(eE||ep),ey=k?el.ids.slice(0,et*ei):el.ids.slice(0,Y||el.ids.length),ev=(0,l.UfA)(ey);if(B){var ek;ey=(null==(ek=el.pages[et])?void 0:ek.ids)||[]}if(p.useEffect(()=>{M&&M()},[et]),p.useEffect(()=>{B&&(en(parseInt((null==T?void 0:T.page)||(null==ef?void 0:ef.current_page),10)),A())},[B,null==T?void 0:T.page,null==ef?void 0:ef.current_page]),p.useEffect(()=>{eu&&!eg&&A()},[es,eu]),!U)return null;if(u.xs||(u.xs=12),ec){if("hide"===L)return null;let e=s()(ec,"response.data.error")||s()(ec,"response.data.message"),n=403===s()(ec,"response.status")?"core.block.error403":"core.block.error404",l=O.get(n);return"default"===L?p.createElement(r.eB,null,p.createElement(r.Tw,{title:t,data:ey}),p.createElement(r.tD,null,p.createElement(l,{title:e}))):p.createElement(l,{title:e})}if(!ey.length&&(em||Z)||ec){if(Z||ee(!0),"hide"===C)return null;if("string"!=typeof C)return C;let e=O.get(C);if(!e)return null;let{noBlock:t,contentStyle:n}=F||{};return t?p.createElement(e,F):p.createElement(r.eB,null,p.createElement(r.tD,n,p.createElement(e,{...F})))}if(Z&&ee(!1),!es)return z?p.createElement(r.eB,null,p.createElement(r.tD,null,p.createElement(b,null,c()(0,eo).map(e=>p.createElement(z,{testid:"loadingIndicator",itemProps:a,key:e.toString()}))))):p.createElement("div",null,$.formatMessage({id:"loading_dots"}));if(!ey.length)return;let ex=g()(ev,({month:e,birthday:t,birthday_format:n})=>{let l=y()(t,n),r=(0,v.QS)(l),a=l.month()+1;return 0===r?"today":r<=R&&r>0?"upcoming":a===j&&r<0?"recentOfCurrentMonth":e});return p.createElement(r.eB,null,p.createElement(r.tD,null,(null==ex?void 0:ex.today)&&p.createElement(b,null,p.createElement(o.A,{variant:"h3"},$.formatMessage({id:"today_birthdays"})),null==ex?void 0:ex.today.map((e,t)=>p.createElement(U,{index:t,identity:e._identity,itemProps:a,key:t.toString()}))),(null==ex?void 0:ex.upcoming)&&p.createElement(b,null,p.createElement(o.A,{variant:"h3"},$.formatMessage({id:"upcoming_birthdays"})),null==ex?void 0:ex.upcoming.map((e,t)=>p.createElement(U,{index:t,identity:e._identity,itemProps:a,key:t.toString()}))),p.createElement(i.A,null,c()(j,j+12).map(e=>ex[`${_(e)}`]&&(((e,t)=>{let n=Object.keys(e),l=n.indexOf(t);return!!n[l+1]})(ex,`${_(e)}`)||em)&&p.createElement(b,{key:e.toString()},p.createElement(o.A,{variant:"h3"},y()().month(_(e)-1).format("MMMM")),p.createElement(x,{data:ex[`${_(e)}`]}),p.createElement(i.A,{sx:{display:"flex",flexFlow:"wrap"}},ex[`${_(e)}`].map((e,t)=>p.createElement(X,{identity:e._identity,itemProps:a,key:t.toString()}))))),(null==ex?void 0:ex.recentOfCurrentMonth)&&p.createElement(b,null,p.createElement(o.A,{variant:"h3"},y()().month(j-1).format("MMMM")),p.createElement(i.A,{sx:{display:"flex",flexFlow:"wrap"}},ex.recentOfCurrentMonth.map((e,t)=>p.createElement(X,{identity:e._identity,itemProps:a,key:t.toString()})),eh?c()(3).map(e=>p.createElement(q,{key:e.toString()})):null))),eh&&ex?p.createElement(b,null,p.createElement(d.A,{width:"25%"}),p.createElement(d.A,{width:"50%"}),p.createElement(i.A,{sx:{display:"flex",flexFlow:"wrap"}},c()(6).map(e=>p.createElement(q,{key:e.toString()})))):null))}),w=(0,l.WvA)({name:"FriendListing",extendBlock:M,overrides:{contentType:"friend"},defaults:{title:"Friend",dataSource:{apiUrl:"/friend"},emptyPage:"hide",itemView:"friend.itemView.mainCard",blockLayout:"Main Listings",gridLayout:"Friend List - Small List"}})}}]);